function Gy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mt={exports:{}},Pt={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qn;function Xr(){return qn||(qn=1,(function(t){function e(M,L){var b=M.length;M.push(L);e:for(;0<b;){var H=b-1>>>1,$=M[H];if(0<o($,L))M[H]=L,M[b]=$,b=H;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var L=M[0],b=M.pop();if(b!==L){M[0]=b;e:for(var H=0,$=M.length,ze=$>>>1;H<ze;){var Ye=2*(H+1)-1,wt=M[Ye],fe=Ye+1,Ke=M[fe];if(0>o(wt,b))fe<$&&0>o(Ke,wt)?(M[H]=Ke,M[fe]=b,H=fe):(M[H]=wt,M[Ye]=b,H=Ye);else if(fe<$&&0>o(Ke,b))M[H]=Ke,M[fe]=b,H=fe;else break e}}return L}function o(M,L){var b=M.sortIndex-L.sortIndex;return b!==0?b:M.id-L.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var c=[],d=[],f=1,h=null,p=3,m=!1,g=!1,v=!1,y=!1,T=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function _(M){for(var L=n(d);L!==null;){if(L.callback===null)i(d);else if(L.startTime<=M)i(d),L.sortIndex=L.expirationTime,e(c,L);else break;L=n(d)}}function C(M){if(v=!1,_(M),!g)if(n(c)!==null)g=!0,S||(S=!0,V());else{var L=n(d);L!==null&&K(C,L.startTime-M)}}var S=!1,I=-1,w=5,R=-1;function x(){return y?!0:!(t.unstable_now()-R<w)}function F(){if(y=!1,S){var M=t.unstable_now();R=M;var L=!0;try{e:{g=!1,v&&(v=!1,A(I),I=-1),m=!0;var b=p;try{t:{for(_(M),h=n(c);h!==null&&!(h.expirationTime>M&&x());){var H=h.callback;if(typeof H=="function"){h.callback=null,p=h.priorityLevel;var $=H(h.expirationTime<=M);if(M=t.unstable_now(),typeof $=="function"){h.callback=$,_(M),L=!0;break t}h===n(c)&&i(c),_(M)}else i(c);h=n(c)}if(h!==null)L=!0;else{var ze=n(d);ze!==null&&K(C,ze.startTime-M),L=!1}}break e}finally{h=null,p=b,m=!1}L=void 0}}finally{L?V():S=!1}}}var V;if(typeof E=="function")V=function(){E(F)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,N=U.port2;U.port1.onmessage=F,V=function(){N.postMessage(null)}}else V=function(){T(F,0)};function K(M,L){I=T(function(){M(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var L=3;break;default:L=p}var b=p;p=L;try{return M()}finally{p=b}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(M,L){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var b=p;p=M;try{return L()}finally{p=b}},t.unstable_scheduleCallback=function(M,L,b){var H=t.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?H+b:H):b=H,M){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=b+$,M={id:f++,callback:L,priorityLevel:M,startTime:b,expirationTime:$,sortIndex:-1},b>H?(M.sortIndex=b,e(d,M),n(c)===null&&M===n(d)&&(v?(A(I),I=-1):v=!0,K(C,b-H))):(M.sortIndex=$,e(c,M),g||m||(g=!0,S||(S=!0,V()))),M},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(M){var L=p;return function(){var b=p;p=L;try{return M.apply(this,arguments)}finally{p=b}}}})(Pt)),Pt}var Hn;function qy(){return Hn||(Hn=1,Mt.exports=Xr()),Mt.exports}function Qr(t,e){t.indexOf(e)===-1&&t.push(e)}function Zr(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ve=(t,e,n)=>n>e?e:n<t?t:n;let gn=()=>{};const He={},jr=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function as(t){return typeof t=="object"&&t!==null}const el=t=>/^0[^.\s]+$/u.test(t);function yn(t){let e;return()=>(e===void 0&&(e=t()),e)}const Pe=t=>t,tl=(t,e)=>n=>e(t(n)),vn=(...t)=>t.reduce(tl),us=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class nl{constructor(){this.subscriptions=[]}add(e){return Qr(this.subscriptions,e),()=>Zr(this.subscriptions,e)}notify(e,n,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,i);else for(let s=0;s<o;s++){const l=this.subscriptions[s];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xe=t=>t*1e3,j=t=>t/1e3;function cs(t,e){return e?t*(1e3/e):0}const ds=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,il=1e-7,ol=12;function sl(t,e,n,i,o){let s,l,u=0;do l=e+(n-e)/2,s=ds(l,i,o)-t,s>0?n=l:e=l;while(Math.abs(s)>il&&++u<ol);return l}function $e(t,e,n,i){if(t===e&&n===i)return Pe;const o=s=>sl(s,0,1,t,n);return s=>s===0||s===1?s:ds(o(s),e,i)}const fs=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hs=t=>e=>1-t(1-e),ps=$e(.33,1.53,.69,.99),Tn=hs(ps),ms=fs(Tn),gs=t=>(t*=2)<1?.5*Tn(t):.5*(2-Math.pow(2,-10*(t-1))),En=t=>1-Math.sin(Math.acos(t)),rl=hs(En),ys=fs(En),ll=$e(.42,0,1,1),al=$e(0,0,.58,1),vs=$e(.42,0,.58,1),ul=t=>Array.isArray(t)&&typeof t[0]!="number",Ts=t=>Array.isArray(t)&&typeof t[0]=="number",cl={linear:Pe,easeIn:ll,easeInOut:vs,easeOut:al,circIn:En,circInOut:ys,circOut:rl,backIn:Tn,backInOut:ms,backOut:ps,anticipate:gs},dl=t=>typeof t=="string",Bn=t=>{if(Ts(t)){gn(t.length===4);const[e,n,i,o]=t;return $e(e,n,i,o)}else if(dl(t))return cl[t];return t},Xe=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function fl(t,e){let n=new Set,i=new Set,o=!1,s=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function c(f){l.has(f)&&(d.schedule(f),t()),f(u)}const d={schedule:(f,h=!1,p=!1)=>{const g=p&&o?n:i;return h&&l.add(f),g.has(f)||g.add(f),f},cancel:f=>{i.delete(f),l.delete(f)},process:f=>{if(u=f,o){s=!0;return}o=!0,[n,i]=[i,n],n.forEach(c),n.clear(),o=!1,s&&(s=!1,d.process(f))}};return d}const hl=40;function Es(t,e){let n=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,l=Xe.reduce((E,_)=>(E[_]=fl(s),E),{}),{setup:u,read:c,resolveKeyframes:d,preUpdate:f,update:h,preRender:p,render:m,postRender:g}=l,v=()=>{const E=He.useManualTiming?o.timestamp:performance.now();n=!1,He.useManualTiming||(o.delta=i?1e3/60:Math.max(Math.min(E-o.timestamp,hl),1)),o.timestamp=E,o.isProcessing=!0,u.process(o),c.process(o),d.process(o),f.process(o),h.process(o),p.process(o),m.process(o),g.process(o),o.isProcessing=!1,n&&e&&(i=!1,t(v))},y=()=>{n=!0,i=!0,o.isProcessing||t(v)};return{schedule:Xe.reduce((E,_)=>{const C=l[_];return E[_]=(S,I=!1,w=!1)=>(n||y(),C.schedule(S,I,w)),E},{}),cancel:E=>{for(let _=0;_<Xe.length;_++)l[Xe[_]].cancel(E)},state:o,steps:l}}const{schedule:Me,cancel:_s,state:ut,steps:Hy}=Es(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pe,!0);let it;function pl(){it=void 0}const ee={now:()=>(it===void 0&&ee.set(ut.isProcessing||He.useManualTiming?ut.timestamp:performance.now()),it),set:t=>{it=t,queueMicrotask(pl)}},Cs=t=>e=>typeof e=="string"&&e.startsWith(t),By=Cs("--"),ml=Cs("var(--"),_n=t=>ml(t)?gl.test(t.split("/*")[0].trim()):!1,gl=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ne={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Be={...Ne,transform:t=>ve(0,1,t)},Qe={...Ne,default:1},Ve=t=>Math.round(t*1e5)/1e5,Cn=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function yl(t){return t==null}const vl=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Sn=(t,e)=>n=>!!(typeof n=="string"&&vl.test(n)&&n.startsWith(t)||e&&!yl(n)&&Object.prototype.hasOwnProperty.call(n,e)),Ss=(t,e,n)=>i=>{if(typeof i!="string")return i;const[o,s,l,u]=i.match(Cn);return{[t]:parseFloat(o),[e]:parseFloat(s),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},Tl=t=>ve(0,255,t),xt={...Ne,transform:t=>Math.round(Tl(t))},pe={test:Sn("rgb","red"),parse:Ss("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+xt.transform(t)+", "+xt.transform(e)+", "+xt.transform(n)+", "+Ve(Be.transform(i))+")"};function El(t){let e="",n="",i="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,i+=i,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const Bt={test:Sn("#"),parse:El,transform:pe.transform},Oe=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),le=Oe("deg"),Ie=Oe("%"),k=Oe("px"),_l=Oe("vh"),Cl=Oe("vw"),Jn={...Ie,parse:t=>Ie.parse(t)/100,transform:t=>Ie.transform(t*100)},_e={test:Sn("hsl","hue"),parse:Ss("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ie.transform(Ve(e))+", "+Ie.transform(Ve(n))+", "+Ve(Be.transform(i))+")"},B={test:t=>pe.test(t)||Bt.test(t)||_e.test(t),parse:t=>pe.test(t)?pe.parse(t):_e.test(t)?_e.parse(t):Bt.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?pe.transform(t):_e.transform(t),getAnimatableNone:t=>{const e=B.parse(t);return e.alpha=0,B.transform(e)}},Sl=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Al(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Cn))==null?void 0:e.length)||0)+(((n=t.match(Sl))==null?void 0:n.length)||0)>0}const As="number",Is="color",Il="var",Rl="var(",$n="${}",wl=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Je(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},o=[];let s=0;const u=e.replace(wl,c=>(B.test(c)?(i.color.push(s),o.push(Is),n.push(B.parse(c))):c.startsWith(Rl)?(i.var.push(s),o.push(Il),n.push(c)):(i.number.push(s),o.push(As),n.push(parseFloat(c))),++s,$n)).split($n);return{values:n,split:u,indexes:i,types:o}}function Rs(t){return Je(t).values}function ws(t){const{split:e,types:n}=Je(t),i=e.length;return o=>{let s="";for(let l=0;l<i;l++)if(s+=e[l],o[l]!==void 0){const u=n[l];u===As?s+=Ve(o[l]):u===Is?s+=B.transform(o[l]):s+=o[l]}return s}}const Ml=t=>typeof t=="number"?0:B.test(t)?B.getAnimatableNone(t):t;function Pl(t){const e=Rs(t);return ws(t)(e.map(Ml))}const We={test:Al,parse:Rs,createTransformer:ws,getAnimatableNone:Pl};function Nt(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function xl({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let o=0,s=0,l=0;if(!e)o=s=l=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;o=Nt(c,u,t+1/3),s=Nt(c,u,t),l=Nt(c,u,t-1/3)}return{red:Math.round(o*255),green:Math.round(s*255),blue:Math.round(l*255),alpha:i}}function ct(t,e){return n=>n>0?e:t}const Tt=(t,e,n)=>t+(e-t)*n,Dt=(t,e,n)=>{const i=t*t,o=n*(e*e-i)+i;return o<0?0:Math.sqrt(o)},Nl=[Bt,pe,_e],Dl=t=>Nl.find(e=>e.test(t));function On(t){const e=Dl(t);if(!e)return!1;let n=e.parse(t);return e===_e&&(n=xl(n)),n}const Wn=(t,e)=>{const n=On(t),i=On(e);if(!n||!i)return ct(t,e);const o={...n};return s=>(o.red=Dt(n.red,i.red,s),o.green=Dt(n.green,i.green,s),o.blue=Dt(n.blue,i.blue,s),o.alpha=Tt(n.alpha,i.alpha,s),pe.transform(o))},Jt=new Set(["none","hidden"]);function Fl(t,e){return Jt.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Ul(t,e){return n=>Tt(t,e,n)}function An(t){return typeof t=="number"?Ul:typeof t=="string"?_n(t)?ct:B.test(t)?Wn:bl:Array.isArray(t)?Ms:typeof t=="object"?B.test(t)?Wn:kl:ct}function Ms(t,e){const n=[...t],i=n.length,o=t.map((s,l)=>An(s)(s,e[l]));return s=>{for(let l=0;l<i;l++)n[l]=o[l](s);return n}}function kl(t,e){const n={...t,...e},i={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(i[o]=An(t[o])(t[o],e[o]));return o=>{for(const s in i)n[s]=i[s](o);return n}}function Ll(t,e){const n=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const s=e.types[o],l=t.indexes[s][i[s]],u=t.values[l]??0;n[o]=u,i[s]++}return n}const bl=(t,e)=>{const n=We.createTransformer(e),i=Je(t),o=Je(e);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?Jt.has(t)&&!o.values.length||Jt.has(e)&&!i.values.length?Fl(t,e):vn(Ms(Ll(i,o),o.values),n):ct(t,e)};function Ps(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Tt(t,e,n):An(t)(t,e)}const Vl=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Me.update(e,n),stop:()=>_s(e),now:()=>ut.isProcessing?ut.timestamp:ee.now()}},xs=(t,e,n=10)=>{let i="";const o=Math.max(Math.round(e/n),2);for(let s=0;s<o;s++)i+=Math.round(t(s/(o-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},dt=2e4;function In(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<dt;)e+=n,i=t.next(e);return e>=dt?1/0:e}function Gl(t,e=100,n){const i=n({...t,keyframes:[0,e]}),o=Math.min(In(i),dt);return{type:"keyframes",ease:s=>i.next(o*s).value/e,duration:j(o)}}const ql=5;function Ns(t,e,n){const i=Math.max(e-ql,0);return cs(n-t(i),e-i)}const q={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ft=.001;function Hl({duration:t=q.duration,bounce:e=q.bounce,velocity:n=q.velocity,mass:i=q.mass}){let o,s,l=1-e;l=ve(q.minDamping,q.maxDamping,l),t=ve(q.minDuration,q.maxDuration,j(t)),l<1?(o=d=>{const f=d*l,h=f*t,p=f-n,m=$t(d,l),g=Math.exp(-h);return Ft-p/m*g},s=d=>{const h=d*l*t,p=h*n+n,m=Math.pow(l,2)*Math.pow(d,2)*t,g=Math.exp(-h),v=$t(Math.pow(d,2),l);return(-o(d)+Ft>0?-1:1)*((p-m)*g)/v}):(o=d=>{const f=Math.exp(-d*t),h=(d-n)*t+1;return-Ft+f*h},s=d=>{const f=Math.exp(-d*t),h=(n-d)*(t*t);return f*h});const u=5/t,c=Jl(o,s,u);if(t=xe(t),isNaN(c))return{stiffness:q.stiffness,damping:q.damping,duration:t};{const d=Math.pow(c,2)*i;return{stiffness:d,damping:l*2*Math.sqrt(i*d),duration:t}}}const Bl=12;function Jl(t,e,n){let i=n;for(let o=1;o<Bl;o++)i=i-t(i)/e(i);return i}function $t(t,e){return t*Math.sqrt(1-e*e)}const $l=["duration","bounce"],Ol=["stiffness","damping","mass"];function zn(t,e){return e.some(n=>t[n]!==void 0)}function Wl(t){let e={velocity:q.velocity,stiffness:q.stiffness,damping:q.damping,mass:q.mass,isResolvedFromDuration:!1,...t};if(!zn(t,Ol)&&zn(t,$l))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),o=i*i,s=2*ve(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:q.mass,stiffness:o,damping:s}}else{const n=Hl(t);e={...e,...n,mass:q.mass},e.isResolvedFromDuration=!0}return e}function ft(t=q.visualDuration,e=q.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:o}=n;const s=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:s},{stiffness:c,damping:d,mass:f,duration:h,velocity:p,isResolvedFromDuration:m}=Wl({...n,velocity:-j(n.velocity||0)}),g=p||0,v=d/(2*Math.sqrt(c*f)),y=l-s,T=j(Math.sqrt(c/f)),A=Math.abs(y)<5;i||(i=A?q.restSpeed.granular:q.restSpeed.default),o||(o=A?q.restDelta.granular:q.restDelta.default);let E;if(v<1){const C=$t(T,v);E=S=>{const I=Math.exp(-v*T*S);return l-I*((g+v*T*y)/C*Math.sin(C*S)+y*Math.cos(C*S))}}else if(v===1)E=C=>l-Math.exp(-T*C)*(y+(g+T*y)*C);else{const C=T*Math.sqrt(v*v-1);E=S=>{const I=Math.exp(-v*T*S),w=Math.min(C*S,300);return l-I*((g+v*T*y)*Math.sinh(w)+C*y*Math.cosh(w))/C}}const _={calculatedDuration:m&&h||null,next:C=>{const S=E(C);if(m)u.done=C>=h;else{let I=C===0?g:0;v<1&&(I=C===0?xe(g):Ns(E,C,S));const w=Math.abs(I)<=i,R=Math.abs(l-S)<=o;u.done=w&&R}return u.value=u.done?l:S,u},toString:()=>{const C=Math.min(In(_),dt),S=xs(I=>_.next(C*I).value,C,30);return C+"ms "+S},toTransition:()=>{}};return _}ft.applyToOptions=t=>{const e=Gl(t,100,ft);return t.ease=e.ease,t.duration=xe(e.duration),t.type="keyframes",t};function Ot({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:l,min:u,max:c,restDelta:d=.5,restSpeed:f}){const h=t[0],p={done:!1,value:h},m=w=>u!==void 0&&w<u||c!==void 0&&w>c,g=w=>u===void 0?c:c===void 0||Math.abs(u-w)<Math.abs(c-w)?u:c;let v=n*e;const y=h+v,T=l===void 0?y:l(y);T!==y&&(v=T-h);const A=w=>-v*Math.exp(-w/i),E=w=>T+A(w),_=w=>{const R=A(w),x=E(w);p.done=Math.abs(R)<=d,p.value=p.done?T:x};let C,S;const I=w=>{m(p.value)&&(C=w,S=ft({keyframes:[p.value,g(p.value)],velocity:Ns(E,w,p.value),damping:o,stiffness:s,restDelta:d,restSpeed:f}))};return I(0),{calculatedDuration:null,next:w=>{let R=!1;return!S&&C===void 0&&(R=!0,_(w),I(w)),C!==void 0&&w>=C?S.next(w-C):(!R&&_(w),p)}}}function zl(t,e,n){const i=[],o=n||He.mix||Ps,s=t.length-1;for(let l=0;l<s;l++){let u=o(t[l],t[l+1]);if(e){const c=Array.isArray(e)?e[l]||Pe:e;u=vn(c,u)}i.push(u)}return i}function Ds(t,e,{clamp:n=!0,ease:i,mixer:o}={}){const s=t.length;if(gn(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=zl(e,i,o),c=u.length,d=f=>{if(l&&f<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const p=us(t[h],t[h+1],f);return u[h](p)};return n?f=>d(ve(t[0],t[s-1],f)):d}function Yl(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const o=us(0,e,i);t.push(Tt(n,1,o))}}function Kl(t){const e=[0];return Yl(e,t.length-1),e}function Xl(t,e){return t.map(n=>n*e)}function Ql(t,e){return t.map(()=>e||vs).splice(0,t.length-1)}function Ge({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const o=ul(i)?i.map(Bn):Bn(i),s={done:!1,value:e[0]},l=Xl(n&&n.length===e.length?n:Kl(e),t),u=Ds(l,e,{ease:Array.isArray(o)?o:Ql(e,o)});return{calculatedDuration:t,next:c=>(s.value=u(c),s.done=c>=t,s)}}const Zl=t=>t!==null;function Rn(t,{repeat:e,repeatType:n="loop"},i,o=1){const s=t.filter(Zl),u=o<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!u||i===void 0?s[u]:i}const jl={decay:Ot,inertia:Ot,tween:Ge,keyframes:Ge,spring:ft};function Fs(t){typeof t.type=="string"&&(t.type=jl[t.type])}class wn{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const ea=t=>t/100;class Mn extends wn{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,o;const{motionValue:n}=this.options;n&&n.updatedAt!==ee.now()&&this.tick(ee.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(i=this.options).onStop)==null||o.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Fs(e);const{type:n=Ge,repeat:i=0,repeatDelay:o=0,repeatType:s,velocity:l=0}=e;let{keyframes:u}=e;const c=n||Ge;c!==Ge&&typeof u[0]!="number"&&(this.mixKeyframes=vn(ea,Ps(u[0],u[1])),u=[0,100]);const d=c({...e,keyframes:u});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...u].reverse(),velocity:-l})),d.calculatedDuration===null&&(d.calculatedDuration=In(d));const{calculatedDuration:f}=d;this.calculatedDuration=f,this.resolvedDuration=f+o,this.totalDuration=this.resolvedDuration*(i+1)-o,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:o,mixKeyframes:s,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:c}=this;if(this.startTime===null)return i.next(0);const{delay:d=0,keyframes:f,repeat:h,repeatType:p,repeatDelay:m,type:g,onUpdate:v,finalKeyframe:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-d*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?T<0:T>o;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let E=this.currentTime,_=i;if(h){const w=Math.min(this.currentTime,o)/u;let R=Math.floor(w),x=w%1;!x&&w>=1&&(x=1),x===1&&R--,R=Math.min(R,h+1),!!(R%2)&&(p==="reverse"?(x=1-x,m&&(x-=m/u)):p==="mirror"&&(_=l)),E=ve(0,1,x)*u}const C=A?{done:!1,value:f[0]}:_.next(E);s&&(C.value=s(C.value));let{done:S}=C;!A&&c!==null&&(S=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return I&&g!==Ot&&(C.value=Rn(f,this.options,y,this.speed)),v&&v(C.value),I&&this.finish(),C}then(e,n){return this.finished.then(e,n)}get duration(){return j(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+j(e)}get time(){return j(this.currentTime)}set time(e){var n;e=xe(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ee.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=j(this.currentTime))}play(){var o,s;if(this.isStopped)return;const{driver:e=Vl,startTime:n}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(s=(o=this.options).onPlay)==null||s.call(o);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ee.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function ta(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const me=t=>t*180/Math.PI,Wt=t=>{const e=me(Math.atan2(t[1],t[0]));return zt(e)},na={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Wt,rotateZ:Wt,skewX:t=>me(Math.atan(t[1])),skewY:t=>me(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},zt=t=>(t=t%360,t<0&&(t+=360),t),Yn=Wt,Kn=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Xn=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),ia={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Kn,scaleY:Xn,scale:t=>(Kn(t)+Xn(t))/2,rotateX:t=>zt(me(Math.atan2(t[6],t[5]))),rotateY:t=>zt(me(Math.atan2(-t[2],t[0]))),rotateZ:Yn,rotate:Yn,skewX:t=>me(Math.atan(t[4])),skewY:t=>me(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Qn(t){return t.includes("scale")?1:0}function Yt(t,e){if(!t||t==="none")return Qn(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,o;if(n)i=ia,o=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=na,o=u}if(!o)return Qn(e);const s=i[e],l=o[1].split(",").map(oa);return typeof s=="function"?s(l):l[s]}const Jy=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Yt(n,e)};function oa(t){return parseFloat(t.trim())}const Pn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$y=new Set(Pn),Zn=t=>t===Ne||t===k,sa=new Set(["x","y","z"]),ra=Pn.filter(t=>!sa.has(t));function la(t){const e=[];return ra.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const ge={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Yt(e,"x"),y:(t,{transform:e})=>Yt(e,"y")};ge.translateX=ge.x;ge.translateY=ge.y;const ye=new Set;let Kt=!1,Xt=!1,Qt=!1;function Us(){if(Xt){const t=Array.from(ye).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const o=la(i);o.length&&(n.set(i,o),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const o=n.get(i);o&&o.forEach(([s,l])=>{var u;(u=i.getValue(s))==null||u.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Xt=!1,Kt=!1,ye.forEach(t=>t.complete(Qt)),ye.clear()}function ks(){ye.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Xt=!0)})}function aa(){Qt=!0,ks(),Us(),Qt=!1}class Ls{constructor(e,n,i,o,s,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=o,this.element=s,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(ye.add(this),Kt||(Kt=!0,Me.read(ks),Me.resolveKeyframes(Us))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:o}=this;if(e[0]===null){const s=o==null?void 0:o.get(),l=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&n){const u=i.readValue(n,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),o&&s===void 0&&o.set(e[0])}ta(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ye.delete(this)}cancel(){this.state==="scheduled"&&(ye.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const ua=t=>t.startsWith("--");function ca(t,e,n){ua(e)?t.style.setProperty(e,n):t.style[e]=n}const da=yn(()=>window.ScrollTimeline!==void 0),fa={};function ha(t,e){const n=yn(t);return()=>fa[e]??n()}const bs=ha(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Le=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,jn={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Le([0,.65,.55,1]),circOut:Le([.55,0,1,.45]),backIn:Le([.31,.01,.66,-.59]),backOut:Le([.33,1.53,.69,.99])};function Vs(t,e){if(t)return typeof t=="function"?bs()?xs(t,e):"ease-out":Ts(t)?Le(t):Array.isArray(t)?t.map(n=>Vs(n,e)||jn.easeOut):jn[t]}function pa(t,e,n,{delay:i=0,duration:o=300,repeat:s=0,repeatType:l="loop",ease:u="easeOut",times:c}={},d=void 0){const f={[e]:n};c&&(f.offset=c);const h=Vs(u,o);Array.isArray(h)&&(f.easing=h);const p={delay:i,duration:o,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:l==="reverse"?"alternate":"normal"};return d&&(p.pseudoElement=d),t.animate(f,p)}function Gs(t){return typeof t=="function"&&"applyToOptions"in t}function ma({type:t,...e}){return Gs(t)&&bs()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class ga extends wn{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:o,pseudoElement:s,allowFlatten:l=!1,finalKeyframe:u,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=l,this.options=e,gn(typeof e.type!="string");const d=ma(e);this.animation=pa(n,i,o,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const f=Rn(o,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(f):ca(n,i,f),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,i;const e=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return j(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+j(e)}get time(){return j(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=xe(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&da()?(this.animation.timeline=e,Pe):n(this)}}const qs={anticipate:gs,backInOut:ms,circInOut:ys};function ya(t){return t in qs}function va(t){typeof t.ease=="string"&&ya(t.ease)&&(t.ease=qs[t.ease])}const ei=10;class Ta extends ga{constructor(e){va(e),Fs(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:o,element:s,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new Mn({...l,autoplay:!1}),c=xe(this.finishedTime??this.time);n.setWithVelocity(u.sample(c-ei).value,u.sample(c).value,ei),u.stop()}}const ti=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(We.test(t)||t==="0")&&!t.startsWith("url("));function Ea(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function _a(t,e,n,i){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],l=ti(o,e),u=ti(s,e);return!l||!u?!1:Ea(t)||(n==="spring"||Gs(n))&&i}function Ca(t){t.duration=0,t.type="keyframes"}const Sa=new Set(["opacity","clipPath","filter","transform"]),Aa=yn(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Ia(t){var f;const{motionValue:e,name:n,repeatDelay:i,repeatType:o,damping:s,type:l}=t;if(!(((f=e==null?void 0:e.owner)==null?void 0:f.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return Aa()&&n&&Sa.has(n)&&(n!=="transform"||!d)&&!c&&!i&&o!=="mirror"&&s!==0&&l!=="inertia"}const Ra=40;class Oy extends wn{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:l="loop",keyframes:u,name:c,motionValue:d,element:f,...h}){var g;super(),this.stop=()=>{var v,y;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(y=this.keyframeResolver)==null||y.cancel()},this.createdAt=ee.now();const p={autoplay:e,delay:n,type:i,repeat:o,repeatDelay:s,repeatType:l,name:c,motionValue:d,element:f,...h},m=(f==null?void 0:f.KeyframeResolver)||Ls;this.keyframeResolver=new m(u,(v,y,T)=>this.onKeyframesResolved(v,y,p,!T),c,d,f),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(e,n,i,o){this.keyframeResolver=void 0;const{name:s,type:l,velocity:u,delay:c,isHandoff:d,onUpdate:f}=i;this.resolvedAt=ee.now(),_a(e,s,l,u)||((He.instantAnimations||!c)&&(f==null||f(Rn(e,i,n))),e[0]=e[e.length-1],Ca(i),i.repeat=0);const p={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>Ra?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},m=!d&&Ia(p)?new Ta({...p,element:p.motionValue.owner.current}):new Mn(p);m.finished.then(()=>this.notifyFinished()).catch(Pe),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),aa()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const wa=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ma(t){const e=wa.exec(t);if(!e)return[,];const[,n,i,o]=e;return[`--${n??i}`,o]}function Hs(t,e,n=1){const[i,o]=Ma(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const l=s.trim();return jr(l)?parseFloat(l):l}return _n(o)?Hs(o,e,n+1):o}function Wy(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Pa=new Set(["width","height","top","left","right","bottom",...Pn]),xa={test:t=>t==="auto",parse:t=>t},Bs=t=>e=>e.test(t),Js=[Ne,k,Ie,le,Cl,_l,xa],ni=t=>Js.find(Bs(t));function Na(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||el(t):!0}const Da=new Set(["brightness","contrast","saturate","opacity"]);function Fa(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Cn)||[];if(!i)return t;const o=n.replace(i,"");let s=Da.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+o+")"}const Ua=/\b([a-z-]*)\(.*?\)/gu,Zt={...We,getAnimatableNone:t=>{const e=t.match(Ua);return e?e.map(Fa).join(" "):t}},ii={...Ne,transform:Math.round},ka={rotate:le,rotateX:le,rotateY:le,rotateZ:le,scale:Qe,scaleX:Qe,scaleY:Qe,scaleZ:Qe,skew:le,skewX:le,skewY:le,distance:k,translateX:k,translateY:k,translateZ:k,x:k,y:k,z:k,perspective:k,transformPerspective:k,opacity:Be,originX:Jn,originY:Jn,originZ:k},La={borderWidth:k,borderTopWidth:k,borderRightWidth:k,borderBottomWidth:k,borderLeftWidth:k,borderRadius:k,radius:k,borderTopLeftRadius:k,borderTopRightRadius:k,borderBottomRightRadius:k,borderBottomLeftRadius:k,width:k,maxWidth:k,height:k,maxHeight:k,top:k,right:k,bottom:k,left:k,padding:k,paddingTop:k,paddingRight:k,paddingBottom:k,paddingLeft:k,margin:k,marginTop:k,marginRight:k,marginBottom:k,marginLeft:k,backgroundPositionX:k,backgroundPositionY:k,...ka,zIndex:ii,fillOpacity:Be,strokeOpacity:Be,numOctaves:ii},ba={...La,color:B,backgroundColor:B,outlineColor:B,fill:B,stroke:B,borderColor:B,borderTopColor:B,borderRightColor:B,borderBottomColor:B,borderLeftColor:B,filter:Zt,WebkitFilter:Zt},Va=t=>ba[t];function Ga(t,e){let n=Va(t);return n!==Zt&&(n=We),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const qa=new Set(["auto","none","0"]);function Ha(t,e,n){let i=0,o;for(;i<t.length&&!o;){const s=t[i];typeof s=="string"&&!qa.has(s)&&Je(s).values.length&&(o=t[i]),i++}if(o&&n)for(const s of e)t[s]=Ga(n,o)}class zy extends Ls{constructor(e,n,i,o,s){super(e,n,i,o,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),_n(d))){const f=Hs(d,n.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Pa.has(i)||e.length!==2)return;const[o,s]=e,l=ni(o),u=ni(s);if(l!==u)if(Zn(l)&&Zn(u))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else ge[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let o=0;o<e.length;o++)(e[o]===null||Na(e[o]))&&i.push(o);i.length&&Ha(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ge[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(i,o).jump(o,!1)}measureEndState(){var u;const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const s=i.length-1,l=i[s];i[s]=ge[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function $s(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const o=document.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}const Yy=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Ba(t){return as(t)&&"offsetHeight"in t}const oi=30,Ja=t=>!isNaN(parseFloat(t)),si={current:void 0};class $a{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var s;const o=ee.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ee.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ja(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new nl);const i=this.events[e].add(n);return e==="change"?()=>{i(),Me.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return si.current&&si.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=ee.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>oi)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,oi);return cs(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ky(t,e){return new $a(t,e)}const{schedule:Xy}=Es(queueMicrotask,!1),Z={x:!1,y:!1};function Os(){return Z.x||Z.y}function Qy(t){return t==="x"||t==="y"?Z[t]?null:(Z[t]=!0,()=>{Z[t]=!1}):Z.x||Z.y?null:(Z.x=Z.y=!0,()=>{Z.x=Z.y=!1})}function Ws(t,e){const n=$s(t),i=new AbortController,o={passive:!0,...e,signal:i.signal};return[n,o,()=>i.abort()]}function ri(t){return!(t.pointerType==="touch"||Os())}function Zy(t,e,n={}){const[i,o,s]=Ws(t,n),l=u=>{if(!ri(u))return;const{target:c}=u,d=e(c,u);if(typeof d!="function"||!c)return;const f=h=>{ri(h)&&(d(h),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,o)};return i.forEach(u=>{u.addEventListener("pointerenter",l,o)}),s}const zs=(t,e)=>e?t===e?!0:zs(t,e.parentElement):!1,Oa=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Wa=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function za(t){return Wa.has(t.tagName)||t.tabIndex!==-1}const ot=new WeakSet;function li(t){return e=>{e.key==="Enter"&&t(e)}}function Ut(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Ya=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=li(()=>{if(ot.has(n))return;Ut(n,"down");const o=li(()=>{Ut(n,"up")}),s=()=>Ut(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function ai(t){return Oa(t)&&!Os()}function jy(t,e,n={}){const[i,o,s]=Ws(t,n),l=u=>{const c=u.currentTarget;if(!ai(u))return;ot.add(c);const d=e(c,u),f=(m,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),ot.has(c)&&ot.delete(c),ai(m)&&typeof d=="function"&&d(m,{success:g})},h=m=>{f(m,c===window||c===document||n.useGlobalTarget||zs(c,m.target))},p=m=>{f(m,!1)};window.addEventListener("pointerup",h,o),window.addEventListener("pointercancel",p,o)};return i.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,o),Ba(u)&&(u.addEventListener("focus",d=>Ya(d,o)),!za(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),s}function Ys(t){return as(t)&&"ownerSVGElement"in t}const st=new WeakMap;let ae;const Ks=(t,e,n)=>(i,o)=>o&&o[0]?o[0][t+"Size"]:Ys(i)&&"getBBox"in i?i.getBBox()[e]:i[n],Ka=Ks("inline","width","offsetWidth"),Xa=Ks("block","height","offsetHeight");function Qa({target:t,borderBoxSize:e}){var n;(n=st.get(t))==null||n.forEach(i=>{i(t,{get width(){return Ka(t,e)},get height(){return Xa(t,e)}})})}function Za(t){t.forEach(Qa)}function ja(){typeof ResizeObserver>"u"||(ae=new ResizeObserver(Za))}function eu(t,e){ae||ja();const n=$s(t);return n.forEach(i=>{let o=st.get(i);o||(o=new Set,st.set(i,o)),o.add(e),ae==null||ae.observe(i)}),()=>{n.forEach(i=>{const o=st.get(i);o==null||o.delete(e),o!=null&&o.size||ae==null||ae.unobserve(i)})}}const rt=new Set;let Ce;function tu(){Ce=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};rt.forEach(e=>e(t))},window.addEventListener("resize",Ce)}function nu(t){return rt.add(t),Ce||tu(),()=>{rt.delete(t),!rt.size&&typeof Ce=="function"&&(window.removeEventListener("resize",Ce),Ce=void 0)}}function e0(t,e){return typeof t=="function"?nu(t):eu(t,e)}function t0(t,e){let n;const i=()=>{const{currentTime:o}=e,l=(o===null?0:o.value)/100;n!==l&&t(l),n=l};return Me.preUpdate(i,!0),()=>_s(i)}function n0(t){return Ys(t)&&t.tagName==="svg"}function i0(...t){const e=!Array.isArray(t[0]),n=e?0:-1,i=t[0+n],o=t[1+n],s=t[2+n],l=t[3+n],u=Ds(o,s,l);return e?u(i):u}const iu=t=>!!(t&&t.getVelocity);function o0(t,e,n){const i=t.get();let o=null,s=i,l;const u=typeof i=="string"?i.replace(/[\d.-]/g,""):void 0,c=()=>{o&&(o.stop(),o=null)},d=()=>{c(),o=new Mn({keyframes:[ci(t.get()),ci(s)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:l})};if(t.attach((f,h)=>{s=f,l=p=>h(ui(p,u)),Me.postRender(d)},c),iu(e)){const f=e.on("change",p=>t.set(ui(p,u))),h=t.on("destroy",f);return()=>{f(),h()}}return c}function ui(t,e){return e?t+e:t}function ci(t){return typeof t=="number"?t:parseFloat(t)}const ou=[...Js,B,We],s0=t=>ou.find(Bs(t));function qe(t){let e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function jt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function su(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function di(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function fi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function ru(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function lu(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function kt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function au(t,e){let n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+i*i+o*o)}function uu(t,e){let n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return n*n+i*i+o*o}function hi(t){let e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function cu(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function du(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function en(t,e){let n=e[0],i=e[1],o=e[2],s=n*n+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function Xs(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function pi(t,e,n){let i=e[0],o=e[1],s=e[2],l=n[0],u=n[1],c=n[2];return t[0]=o*c-s*u,t[1]=s*l-i*c,t[2]=i*u-o*l,t}function fu(t,e,n,i){let o=e[0],s=e[1],l=e[2];return t[0]=o+i*(n[0]-o),t[1]=s+i*(n[1]-s),t[2]=l+i*(n[2]-l),t}function hu(t,e,n,i,o){const s=Math.exp(-i*o);let l=e[0],u=e[1],c=e[2];return t[0]=n[0]+(l-n[0])*s,t[1]=n[1]+(u-n[1])*s,t[2]=n[2]+(c-n[2])*s,t}function pu(t,e,n){let i=e[0],o=e[1],s=e[2],l=n[3]*i+n[7]*o+n[11]*s+n[15];return l=l||1,t[0]=(n[0]*i+n[4]*o+n[8]*s+n[12])/l,t[1]=(n[1]*i+n[5]*o+n[9]*s+n[13])/l,t[2]=(n[2]*i+n[6]*o+n[10]*s+n[14])/l,t}function mu(t,e,n){let i=e[0],o=e[1],s=e[2],l=n[3]*i+n[7]*o+n[11]*s+n[15];return l=l||1,t[0]=(n[0]*i+n[4]*o+n[8]*s)/l,t[1]=(n[1]*i+n[5]*o+n[9]*s)/l,t[2]=(n[2]*i+n[6]*o+n[10]*s)/l,t}function gu(t,e,n){let i=e[0],o=e[1],s=e[2];return t[0]=i*n[0]+o*n[3]+s*n[6],t[1]=i*n[1]+o*n[4]+s*n[7],t[2]=i*n[2]+o*n[5]+s*n[8],t}function yu(t,e,n){let i=e[0],o=e[1],s=e[2],l=n[0],u=n[1],c=n[2],d=n[3],f=u*s-c*o,h=c*i-l*s,p=l*o-u*i,m=u*p-c*h,g=c*f-l*p,v=l*h-u*f,y=d*2;return f*=y,h*=y,p*=y,m*=2,g*=2,v*=2,t[0]=i+f+m,t[1]=o+h+g,t[2]=s+p+v,t}const vu=(function(){const t=[0,0,0],e=[0,0,0];return function(n,i){jt(t,n),jt(e,i),en(t,t),en(e,e);let o=Xs(t,e);return o>1?0:o<-1?Math.PI:Math.acos(o)}})();function Tu(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}class J extends Array{constructor(e=0,n=e,i=e){return super(e,n,i),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,n=e,i=e){return e.length?this.copy(e):(su(this,e,n,i),this)}copy(e){return jt(this,e),this}add(e,n){return n?di(this,e,n):di(this,this,e),this}sub(e,n){return n?fi(this,e,n):fi(this,this,e),this}multiply(e){return e.length?ru(this,this,e):kt(this,this,e),this}divide(e){return e.length?lu(this,this,e):kt(this,this,1/e),this}inverse(e=this){return du(this,e),this}len(){return qe(this)}distance(e){return e?au(this,e):qe(this)}squaredLen(){return hi(this)}squaredDistance(e){return e?uu(this,e):hi(this)}negate(e=this){return cu(this,e),this}cross(e,n){return n?pi(this,e,n):pi(this,this,e),this}scale(e){return kt(this,this,e),this}normalize(){return en(this,this),this}dot(e){return Xs(this,e)}equals(e){return Tu(this,e)}applyMatrix3(e){return gu(this,this,e),this}applyMatrix4(e){return pu(this,this,e),this}scaleRotateMatrix4(e){return mu(this,this,e),this}applyQuaternion(e){return yu(this,this,e),this}angle(e){return vu(this,e)}lerp(e,n){return fu(this,this,e,n),this}smoothLerp(e,n,i){return hu(this,this,e,n,i),this}clone(){return new J(this[0],this[1],this[2])}fromArray(e,n=0){return this[0]=e[n],this[1]=e[n+1],this[2]=e[n+2],this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}transformDirection(e){const n=this[0],i=this[1],o=this[2];return this[0]=e[0]*n+e[4]*i+e[8]*o,this[1]=e[1]*n+e[5]*i+e[9]*o,this[2]=e[2]*n+e[6]*i+e[10]*o,this.normalize()}}const mi=new J;let Eu=1,_u=1,gi=!1;class Cu{constructor(e,n={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=n,this.id=Eu++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let i in n)this.addAttribute(i,n[i])}addAttribute(e,n){if(this.attributes[e]=n,n.id=_u++,n.size=n.size||1,n.type=n.type||(n.data.constructor===Float32Array?this.gl.FLOAT:n.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),n.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,n.normalized=n.normalized||!1,n.stride=n.stride||0,n.offset=n.offset||0,n.count=n.count||(n.stride?n.data.byteLength/n.stride:n.data.length/n.size),n.divisor=n.instanced||0,n.needsUpdate=!1,n.usage=n.usage||this.gl.STATIC_DRAW,n.buffer||this.updateAttribute(n),n.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==n.count*n.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,n.count*n.divisor);this.instancedCount=n.count*n.divisor}else e==="index"?this.drawRange.count=n.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,n.count))}updateAttribute(e){const n=!e.buffer;n&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),n?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((n,{name:i,type:o})=>{if(!this.attributes[i]){console.warn(`active attribute ${i} not being supplied`);return}const s=this.attributes[i];this.gl.bindBuffer(s.target,s.buffer),this.glState.boundBuffer=s.buffer;let l=1;o===35674&&(l=2),o===35675&&(l=3),o===35676&&(l=4);const u=s.size/l,c=l===1?0:l*l*4,d=l===1?0:l*4;for(let f=0;f<l;f++)this.gl.vertexAttribPointer(n+f,u,s.type,s.normalized,s.stride+c,s.offset+f*d),this.gl.enableVertexAttribArray(n+f),this.gl.renderer.vertexAttribDivisor(n+f,s.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:n=this.gl.TRIANGLES}){var o;this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((s,{name:l})=>{const u=this.attributes[l];u.needsUpdate&&this.updateAttribute(u)});let i=2;((o=this.attributes.index)==null?void 0:o.type)===this.gl.UNSIGNED_INT&&(i=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i,this.instancedCount):this.gl.renderer.drawArraysInstanced(n,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i):this.gl.drawArrays(n,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!gi)return console.warn("No position buffer data found to compute bounds"),gi=!0}computeBoundingBox(e){e||(e=this.getPosition());const n=e.data,i=e.size;this.bounds||(this.bounds={min:new J,max:new J,center:new J,scale:new J,radius:1/0});const o=this.bounds.min,s=this.bounds.max,l=this.bounds.center,u=this.bounds.scale;o.set(1/0),s.set(-1/0);for(let c=0,d=n.length;c<d;c+=i){const f=n[c],h=n[c+1],p=n[c+2];o.x=Math.min(f,o.x),o.y=Math.min(h,o.y),o.z=Math.min(p,o.z),s.x=Math.max(f,s.x),s.y=Math.max(h,s.y),s.z=Math.max(p,s.z)}u.sub(s,o),l.add(o,s).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const n=e.data,i=e.size;this.bounds||this.computeBoundingBox(e);let o=0;for(let s=0,l=n.length;s<l;s+=i)mi.fromArray(n,s),o=Math.max(o,this.bounds.center.squaredDistance(mi));this.bounds.radius=Math.sqrt(o)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let Su=1;const yi={};class r0{constructor(e,{vertex:n,fragment:i,uniforms:o={},transparent:s=!1,cullFace:l=e.BACK,frontFace:u=e.CCW,depthTest:c=!0,depthWrite:d=!0,depthFunc:f=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=o,this.id=Su++,n||console.warn("vertex shader not supplied"),i||console.warn("fragment shader not supplied"),this.transparent=s,this.cullFace=l,this.frontFace=u,this.depthTest=c,this.depthWrite=d,this.depthFunc=f,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:n,fragment:i})}setShaders({vertex:e,fragment:n}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${vi(e)}`)),n&&(this.gl.shaderSource(this.fragmentShader,n),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${vi(n)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let i=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let l=0;l<i;l++){let u=this.gl.getActiveUniform(this.program,l);this.uniformLocations.set(u,this.gl.getUniformLocation(this.program,u.name));const c=u.name.match(/(\w+)/g);u.uniformName=c[0],u.nameComponents=c.slice(1)}this.attributeLocations=new Map;const o=[],s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let l=0;l<s;l++){const u=this.gl.getActiveAttrib(this.program,l),c=this.gl.getAttribLocation(this.program,u.name);c!==-1&&(o[c]=u.name,this.attributeLocations.set(u,c))}this.attributeOrder=o.join("")}setBlendFunc(e,n,i,o){this.blendFunc.src=e,this.blendFunc.dst=n,this.blendFunc.srcAlpha=i,this.blendFunc.dstAlpha=o,e&&(this.transparent=!0)}setBlendEquation(e,n){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=n}setStencilFunc(e,n,i){this.stencilRef=n,this.stencilFunc.func=e,this.stencilFunc.ref=n,this.stencilFunc.mask=i}setStencilOp(e,n,i){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=n,this.stencilOp.depthPass=i}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let n=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((o,s)=>{let l=this.uniforms[s.uniformName];for(const u of s.nameComponents){if(!l)break;if(u in l)l=l[u];else{if(Array.isArray(l.value))break;l=void 0;break}}if(!l)return Ti(`Active uniform ${s.name} has not been supplied`);if(l&&l.value===void 0)return Ti(`${s.name} uniform is missing a value parameter`);if(l.value.texture)return n=n+1,l.value.update(n),Lt(this.gl,s.type,o,n);if(l.value.length&&l.value[0].texture){const u=[];return l.value.forEach(c=>{n=n+1,c.update(n),u.push(n)}),Lt(this.gl,s.type,o,u)}Lt(this.gl,s.type,o,l.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function Lt(t,e,n,i){i=i.length?Au(i):i;const o=t.renderer.state.uniformLocations.get(n);if(i.length)if(o===void 0||o.length!==i.length)t.renderer.state.uniformLocations.set(n,i.slice(0));else{if(Iu(o,i))return;o.set?o.set(i):Ru(o,i),t.renderer.state.uniformLocations.set(n,o)}else{if(o===i)return;t.renderer.state.uniformLocations.set(n,i)}switch(e){case 5126:return i.length?t.uniform1fv(n,i):t.uniform1f(n,i);case 35664:return t.uniform2fv(n,i);case 35665:return t.uniform3fv(n,i);case 35666:return t.uniform4fv(n,i);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return i.length?t.uniform1iv(n,i):t.uniform1i(n,i);case 35671:case 35667:return t.uniform2iv(n,i);case 35672:case 35668:return t.uniform3iv(n,i);case 35673:case 35669:return t.uniform4iv(n,i);case 35674:return t.uniformMatrix2fv(n,!1,i);case 35675:return t.uniformMatrix3fv(n,!1,i);case 35676:return t.uniformMatrix4fv(n,!1,i)}}function vi(t){let e=t.split(`
`);for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join(`
`)}function Au(t){const e=t.length,n=t[0].length;if(n===void 0)return t;const i=e*n;let o=yi[i];o||(yi[i]=o=new Float32Array(i));for(let s=0;s<e;s++)o.set(t[s],s*n);return o}function Iu(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Ru(t,e){for(let n=0,i=t.length;n<i;n++)t[n]=e[n]}let bt=0;function Ti(t){bt>100||(console.warn(t),bt++,bt>100&&console.warn("More than 100 program warnings - stopping logs."))}const Vt=new J;let wu=1;class l0{constructor({canvas:e=document.createElement("canvas"),width:n=300,height:i=150,dpr:o=1,alpha:s=!1,depth:l=!0,stencil:u=!1,antialias:c=!1,premultipliedAlpha:d=!1,preserveDrawingBuffer:f=!1,powerPreference:h="default",autoClear:p=!0,webgl:m=2}={}){const g={alpha:s,depth:l,stencil:u,antialias:c,premultipliedAlpha:d,preserveDrawingBuffer:f,powerPreference:h};this.dpr=o,this.alpha=s,this.color=!0,this.depth=l,this.stencil=u,this.premultipliedAlpha=d,this.autoClear=p,this.id=wu++,m===2&&(this.gl=e.getContext("webgl2",g)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",g)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(n,i),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,n){this.width=e,this.height=n,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=n*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:n+"px"})}setViewport(e,n,i=0,o=0){this.state.viewport.width===e&&this.state.viewport.height===n||(this.state.viewport.width=e,this.state.viewport.height=n,this.state.viewport.x=i,this.state.viewport.y=o,this.gl.viewport(i,o,e,n))}setScissor(e,n,i=0,o=0){this.gl.scissor(i,o,e,n)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,n,i,o){this.state.blendFunc.src===e&&this.state.blendFunc.dst===n&&this.state.blendFunc.srcAlpha===i&&this.state.blendFunc.dstAlpha===o||(this.state.blendFunc.src=e,this.state.blendFunc.dst=n,this.state.blendFunc.srcAlpha=i,this.state.blendFunc.dstAlpha=o,i!==void 0?this.gl.blendFuncSeparate(e,n,i,o):this.gl.blendFunc(e,n))}setBlendEquation(e,n){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===n)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=n,n!==void 0?this.gl.blendEquationSeparate(e,n):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,n,i){this.state.stencilFunc===e&&this.state.stencilRef===n&&this.state.stencilFuncMask===i||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=n||0,this.state.stencilFuncMask=i||0,this.gl.stencilFunc(e||this.gl.ALWAYS,n||0,i||0))}setStencilOp(e,n,i){this.state.stencilFail===e&&this.state.stencilDepthFail===n&&this.state.stencilDepthPass===i||(this.state.stencilFail=e,this.state.stencilDepthFail=n,this.state.stencilDepthPass=i,this.gl.stencilOp(e,n,i))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:n=null}={}){this.state.framebuffer!==n&&(this.state.framebuffer=n,this.gl.bindFramebuffer(e,n))}getExtension(e,n,i){return n&&this.gl[n]?this.gl[n].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),n?this.extensions[e]?this.extensions[e][i].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,n){return e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.program.id!==n.program.id?e.program.id-n.program.id:e.zDepth!==n.zDepth?e.zDepth-n.zDepth:n.id-e.id}sortTransparent(e,n){return e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.zDepth!==n.zDepth?n.zDepth-e.zDepth:n.id-e.id}sortUI(e,n){return e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.program.id!==n.program.id?e.program.id-n.program.id:n.id-e.id}getRenderList({scene:e,camera:n,frustumCull:i,sort:o}){let s=[];if(n&&i&&n.updateFrustum(),e.traverse(l=>{if(!l.visible)return!0;l.draw&&(i&&l.frustumCulled&&n&&!n.frustumIntersectsMesh(l)||s.push(l))}),o){const l=[],u=[],c=[];s.forEach(d=>{d.program.transparent?d.program.depthTest?u.push(d):c.push(d):l.push(d),d.zDepth=0,!(d.renderOrder!==0||!d.program.depthTest||!n)&&(d.worldMatrix.getTranslation(Vt),Vt.applyMatrix4(n.projectionViewMatrix),d.zDepth=Vt.z)}),l.sort(this.sortOpaque),u.sort(this.sortTransparent),c.sort(this.sortUI),s=l.concat(u,c)}return s}render({scene:e,camera:n,target:i=null,update:o=!0,sort:s=!0,frustumCull:l=!0,clear:u}){i===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(i),this.setViewport(i.width,i.height)),(u||this.autoClear&&u!==!1)&&(this.depth&&(!i||i.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!i||i.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),o&&e.updateMatrixWorld(),n&&n.updateMatrixWorld(),this.getRenderList({scene:e,camera:n,frustumCull:l,sort:s}).forEach(d=>{d.draw({camera:n})})}}function Mu(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Pu(t,e,n,i,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t}function xu(t,e){let n=e[0],i=e[1],o=e[2],s=e[3],l=n*n+i*i+o*o+s*s;return l>0&&(l=1/Math.sqrt(l)),t[0]=n*l,t[1]=i*l,t[2]=o*l,t[3]=s*l,t}function Nu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Du(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Fu(t,e,n){n=n*.5;let i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function Ei(t,e,n){let i=e[0],o=e[1],s=e[2],l=e[3],u=n[0],c=n[1],d=n[2],f=n[3];return t[0]=i*f+l*u+o*d-s*c,t[1]=o*f+l*c+s*u-i*d,t[2]=s*f+l*d+i*c-o*u,t[3]=l*f-i*u-o*c-s*d,t}function Uu(t,e,n){n*=.5;let i=e[0],o=e[1],s=e[2],l=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=i*c+l*u,t[1]=o*c+s*u,t[2]=s*c-o*u,t[3]=l*c-i*u,t}function ku(t,e,n){n*=.5;let i=e[0],o=e[1],s=e[2],l=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=i*c-s*u,t[1]=o*c+l*u,t[2]=s*c+i*u,t[3]=l*c-o*u,t}function Lu(t,e,n){n*=.5;let i=e[0],o=e[1],s=e[2],l=e[3],u=Math.sin(n),c=Math.cos(n);return t[0]=i*c+o*u,t[1]=o*c-i*u,t[2]=s*c+l*u,t[3]=l*c-s*u,t}function bu(t,e,n,i){let o=e[0],s=e[1],l=e[2],u=e[3],c=n[0],d=n[1],f=n[2],h=n[3],p,m,g,v,y;return m=o*c+s*d+l*f+u*h,m<0&&(m=-m,c=-c,d=-d,f=-f,h=-h),1-m>1e-6?(p=Math.acos(m),g=Math.sin(p),v=Math.sin((1-i)*p)/g,y=Math.sin(i*p)/g):(v=1-i,y=i),t[0]=v*o+y*c,t[1]=v*s+y*d,t[2]=v*l+y*f,t[3]=v*u+y*h,t}function Vu(t,e){let n=e[0],i=e[1],o=e[2],s=e[3],l=n*n+i*i+o*o+s*s,u=l?1/l:0;return t[0]=-n*u,t[1]=-i*u,t[2]=-o*u,t[3]=s*u,t}function Gu(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function qu(t,e){let n=e[0]+e[4]+e[8],i;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{let o=0;e[4]>e[0]&&(o=1),e[8]>e[o*3+o]&&(o=2);let s=(o+1)%3,l=(o+2)%3;i=Math.sqrt(e[o*3+o]-e[s*3+s]-e[l*3+l]+1),t[o]=.5*i,i=.5/i,t[3]=(e[s*3+l]-e[l*3+s])*i,t[s]=(e[s*3+o]+e[o*3+s])*i,t[l]=(e[l*3+o]+e[o*3+l])*i}return t}function Hu(t,e,n="YXZ"){let i=Math.sin(e[0]*.5),o=Math.cos(e[0]*.5),s=Math.sin(e[1]*.5),l=Math.cos(e[1]*.5),u=Math.sin(e[2]*.5),c=Math.cos(e[2]*.5);return n==="XYZ"?(t[0]=i*l*c+o*s*u,t[1]=o*s*c-i*l*u,t[2]=o*l*u+i*s*c,t[3]=o*l*c-i*s*u):n==="YXZ"?(t[0]=i*l*c+o*s*u,t[1]=o*s*c-i*l*u,t[2]=o*l*u-i*s*c,t[3]=o*l*c+i*s*u):n==="ZXY"?(t[0]=i*l*c-o*s*u,t[1]=o*s*c+i*l*u,t[2]=o*l*u+i*s*c,t[3]=o*l*c-i*s*u):n==="ZYX"?(t[0]=i*l*c-o*s*u,t[1]=o*s*c+i*l*u,t[2]=o*l*u-i*s*c,t[3]=o*l*c+i*s*u):n==="YZX"?(t[0]=i*l*c+o*s*u,t[1]=o*s*c+i*l*u,t[2]=o*l*u-i*s*c,t[3]=o*l*c-i*s*u):n==="XZY"&&(t[0]=i*l*c-o*s*u,t[1]=o*s*c-i*l*u,t[2]=o*l*u+i*s*c,t[3]=o*l*c+i*s*u),t}const Bu=Mu,Ju=Pu,$u=Nu,Ou=xu;class Wu extends Array{constructor(e=0,n=0,i=0,o=1){super(e,n,i,o),this.onChange=()=>{},this._target=this;const s=["0","1","2","3"];return new Proxy(this,{set(l,u){const c=Reflect.set(...arguments);return c&&s.includes(u)&&l.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return Du(this._target),this.onChange(),this}set(e,n,i,o){return e.length?this.copy(e):(Ju(this._target,e,n,i,o),this.onChange(),this)}rotateX(e){return Uu(this._target,this._target,e),this.onChange(),this}rotateY(e){return ku(this._target,this._target,e),this.onChange(),this}rotateZ(e){return Lu(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return Vu(this._target,e),this.onChange(),this}conjugate(e=this._target){return Gu(this._target,e),this.onChange(),this}copy(e){return Bu(this._target,e),this.onChange(),this}normalize(e=this._target){return Ou(this._target,e),this.onChange(),this}multiply(e,n){return n?Ei(this._target,e,n):Ei(this._target,this._target,e),this.onChange(),this}dot(e){return $u(this._target,e)}fromMatrix3(e){return qu(this._target,e),this.onChange(),this}fromEuler(e,n){return Hu(this._target,e,e.order),n||this.onChange(),this}fromAxisAngle(e,n){return Fu(this._target,e,n),this.onChange(),this}slerp(e,n){return bu(this._target,this._target,e,n),this.onChange(),this}fromArray(e,n=0){return this._target[0]=e[n],this._target[1]=e[n+1],this._target[2]=e[n+2],this._target[3]=e[n+3],this.onChange(),this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e}}const zu=1e-6;function Yu(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ku(t,e,n,i,o,s,l,u,c,d,f,h,p,m,g,v,y){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=d,t[9]=f,t[10]=h,t[11]=p,t[12]=m,t[13]=g,t[14]=v,t[15]=y,t}function Xu(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Qu(t,e){let n=e[0],i=e[1],o=e[2],s=e[3],l=e[4],u=e[5],c=e[6],d=e[7],f=e[8],h=e[9],p=e[10],m=e[11],g=e[12],v=e[13],y=e[14],T=e[15],A=n*u-i*l,E=n*c-o*l,_=n*d-s*l,C=i*c-o*u,S=i*d-s*u,I=o*d-s*c,w=f*v-h*g,R=f*y-p*g,x=f*T-m*g,F=h*y-p*v,V=h*T-m*v,U=p*T-m*y,N=A*U-E*V+_*F+C*x-S*R+I*w;return N?(N=1/N,t[0]=(u*U-c*V+d*F)*N,t[1]=(o*V-i*U-s*F)*N,t[2]=(v*I-y*S+T*C)*N,t[3]=(p*S-h*I-m*C)*N,t[4]=(c*x-l*U-d*R)*N,t[5]=(n*U-o*x+s*R)*N,t[6]=(y*_-g*I-T*E)*N,t[7]=(f*I-p*_+m*E)*N,t[8]=(l*V-u*x+d*w)*N,t[9]=(i*x-n*V-s*w)*N,t[10]=(g*S-v*_+T*A)*N,t[11]=(h*_-f*S-m*A)*N,t[12]=(u*R-l*F-c*w)*N,t[13]=(n*F-i*R+o*w)*N,t[14]=(v*E-g*C-y*A)*N,t[15]=(f*C-h*E+p*A)*N,t):null}function Qs(t){let e=t[0],n=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],h=t[10],p=t[11],m=t[12],g=t[13],v=t[14],y=t[15],T=e*l-n*s,A=e*u-i*s,E=e*c-o*s,_=n*u-i*l,C=n*c-o*l,S=i*c-o*u,I=d*g-f*m,w=d*v-h*m,R=d*y-p*m,x=f*v-h*g,F=f*y-p*g,V=h*y-p*v;return T*V-A*F+E*x+_*R-C*w+S*I}function _i(t,e,n){let i=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],d=e[6],f=e[7],h=e[8],p=e[9],m=e[10],g=e[11],v=e[12],y=e[13],T=e[14],A=e[15],E=n[0],_=n[1],C=n[2],S=n[3];return t[0]=E*i+_*u+C*h+S*v,t[1]=E*o+_*c+C*p+S*y,t[2]=E*s+_*d+C*m+S*T,t[3]=E*l+_*f+C*g+S*A,E=n[4],_=n[5],C=n[6],S=n[7],t[4]=E*i+_*u+C*h+S*v,t[5]=E*o+_*c+C*p+S*y,t[6]=E*s+_*d+C*m+S*T,t[7]=E*l+_*f+C*g+S*A,E=n[8],_=n[9],C=n[10],S=n[11],t[8]=E*i+_*u+C*h+S*v,t[9]=E*o+_*c+C*p+S*y,t[10]=E*s+_*d+C*m+S*T,t[11]=E*l+_*f+C*g+S*A,E=n[12],_=n[13],C=n[14],S=n[15],t[12]=E*i+_*u+C*h+S*v,t[13]=E*o+_*c+C*p+S*y,t[14]=E*s+_*d+C*m+S*T,t[15]=E*l+_*f+C*g+S*A,t}function Zu(t,e,n){let i=n[0],o=n[1],s=n[2],l,u,c,d,f,h,p,m,g,v,y,T;return e===t?(t[12]=e[0]*i+e[4]*o+e[8]*s+e[12],t[13]=e[1]*i+e[5]*o+e[9]*s+e[13],t[14]=e[2]*i+e[6]*o+e[10]*s+e[14],t[15]=e[3]*i+e[7]*o+e[11]*s+e[15]):(l=e[0],u=e[1],c=e[2],d=e[3],f=e[4],h=e[5],p=e[6],m=e[7],g=e[8],v=e[9],y=e[10],T=e[11],t[0]=l,t[1]=u,t[2]=c,t[3]=d,t[4]=f,t[5]=h,t[6]=p,t[7]=m,t[8]=g,t[9]=v,t[10]=y,t[11]=T,t[12]=l*i+f*o+g*s+e[12],t[13]=u*i+h*o+v*s+e[13],t[14]=c*i+p*o+y*s+e[14],t[15]=d*i+m*o+T*s+e[15]),t}function ju(t,e,n){let i=n[0],o=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ec(t,e,n,i){let o=i[0],s=i[1],l=i[2],u=Math.hypot(o,s,l),c,d,f,h,p,m,g,v,y,T,A,E,_,C,S,I,w,R,x,F,V,U,N,K;return Math.abs(u)<zu?null:(u=1/u,o*=u,s*=u,l*=u,c=Math.sin(n),d=Math.cos(n),f=1-d,h=e[0],p=e[1],m=e[2],g=e[3],v=e[4],y=e[5],T=e[6],A=e[7],E=e[8],_=e[9],C=e[10],S=e[11],I=o*o*f+d,w=s*o*f+l*c,R=l*o*f-s*c,x=o*s*f-l*c,F=s*s*f+d,V=l*s*f+o*c,U=o*l*f+s*c,N=s*l*f-o*c,K=l*l*f+d,t[0]=h*I+v*w+E*R,t[1]=p*I+y*w+_*R,t[2]=m*I+T*w+C*R,t[3]=g*I+A*w+S*R,t[4]=h*x+v*F+E*V,t[5]=p*x+y*F+_*V,t[6]=m*x+T*F+C*V,t[7]=g*x+A*F+S*V,t[8]=h*U+v*N+E*K,t[9]=p*U+y*N+_*K,t[10]=m*U+T*N+C*K,t[11]=g*U+A*N+S*K,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function tc(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Zs(t,e){let n=e[0],i=e[1],o=e[2],s=e[4],l=e[5],u=e[6],c=e[8],d=e[9],f=e[10];return t[0]=Math.hypot(n,i,o),t[1]=Math.hypot(s,l,u),t[2]=Math.hypot(c,d,f),t}function nc(t){let e=t[0],n=t[1],i=t[2],o=t[4],s=t[5],l=t[6],u=t[8],c=t[9],d=t[10];const f=e*e+n*n+i*i,h=o*o+s*s+l*l,p=u*u+c*c+d*d;return Math.sqrt(Math.max(f,h,p))}const js=(function(){const t=[1,1,1];return function(e,n){let i=t;Zs(i,n);let o=1/i[0],s=1/i[1],l=1/i[2],u=n[0]*o,c=n[1]*s,d=n[2]*l,f=n[4]*o,h=n[5]*s,p=n[6]*l,m=n[8]*o,g=n[9]*s,v=n[10]*l,y=u+h+v,T=0;return y>0?(T=Math.sqrt(y+1)*2,e[3]=.25*T,e[0]=(p-g)/T,e[1]=(m-d)/T,e[2]=(c-f)/T):u>h&&u>v?(T=Math.sqrt(1+u-h-v)*2,e[3]=(p-g)/T,e[0]=.25*T,e[1]=(c+f)/T,e[2]=(m+d)/T):h>v?(T=Math.sqrt(1+h-u-v)*2,e[3]=(m-d)/T,e[0]=(c+f)/T,e[1]=.25*T,e[2]=(p+g)/T):(T=Math.sqrt(1+v-u-h)*2,e[3]=(c-f)/T,e[0]=(m+d)/T,e[1]=(p+g)/T,e[2]=.25*T),e}})();function ic(t,e,n,i){let o=qe([t[0],t[1],t[2]]);const s=qe([t[4],t[5],t[6]]),l=qe([t[8],t[9],t[10]]);Qs(t)<0&&(o=-o),n[0]=t[12],n[1]=t[13],n[2]=t[14];const c=t.slice(),d=1/o,f=1/s,h=1/l;c[0]*=d,c[1]*=d,c[2]*=d,c[4]*=f,c[5]*=f,c[6]*=f,c[8]*=h,c[9]*=h,c[10]*=h,js(e,c),i[0]=o,i[1]=s,i[2]=l}function oc(t,e,n,i){const o=t,s=e[0],l=e[1],u=e[2],c=e[3],d=s+s,f=l+l,h=u+u,p=s*d,m=s*f,g=s*h,v=l*f,y=l*h,T=u*h,A=c*d,E=c*f,_=c*h,C=i[0],S=i[1],I=i[2];return o[0]=(1-(v+T))*C,o[1]=(m+_)*C,o[2]=(g-E)*C,o[3]=0,o[4]=(m-_)*S,o[5]=(1-(p+T))*S,o[6]=(y+A)*S,o[7]=0,o[8]=(g+E)*I,o[9]=(y-A)*I,o[10]=(1-(p+v))*I,o[11]=0,o[12]=n[0],o[13]=n[1],o[14]=n[2],o[15]=1,o}function sc(t,e){let n=e[0],i=e[1],o=e[2],s=e[3],l=n+n,u=i+i,c=o+o,d=n*l,f=i*l,h=i*u,p=o*l,m=o*u,g=o*c,v=s*l,y=s*u,T=s*c;return t[0]=1-h-g,t[1]=f+T,t[2]=p-y,t[3]=0,t[4]=f-T,t[5]=1-d-g,t[6]=m+v,t[7]=0,t[8]=p+y,t[9]=m-v,t[10]=1-d-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rc(t,e,n,i,o){let s=1/Math.tan(e/2),l=1/(i-o);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+i)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*i*l,t[15]=0,t}function lc(t,e,n,i,o,s,l){let u=1/(e-n),c=1/(i-o),d=1/(s-l);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*d,t[11]=0,t[12]=(e+n)*u,t[13]=(o+i)*c,t[14]=(l+s)*d,t[15]=1,t}function ac(t,e,n,i){let o=e[0],s=e[1],l=e[2],u=i[0],c=i[1],d=i[2],f=o-n[0],h=s-n[1],p=l-n[2],m=f*f+h*h+p*p;m===0?p=1:(m=1/Math.sqrt(m),f*=m,h*=m,p*=m);let g=c*p-d*h,v=d*f-u*p,y=u*h-c*f;return m=g*g+v*v+y*y,m===0&&(d?u+=1e-6:c?d+=1e-6:c+=1e-6,g=c*p-d*h,v=d*f-u*p,y=u*h-c*f,m=g*g+v*v+y*y),m=1/Math.sqrt(m),g*=m,v*=m,y*=m,t[0]=g,t[1]=v,t[2]=y,t[3]=0,t[4]=h*y-p*v,t[5]=p*g-f*y,t[6]=f*v-h*g,t[7]=0,t[8]=f,t[9]=h,t[10]=p,t[11]=0,t[12]=o,t[13]=s,t[14]=l,t[15]=1,t}function Ci(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Si(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function uc(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}class ce extends Array{constructor(e=1,n=0,i=0,o=0,s=0,l=1,u=0,c=0,d=0,f=0,h=1,p=0,m=0,g=0,v=0,y=1){return super(e,n,i,o,s,l,u,c,d,f,h,p,m,g,v,y),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,n,i,o,s,l,u,c,d,f,h,p,m,g,v,y){return e.length?this.copy(e):(Ku(this,e,n,i,o,s,l,u,c,d,f,h,p,m,g,v,y),this)}translate(e,n=this){return Zu(this,n,e),this}rotate(e,n,i=this){return ec(this,i,e,n),this}scale(e,n=this){return ju(this,n,typeof e=="number"?[e,e,e]:e),this}add(e,n){return n?Ci(this,e,n):Ci(this,this,e),this}sub(e,n){return n?Si(this,e,n):Si(this,this,e),this}multiply(e,n){return e.length?n?_i(this,e,n):_i(this,this,e):uc(this,this,e),this}identity(){return Xu(this),this}copy(e){return Yu(this,e),this}fromPerspective({fov:e,aspect:n,near:i,far:o}={}){return rc(this,e,n,i,o),this}fromOrthogonal({left:e,right:n,bottom:i,top:o,near:s,far:l}){return lc(this,e,n,i,o,s,l),this}fromQuaternion(e){return sc(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return Qu(this,e),this}compose(e,n,i){return oc(this,e,n,i),this}decompose(e,n,i){return ic(this,e,n,i),this}getRotation(e){return js(e,this),this}getTranslation(e){return tc(e,this),this}getScaling(e){return Zs(e,this),this}getMaxScaleOnAxis(){return nc(this)}lookAt(e,n,i){return ac(this,e,n,i),this}determinant(){return Qs(this)}fromArray(e,n=0){return this[0]=e[n],this[1]=e[n+1],this[2]=e[n+2],this[3]=e[n+3],this[4]=e[n+4],this[5]=e[n+5],this[6]=e[n+6],this[7]=e[n+7],this[8]=e[n+8],this[9]=e[n+9],this[10]=e[n+10],this[11]=e[n+11],this[12]=e[n+12],this[13]=e[n+13],this[14]=e[n+14],this[15]=e[n+15],this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e[n+4]=this[4],e[n+5]=this[5],e[n+6]=this[6],e[n+7]=this[7],e[n+8]=this[8],e[n+9]=this[9],e[n+10]=this[10],e[n+11]=this[11],e[n+12]=this[12],e[n+13]=this[13],e[n+14]=this[14],e[n+15]=this[15],e}}function cc(t,e,n="YXZ"){return n==="XYZ"?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):n==="YXZ"?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):n==="ZXY"?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):n==="ZYX"?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):n==="YZX"?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):n==="XZY"&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0)),t}const Ai=new ce;class dc extends Array{constructor(e=0,n=e,i=e,o="YXZ"){super(e,n,i),this.order=o,this.onChange=()=>{},this._target=this;const s=["0","1","2"];return new Proxy(this,{set(l,u){const c=Reflect.set(...arguments);return c&&s.includes(u)&&l.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,n=e,i=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=n,this._target[2]=i,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,n=this.order){return cc(this._target,e,n),this.onChange(),this}fromQuaternion(e,n=this.order,i){return Ai.fromQuaternion(e),this._target.fromRotationMatrix(Ai,n),i||this.onChange(),this}fromArray(e,n=0){return this._target[0]=e[n],this._target[1]=e[n+1],this._target[2]=e[n+2],this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}}class er{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new ce,this.worldMatrix=new ce,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new J,this.quaternion=new Wu,this.scale=new J(1),this.rotation=new dc,this.up=new J(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,n=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,n&&e&&e.addChild(this,!1)}addChild(e,n=!0){~this.children.indexOf(e)||this.children.push(e),n&&e.setParent(this,!1)}removeChild(e,n=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),n&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let n=0,i=this.children.length;n<i;n++)this.children[n].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let n=0,i=this.children.length;n<i;n++)this.children[n].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,n=!1){n?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}const fc=new ce,hc=new J,pc=new J;class a0 extends er{constructor(e,{near:n=.1,far:i=100,fov:o=45,aspect:s=1,left:l,right:u,bottom:c,top:d,zoom:f=1}={}){super(),Object.assign(this,{near:n,far:i,fov:o,aspect:s,left:l,right:u,bottom:c,top:d,zoom:f}),this.projectionMatrix=new ce,this.viewMatrix=new ce,this.projectionViewMatrix=new ce,this.worldPosition=new J,this.type=l||u?"orthographic":"perspective",this.type==="orthographic"?this.orthographic():this.perspective()}perspective({near:e=this.near,far:n=this.far,fov:i=this.fov,aspect:o=this.aspect}={}){return Object.assign(this,{near:e,far:n,fov:i,aspect:o}),this.projectionMatrix.fromPerspective({fov:i*(Math.PI/180),aspect:o,near:e,far:n}),this.type="perspective",this}orthographic({near:e=this.near,far:n=this.far,left:i=this.left||-1,right:o=this.right||1,bottom:s=this.bottom||-1,top:l=this.top||1,zoom:u=this.zoom}={}){return Object.assign(this,{near:e,far:n,left:i,right:o,bottom:s,top:l,zoom:u}),i/=u,o/=u,s/=u,l/=u,this.projectionMatrix.fromOrthogonal({left:i,right:o,bottom:s,top:l,near:e,far:n}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}updateProjectionMatrix(){return this.type==="perspective"?this.perspective():this.orthographic()}lookAt(e){return super.lookAt(e,!0),this}project(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}unproject(e){return e.applyMatrix4(fc.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new J,new J,new J,new J,new J,new J]);const e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(let n=0;n<6;n++){const i=1/this.frustum[n].distance();this.frustum[n].multiply(i),this.frustum[n].constant*=i}}frustumIntersectsMesh(e,n=e.worldMatrix){if(!e.geometry.attributes.position||((!e.geometry.bounds||e.geometry.bounds.radius===1/0)&&e.geometry.computeBoundingSphere(),!e.geometry.bounds))return!0;const i=hc;i.copy(e.geometry.bounds.center),i.applyMatrix4(n);const o=e.geometry.bounds.radius*n.getMaxScaleOnAxis();return this.frustumIntersectsSphere(i,o)}frustumIntersectsSphere(e,n){const i=pc;for(let o=0;o<6;o++){const s=this.frustum[o];if(i.copy(s).dot(e)+s.constant<-n)return!1}return!0}}function mc(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function gc(t,e){let n=e[0],i=e[1],o=e[2],s=e[3],l=n+n,u=i+i,c=o+o,d=n*l,f=i*l,h=i*u,p=o*l,m=o*u,g=o*c,v=s*l,y=s*u,T=s*c;return t[0]=1-h-g,t[3]=f-T,t[6]=p+y,t[1]=f+T,t[4]=1-d-g,t[7]=m-v,t[2]=p-y,t[5]=m+v,t[8]=1-d-h,t}function yc(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function vc(t,e,n,i,o,s,l,u,c,d){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=d,t}function Tc(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ec(t,e){let n=e[0],i=e[1],o=e[2],s=e[3],l=e[4],u=e[5],c=e[6],d=e[7],f=e[8],h=f*l-u*d,p=-f*s+u*c,m=d*s-l*c,g=n*h+i*p+o*m;return g?(g=1/g,t[0]=h*g,t[1]=(-f*i+o*d)*g,t[2]=(u*i-o*l)*g,t[3]=p*g,t[4]=(f*n-o*c)*g,t[5]=(-u*n+o*s)*g,t[6]=m*g,t[7]=(-d*n+i*c)*g,t[8]=(l*n-i*s)*g,t):null}function Ii(t,e,n){let i=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],d=e[6],f=e[7],h=e[8],p=n[0],m=n[1],g=n[2],v=n[3],y=n[4],T=n[5],A=n[6],E=n[7],_=n[8];return t[0]=p*i+m*l+g*d,t[1]=p*o+m*u+g*f,t[2]=p*s+m*c+g*h,t[3]=v*i+y*l+T*d,t[4]=v*o+y*u+T*f,t[5]=v*s+y*c+T*h,t[6]=A*i+E*l+_*d,t[7]=A*o+E*u+_*f,t[8]=A*s+E*c+_*h,t}function _c(t,e,n){let i=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],d=e[6],f=e[7],h=e[8],p=n[0],m=n[1];return t[0]=i,t[1]=o,t[2]=s,t[3]=l,t[4]=u,t[5]=c,t[6]=p*i+m*l+d,t[7]=p*o+m*u+f,t[8]=p*s+m*c+h,t}function Cc(t,e,n){let i=e[0],o=e[1],s=e[2],l=e[3],u=e[4],c=e[5],d=e[6],f=e[7],h=e[8],p=Math.sin(n),m=Math.cos(n);return t[0]=m*i+p*l,t[1]=m*o+p*u,t[2]=m*s+p*c,t[3]=m*l-p*i,t[4]=m*u-p*o,t[5]=m*c-p*s,t[6]=d,t[7]=f,t[8]=h,t}function Sc(t,e,n){let i=n[0],o=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ac(t,e){let n=e[0],i=e[1],o=e[2],s=e[3],l=e[4],u=e[5],c=e[6],d=e[7],f=e[8],h=e[9],p=e[10],m=e[11],g=e[12],v=e[13],y=e[14],T=e[15],A=n*u-i*l,E=n*c-o*l,_=n*d-s*l,C=i*c-o*u,S=i*d-s*u,I=o*d-s*c,w=f*v-h*g,R=f*y-p*g,x=f*T-m*g,F=h*y-p*v,V=h*T-m*v,U=p*T-m*y,N=A*U-E*V+_*F+C*x-S*R+I*w;return N?(N=1/N,t[0]=(u*U-c*V+d*F)*N,t[1]=(c*x-l*U-d*R)*N,t[2]=(l*V-u*x+d*w)*N,t[3]=(o*V-i*U-s*F)*N,t[4]=(n*U-o*x+s*R)*N,t[5]=(i*x-n*V-s*w)*N,t[6]=(v*I-y*S+T*C)*N,t[7]=(y*_-g*I-T*E)*N,t[8]=(g*S-v*_+T*A)*N,t):null}class Ic extends Array{constructor(e=1,n=0,i=0,o=0,s=1,l=0,u=0,c=0,d=1){return super(e,n,i,o,s,l,u,c,d),this}set(e,n,i,o,s,l,u,c,d){return e.length?this.copy(e):(vc(this,e,n,i,o,s,l,u,c,d),this)}translate(e,n=this){return _c(this,n,e),this}rotate(e,n=this){return Cc(this,n,e),this}scale(e,n=this){return Sc(this,n,e),this}multiply(e,n){return n?Ii(this,e,n):Ii(this,this,e),this}identity(){return Tc(this),this}copy(e){return yc(this,e),this}fromMatrix4(e){return mc(this,e),this}fromQuaternion(e){return gc(this,e),this}fromBasis(e,n,i){return this.set(e[0],e[1],e[2],n[0],n[1],n[2],i[0],i[1],i[2]),this}inverse(e=this){return Ec(this,e),this}getNormalMatrix(e){return Ac(this,e),this}}let Rc=0;class u0 extends er{constructor(e,{geometry:n,program:i,mode:o=e.TRIANGLES,frustumCulled:s=!0,renderOrder:l=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=Rc++,this.geometry=n,this.program=i,this.mode=o,this.frustumCulled=s,this.renderOrder=l,this.modelViewMatrix=new ce,this.normalMatrix=new Ic,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}));let n=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:n}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}))}}const Ri=new Uint8Array(4);function wi(t){return(t&t-1)===0}let wc=1;class c0{constructor(e,{image:n,target:i=e.TEXTURE_2D,type:o=e.UNSIGNED_BYTE,format:s=e.RGBA,internalFormat:l=s,wrapS:u=e.CLAMP_TO_EDGE,wrapT:c=e.CLAMP_TO_EDGE,wrapR:d=e.CLAMP_TO_EDGE,generateMipmaps:f=i===(e.TEXTURE_2D||e.TEXTURE_CUBE_MAP),minFilter:h=f?e.NEAREST_MIPMAP_LINEAR:e.LINEAR,magFilter:p=e.LINEAR,premultiplyAlpha:m=!1,unpackAlignment:g=4,flipY:v=i==(e.TEXTURE_2D||e.TEXTURE_3D),anisotropy:y=0,level:T=0,width:A,height:E=A,length:_=1}={}){this.gl=e,this.id=wc++,this.image=n,this.target=i,this.type=o,this.format=s,this.internalFormat=l,this.minFilter=h,this.magFilter=p,this.wrapS=u,this.wrapT=c,this.wrapR=d,this.generateMipmaps=f,this.premultiplyAlpha=m,this.unpackAlignment=g,this.flipY=v,this.anisotropy=Math.min(y,this.gl.renderer.parameters.maxAnisotropy),this.level=T,this.width=A,this.height=E,this.length=_,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(e=0){const n=!(this.image===this.store.image&&!this.needsUpdate);if((n||this.glState.textureUnits[e]!==this.id)&&(this.gl.renderer.activeTexture(e),this.bind()),!!n){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.wrapR!==this.state.wrapR&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_R,this.wrapR),this.state.wrapR=this.wrapR),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let i=0;i<6;i++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,this.level,this.internalFormat,this.format,this.type,this.image[i]);else if(ArrayBuffer.isView(this.image))this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image):(this.target===this.gl.TEXTURE_2D_ARRAY||this.target===this.gl.TEXTURE_3D)&&this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(let i=0;i<this.image.length;i++)this.gl.compressedTexImage2D(this.target,i,this.internalFormat,this.image[i].width,this.image[i].height,0,this.image[i].data);else this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);this.generateMipmaps&&(!this.gl.renderer.isWebgl2&&(!wi(this.image.width)||!wi(this.image.height))?(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR):this.gl.generateMipmap(this.target)),this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let i=0;i<6;i++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,Ri);else this.width?this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,Ri);this.store.image=this.image}}}class tr extends Cu{constructor(e,{width:n=1,height:i=1,widthSegments:o=1,heightSegments:s=1,attributes:l={}}={}){const u=o,c=s,d=(u+1)*(c+1),f=u*c*6,h=new Float32Array(d*3),p=new Float32Array(d*3),m=new Float32Array(d*2),g=f>65536?new Uint32Array(f):new Uint16Array(f);tr.buildPlane(h,p,m,g,n,i,0,u,c),Object.assign(l,{position:{size:3,data:h},normal:{size:3,data:p},uv:{size:2,data:m},index:{data:g}}),super(e,l)}static buildPlane(e,n,i,o,s,l,u,c,d,f=0,h=1,p=2,m=1,g=-1,v=0,y=0){const T=v,A=s/c,E=l/d;for(let _=0;_<=d;_++){let C=_*E-l/2;for(let S=0;S<=c;S++,v++){let I=S*A-s/2;if(e[v*3+f]=I*m,e[v*3+h]=C*g,e[v*3+p]=u/2,n[v*3+f]=0,n[v*3+h]=0,n[v*3+p]=u>=0?1:-1,i[v*2]=S/c,i[v*2+1]=1-_/d,_===d||S===c)continue;let w=T+S+_*(c+1),R=T+S+(_+1)*(c+1),x=T+S+(_+1)*(c+1)+1,F=T+S+_*(c+1)+1;o[y*6]=w,o[y*6+1]=R,o[y*6+2]=F,o[y*6+3]=R,o[y*6+4]=x,o[y*6+5]=F,y++}}}}var Mc={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Pc,xc;function Nc(){return{geminiUrl:Pc,vertexUrl:xc}}function Dc(t,e,n,i){var o,s;if(!(t!=null&&t.baseUrl)){const l=Nc();return e?(o=l.vertexUrl)!==null&&o!==void 0?o:n:(s=l.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class se{}function P(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const s=e[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function a(t,e,n){for(let s=0;s<e.length-1;s++){const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];a(f,e.slice(s+1),n[d])}else for(const d of c)a(d,e.slice(s+1),n)}return}else if(l.endsWith("[0]")){const u=l.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];a(c[0],e.slice(s+1),n);return}(!t[l]||typeof t[l]!="object")&&(t[l]={}),t=t[l]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function r(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const o=e[i];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in t){const l=t[s];return Array.isArray(l)?l.map(u=>r(u,e.slice(i+1),n)):n}else return n}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function Fc(t,e){for(const[n,i]of Object.entries(e)){const o=n.split("."),s=i.split("."),l=new Set;let u=-1;for(let c=0;c<o.length;c++)if(o[c]==="*"){u=c;break}if(u!==-1&&s.length>u)for(let c=u;c<s.length;c++){const d=s[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&l.add(d)}tn(t,o,s,0,l)}}function tn(t,e,n,i,o){if(i>=e.length||typeof t!="object"||t===null)return;const s=e[i];if(s.endsWith("[]")){const l=s.slice(0,-2),u=t;if(l in u&&Array.isArray(u[l]))for(const c of u[l])tn(c,e,n,i+1,o)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const l=t,u=Object.keys(l).filter(d=>!d.startsWith("_")&&!o.has(d)),c={};for(const d of u)c[d]=l[d];for(const[d,f]of Object.entries(c)){const h=[];for(const p of n.slice(i))p==="*"?h.push(d):h.push(p);a(l,h,f)}for(const d of u)delete l[d]}}else{const l=t;s in l&&tn(l[s],e,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xn(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uc(t){const e={},n=r(t,["operationName"]);n!=null&&a(e,["operationName"],n);const i=r(t,["resourceName"]);return i!=null&&a(e,["_url","resourceName"],i),e}function kc(t){const e={},n=r(t,["name"]);n!=null&&a(e,["name"],n);const i=r(t,["metadata"]);i!=null&&a(e,["metadata"],i);const o=r(t,["done"]);o!=null&&a(e,["done"],o);const s=r(t,["error"]);s!=null&&a(e,["error"],s);const l=r(t,["response","generateVideoResponse"]);return l!=null&&a(e,["response"],bc(l)),e}function Lc(t){const e={},n=r(t,["name"]);n!=null&&a(e,["name"],n);const i=r(t,["metadata"]);i!=null&&a(e,["metadata"],i);const o=r(t,["done"]);o!=null&&a(e,["done"],o);const s=r(t,["error"]);s!=null&&a(e,["error"],s);const l=r(t,["response"]);return l!=null&&a(e,["response"],Vc(l)),e}function bc(t){const e={},n=r(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Gc(l))),a(e,["generatedVideos"],s)}const i=r(t,["raiMediaFilteredCount"]);i!=null&&a(e,["raiMediaFilteredCount"],i);const o=r(t,["raiMediaFilteredReasons"]);return o!=null&&a(e,["raiMediaFilteredReasons"],o),e}function Vc(t){const e={},n=r(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>qc(l))),a(e,["generatedVideos"],s)}const i=r(t,["raiMediaFilteredCount"]);i!=null&&a(e,["raiMediaFilteredCount"],i);const o=r(t,["raiMediaFilteredReasons"]);return o!=null&&a(e,["raiMediaFilteredReasons"],o),e}function Gc(t){const e={},n=r(t,["video"]);return n!=null&&a(e,["video"],Wc(n)),e}function qc(t){const e={},n=r(t,["_self"]);return n!=null&&a(e,["video"],zc(n)),e}function Hc(t){const e={},n=r(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function Bc(t){const e={},n=r(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function Jc(t){const e={},n=r(t,["name"]);n!=null&&a(e,["name"],n);const i=r(t,["metadata"]);i!=null&&a(e,["metadata"],i);const o=r(t,["done"]);o!=null&&a(e,["done"],o);const s=r(t,["error"]);s!=null&&a(e,["error"],s);const l=r(t,["response"]);return l!=null&&a(e,["response"],$c(l)),e}function $c(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["parent"]);i!=null&&a(e,["parent"],i);const o=r(t,["documentName"]);return o!=null&&a(e,["documentName"],o),e}function nr(t){const e={},n=r(t,["name"]);n!=null&&a(e,["name"],n);const i=r(t,["metadata"]);i!=null&&a(e,["metadata"],i);const o=r(t,["done"]);o!=null&&a(e,["done"],o);const s=r(t,["error"]);s!=null&&a(e,["error"],s);const l=r(t,["response"]);return l!=null&&a(e,["response"],Oc(l)),e}function Oc(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["parent"]);i!=null&&a(e,["parent"],i);const o=r(t,["documentName"]);return o!=null&&a(e,["documentName"],o),e}function Wc(t){const e={},n=r(t,["uri"]);n!=null&&a(e,["uri"],n);const i=r(t,["encodedVideo"]);i!=null&&a(e,["videoBytes"],xn(i));const o=r(t,["encoding"]);return o!=null&&a(e,["mimeType"],o),e}function zc(t){const e={},n=r(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const i=r(t,["bytesBase64Encoded"]);i!=null&&a(e,["videoBytes"],xn(i));const o=r(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Mi;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Mi||(Mi={}));var Pi;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Pi||(Pi={}));var xi;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(xi||(xi={}));var ue;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ue||(ue={}));var Ni;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Ni||(Ni={}));var Di;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Di||(Di={}));var Fi;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Fi||(Fi={}));var Ui;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Ui||(Ui={}));var ki;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ki||(ki={}));var Li;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Li||(Li={}));var bi;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(bi||(bi={}));var Vi;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Vi||(Vi={}));var Gi;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Gi||(Gi={}));var qi;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(qi||(qi={}));var Hi;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Hi||(Hi={}));var Bi;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Bi||(Bi={}));var Ji;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ji||(Ji={}));var $i;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})($i||($i={}));var Oi;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Oi||(Oi={}));var ht;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ht||(ht={}));var Wi;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Wi||(Wi={}));var zi;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(zi||(zi={}));var Yi;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Yi||(Yi={}));var nn;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(nn||(nn={}));var Ki;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Ki||(Ki={}));var Xi;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Xi||(Xi={}));var Qi;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Qi||(Qi={}));var Zi;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Zi||(Zi={}));var ji;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ji||(ji={}));var eo;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(eo||(eo={}));var to;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(to||(to={}));var no;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(no||(no={}));var io;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(io||(io={}));var oo;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(oo||(oo={}));var so;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(so||(so={}));var ro;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ro||(ro={}));var lo;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lo||(lo={}));var ao;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ao||(ao={}));var uo;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(uo||(uo={}));var co;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(co||(co={}));var fo;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(fo||(fo={}));var ho;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(ho||(ho={}));var po;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(po||(po={}));var mo;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(mo||(mo={}));var go;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(go||(go={}));var yo;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(yo||(yo={}));var vo;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(vo||(vo={}));var To;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(To||(To={}));var Eo;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Eo||(Eo={}));var _o;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(_o||(_o={}));var Co;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Co||(Co={}));var So;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(So||(So={}));var Ao;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ao||(Ao={}));var Io;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Io||(Io={}));var Ro;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Ro||(Ro={}));var Se;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Se||(Se={}));class on{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ke{get text(){var e,n,i,o,s,l,u,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const h=[];for(const p of(c=(u=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[m,g]of Object.entries(p))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(g!==null||g!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,d+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,i,o,s,l,u,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const h of(c=(u=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&f.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(d+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,o,s,l,u,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,i,o,s,l,u,c,d;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,o,s,l,u,c,d;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(l=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class wo{}class Mo{}class Yc{}class Kc{}class Xc{}class Qc{}class Po{}class xo{}class No{}class Zc{}class pt{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new pt;let o;const s=e;return n?o=Lc(s):o=kc(s),Object.assign(i,o),i}}class Do{}class Fo{}class Uo{}class ko{}class jc{}class ed{}class td{}class Nn{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Nn,s=Jc(e);return Object.assign(i,s),i}}class nd{}class id{}class od{}class Lo{}class sd{get text(){var e,n,i;let o="",s=!1;const l=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&l.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;s=!0,o+=u.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var e,n,i;let o="";const s=[];for(const l of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,c]of Object.entries(l))u!=="inlineData"&&c!==null&&s.push(u);l.inlineData&&typeof l.inlineData.data=="string"&&(o+=atob(l.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class rd{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Dn{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Dn,s=nr(e);return Object.assign(i,s),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ir(t,e){const n=G(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function or(t){return Array.isArray(t)?t.map(e=>mt(e)):[mt(t)]}function mt(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function sr(t){const e=mt(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function rr(t){const e=mt(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bo(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function lr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>bo(e)):[bo(t)]}function sn(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Vo(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Go(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function W(t){if(t==null)throw new Error("ContentUnion is required");return sn(t)?t:{role:"user",parts:lr(t)}}function Fn(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=W(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=W(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>W(n)):[W(e)]}function X(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Vo(t)||Go(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[W(t)]}const e=[],n=[],i=sn(t[0]);for(const o of t){const s=sn(o);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(o);else{if(Vo(o)||Go(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:lr(n)}),e}function ld(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(ue).includes(n[0].toUpperCase())?n[0].toUpperCase():ue.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(ue).includes(i.toUpperCase())?i.toUpperCase():ue.TYPE_UNSPECIFIED})}}function Re(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&ld(t.type,e);for(const[l,u]of Object.entries(t))if(u!=null)if(l=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(ue).includes(u.toUpperCase())?u.toUpperCase():ue.TYPE_UNSPECIFIED}else if(n.includes(l))e[l]=Re(u);else if(i.includes(l)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(Re(d))}e[l]=c}else if(o.includes(l)){const c={};for(const[d,f]of Object.entries(u))c[d]=Re(f);e[l]=c}else{if(l==="additionalProperties")continue;e[l]=u}return e}function Un(t){return Re(t)}function kn(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Ln(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function De(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Re(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Re(e.response));return t}function Fe(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function ad(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function re(t,e){if(typeof e!="string")throw new Error("name must be a string");return ad(t,e,"cachedContents")}function ar(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function de(t){return xn(t)}function ud(t){return t!=null&&typeof t=="object"&&"name"in t}function cd(t){return t!=null&&typeof t=="object"&&"video"in t}function dd(t){return t!=null&&typeof t=="object"&&"uri"in t}function ur(t){var e;let n;if(ud(t)&&(n=t.name),!(dd(t)&&(n=t.uri,n===void 0))&&!(cd(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function cr(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function dr(t){for(const e of["models","tunedModels","publisherModels"])if(fd(t,e))return t[e];return[]}function fd(t,e){return t!==null&&typeof t=="object"&&e in t}function hd(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function pd(t,e={}){const n=[],i=new Set;for(const o of t){const s=o.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const l=hd(o,e);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function fr(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function md(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function hr(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let s=!1;for(const l of o){if(typeof l!="object"||l===null)continue;const c=l.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ue(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function pr(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gd(t){const e={},n=r(t,["responsesFile"]);n!=null&&a(e,["fileName"],n);const i=r(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Xd(l))),a(e,["inlinedResponses"],s)}const o=r(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),a(e,["inlinedEmbedContentResponses"],s)}return e}function yd(t){const e={},n=r(t,["predictionsFormat"]);n!=null&&a(e,["format"],n);const i=r(t,["gcsDestination","outputUriPrefix"]);i!=null&&a(e,["gcsUri"],i);const o=r(t,["bigqueryDestination","outputUri"]);return o!=null&&a(e,["bigqueryUri"],o),e}function vd(t){const e={},n=r(t,["format"]);n!=null&&a(e,["predictionsFormat"],n);const i=r(t,["gcsUri"]);i!=null&&a(e,["gcsDestination","outputUriPrefix"],i);const o=r(t,["bigqueryUri"]);if(o!=null&&a(e,["bigqueryDestination","outputUri"],o),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(r(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function lt(t){const e={},n=r(t,["name"]);n!=null&&a(e,["name"],n);const i=r(t,["metadata","displayName"]);i!=null&&a(e,["displayName"],i);const o=r(t,["metadata","state"]);o!=null&&a(e,["state"],pr(o));const s=r(t,["metadata","createTime"]);s!=null&&a(e,["createTime"],s);const l=r(t,["metadata","endTime"]);l!=null&&a(e,["endTime"],l);const u=r(t,["metadata","updateTime"]);u!=null&&a(e,["updateTime"],u);const c=r(t,["metadata","model"]);c!=null&&a(e,["model"],c);const d=r(t,["metadata","output"]);return d!=null&&a(e,["dest"],gd(hr(d))),e}function rn(t){const e={},n=r(t,["name"]);n!=null&&a(e,["name"],n);const i=r(t,["displayName"]);i!=null&&a(e,["displayName"],i);const o=r(t,["state"]);o!=null&&a(e,["state"],pr(o));const s=r(t,["error"]);s!=null&&a(e,["error"],s);const l=r(t,["createTime"]);l!=null&&a(e,["createTime"],l);const u=r(t,["startTime"]);u!=null&&a(e,["startTime"],u);const c=r(t,["endTime"]);c!=null&&a(e,["endTime"],c);const d=r(t,["updateTime"]);d!=null&&a(e,["updateTime"],d);const f=r(t,["model"]);f!=null&&a(e,["model"],f);const h=r(t,["inputConfig"]);h!=null&&a(e,["src"],Td(h));const p=r(t,["outputConfig"]);p!=null&&a(e,["dest"],yd(hr(p)));const m=r(t,["completionStats"]);return m!=null&&a(e,["completionStats"],m),e}function Td(t){const e={},n=r(t,["instancesFormat"]);n!=null&&a(e,["format"],n);const i=r(t,["gcsSource","uris"]);i!=null&&a(e,["gcsUri"],i);const o=r(t,["bigquerySource","inputUri"]);return o!=null&&a(e,["bigqueryUri"],o),e}function Ed(t,e){const n={};if(r(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(r(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=r(e,["fileName"]);i!=null&&a(n,["fileName"],i);const o=r(e,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Kd(t,l))),a(n,["requests","requests"],s)}return n}function _d(t){const e={},n=r(t,["format"]);n!=null&&a(e,["instancesFormat"],n);const i=r(t,["gcsUri"]);i!=null&&a(e,["gcsSource","uris"],i);const o=r(t,["bigqueryUri"]);if(o!=null&&a(e,["bigquerySource","inputUri"],o),r(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(r(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Cd(t){const e={},n=r(t,["data"]);if(n!=null&&a(e,["data"],n),r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Sd(t,e){const n={},i=r(e,["name"]);return i!=null&&a(n,["_url","name"],Ue(t,i)),n}function Ad(t,e){const n={},i=r(e,["name"]);return i!=null&&a(n,["_url","name"],Ue(t,i)),n}function Id(t){const e={},n=r(t,["content"]);n!=null&&a(e,["content"],n);const i=r(t,["citationMetadata"]);i!=null&&a(e,["citationMetadata"],Rd(i));const o=r(t,["tokenCount"]);o!=null&&a(e,["tokenCount"],o);const s=r(t,["finishReason"]);s!=null&&a(e,["finishReason"],s);const l=r(t,["avgLogprobs"]);l!=null&&a(e,["avgLogprobs"],l);const u=r(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const c=r(t,["index"]);c!=null&&a(e,["index"],c);const d=r(t,["logprobsResult"]);d!=null&&a(e,["logprobsResult"],d);const f=r(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>m)),a(e,["safetyRatings"],p)}const h=r(t,["urlContextMetadata"]);return h!=null&&a(e,["urlContextMetadata"],h),e}function Rd(t){const e={},n=r(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),a(e,["citations"],i)}return e}function mr(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>of(s))),a(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&a(e,["role"],i),e}function wd(t,e){const n={},i=r(t,["displayName"]);if(e!==void 0&&i!=null&&a(e,["batch","displayName"],i),r(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Md(t,e){const n={},i=r(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const o=r(t,["dest"]);return e!==void 0&&o!=null&&a(e,["outputConfig"],vd(md(o))),n}function qo(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["src"]);o!=null&&a(n,["batch","inputConfig"],Ed(t,fr(t,o)));const s=r(e,["config"]);return s!=null&&wd(s,n),n}function Pd(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["model"],G(t,i));const o=r(e,["src"]);o!=null&&a(n,["inputConfig"],_d(fr(t,o)));const s=r(e,["config"]);return s!=null&&Md(s,n),n}function xd(t,e){const n={},i=r(t,["displayName"]);return e!==void 0&&i!=null&&a(e,["batch","displayName"],i),n}function Nd(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["src"]);o!=null&&a(n,["batch","inputConfig"],Vd(t,o));const s=r(e,["config"]);return s!=null&&xd(s,n),n}function Dd(t,e){const n={},i=r(e,["name"]);return i!=null&&a(n,["_url","name"],Ue(t,i)),n}function Fd(t,e){const n={},i=r(e,["name"]);return i!=null&&a(n,["_url","name"],Ue(t,i)),n}function Ud(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["name"]);i!=null&&a(e,["name"],i);const o=r(t,["done"]);o!=null&&a(e,["done"],o);const s=r(t,["error"]);return s!=null&&a(e,["error"],s),e}function kd(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["name"]);i!=null&&a(e,["name"],i);const o=r(t,["done"]);o!=null&&a(e,["done"],o);const s=r(t,["error"]);return s!=null&&a(e,["error"],s),e}function Ld(t,e){const n={},i=r(e,["contents"]);if(i!=null){let s=Fn(t,i);Array.isArray(s)&&(s=s.map(l=>l)),a(n,["requests[]","request","content"],s)}const o=r(e,["config"]);return o!=null&&(a(n,["_self"],bd(o,n)),Fc(n,{"requests[].*":"requests[].request.*"})),n}function bd(t,e){const n={},i=r(t,["taskType"]);e!==void 0&&i!=null&&a(e,["requests[]","taskType"],i);const o=r(t,["title"]);e!==void 0&&o!=null&&a(e,["requests[]","title"],o);const s=r(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&a(e,["requests[]","outputDimensionality"],s),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Vd(t,e){const n={},i=r(e,["fileName"]);i!=null&&a(n,["file_name"],i);const o=r(e,["inlinedRequests"]);return o!=null&&a(n,["requests"],Ld(t,o)),n}function Gd(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const i=r(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function qd(t){const e={},n=r(t,["id"]);n!=null&&a(e,["id"],n);const i=r(t,["args"]);i!=null&&a(e,["args"],i);const o=r(t,["name"]);if(o!=null&&a(e,["name"],o),r(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Hd(t){const e={},n=r(t,["mode"]);n!=null&&a(e,["mode"],n);const i=r(t,["allowedFunctionNames"]);if(i!=null&&a(e,["allowedFunctionNames"],i),r(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Bd(t,e,n){const i={},o=r(e,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],mr(W(o)));const s=r(e,["temperature"]);s!=null&&a(i,["temperature"],s);const l=r(e,["topP"]);l!=null&&a(i,["topP"],l);const u=r(e,["topK"]);u!=null&&a(i,["topK"],u);const c=r(e,["candidateCount"]);c!=null&&a(i,["candidateCount"],c);const d=r(e,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const f=r(e,["stopSequences"]);f!=null&&a(i,["stopSequences"],f);const h=r(e,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);const p=r(e,["logprobs"]);p!=null&&a(i,["logprobs"],p);const m=r(e,["presencePenalty"]);m!=null&&a(i,["presencePenalty"],m);const g=r(e,["frequencyPenalty"]);g!=null&&a(i,["frequencyPenalty"],g);const v=r(e,["seed"]);v!=null&&a(i,["seed"],v);const y=r(e,["responseMimeType"]);y!=null&&a(i,["responseMimeType"],y);const T=r(e,["responseSchema"]);T!=null&&a(i,["responseSchema"],Un(T));const A=r(e,["responseJsonSchema"]);if(A!=null&&a(i,["responseJsonSchema"],A),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=r(e,["safetySettings"]);if(n!==void 0&&E!=null){let U=E;Array.isArray(U)&&(U=U.map(N=>sf(N))),a(n,["safetySettings"],U)}const _=r(e,["tools"]);if(n!==void 0&&_!=null){let U=Fe(_);Array.isArray(U)&&(U=U.map(N=>lf(De(N)))),a(n,["tools"],U)}const C=r(e,["toolConfig"]);if(n!==void 0&&C!=null&&a(n,["toolConfig"],rf(C)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=r(e,["cachedContent"]);n!==void 0&&S!=null&&a(n,["cachedContent"],re(t,S));const I=r(e,["responseModalities"]);I!=null&&a(i,["responseModalities"],I);const w=r(e,["mediaResolution"]);w!=null&&a(i,["mediaResolution"],w);const R=r(e,["speechConfig"]);if(R!=null&&a(i,["speechConfig"],kn(R)),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=r(e,["thinkingConfig"]);x!=null&&a(i,["thinkingConfig"],x);const F=r(e,["imageConfig"]);F!=null&&a(i,["imageConfig"],Yd(F));const V=r(e,["enableEnhancedCivicAnswers"]);return V!=null&&a(i,["enableEnhancedCivicAnswers"],V),i}function Jd(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>Id(d))),a(e,["candidates"],c)}const o=r(t,["modelVersion"]);o!=null&&a(e,["modelVersion"],o);const s=r(t,["promptFeedback"]);s!=null&&a(e,["promptFeedback"],s);const l=r(t,["responseId"]);l!=null&&a(e,["responseId"],l);const u=r(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function $d(t,e){const n={},i=r(e,["name"]);return i!=null&&a(n,["_url","name"],Ue(t,i)),n}function Od(t,e){const n={},i=r(e,["name"]);return i!=null&&a(n,["_url","name"],Ue(t,i)),n}function Wd(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function zd(t){const e={};if(r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function Yd(t){const e={},n=r(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const i=r(t,["imageSize"]);if(i!=null&&a(e,["imageSize"],i),r(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(r(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Kd(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["request","model"],G(t,i));const o=r(e,["contents"]);if(o!=null){let u=X(o);Array.isArray(u)&&(u=u.map(c=>mr(c))),a(n,["request","contents"],u)}const s=r(e,["metadata"]);s!=null&&a(n,["metadata"],s);const l=r(e,["config"]);return l!=null&&a(n,["request","generationConfig"],Bd(t,l,r(n,["request"],{}))),n}function Xd(t){const e={},n=r(t,["response"]);n!=null&&a(e,["response"],Jd(n));const i=r(t,["error"]);return i!=null&&a(e,["error"],i),e}function Qd(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);if(e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),r(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Zd(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);e!==void 0&&o!=null&&a(e,["_query","pageToken"],o);const s=r(t,["filter"]);return e!==void 0&&s!=null&&a(e,["_query","filter"],s),n}function jd(t){const e={},n=r(t,["config"]);return n!=null&&Qd(n,e),e}function ef(t){const e={},n=r(t,["config"]);return n!=null&&Zd(n,e),e}function tf(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=r(t,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>lt(l))),a(e,["batchJobs"],s)}return e}function nf(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=r(t,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>rn(l))),a(e,["batchJobs"],s)}return e}function of(t){const e={},n=r(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const i=r(t,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const o=r(t,["executableCode"]);o!=null&&a(e,["executableCode"],o);const s=r(t,["fileData"]);s!=null&&a(e,["fileData"],Gd(s));const l=r(t,["functionCall"]);l!=null&&a(e,["functionCall"],qd(l));const u=r(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=r(t,["inlineData"]);c!=null&&a(e,["inlineData"],Cd(c));const d=r(t,["text"]);d!=null&&a(e,["text"],d);const f=r(t,["thought"]);f!=null&&a(e,["thought"],f);const h=r(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const p=r(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function sf(t){const e={},n=r(t,["category"]);if(n!=null&&a(e,["category"],n),r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=r(t,["threshold"]);return i!=null&&a(e,["threshold"],i),e}function rf(t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],Hd(n));const i=r(t,["retrievalConfig"]);return i!=null&&a(e,["retrievalConfig"],i),e}function lf(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const o=r(t,["computerUse"]);o!=null&&a(e,["computerUse"],o);const s=r(t,["fileSearch"]);s!=null&&a(e,["fileSearch"],s);const l=r(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=r(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],Wd(u));const c=r(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],zd(c));const d=r(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oe;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(oe||(oe={}));class Te{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(s=(o=l.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class af extends se{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Te(oe.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=qo(this.apiClient,e),i=n._url,o=P("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,c=u.requests,d=[];for(const f of c){const h=Object.assign({},f);if(h.systemInstruction){const p=h.systemInstruction;delete h.systemInstruction;const m=h.request;m.systemInstruction=p,h.request=m}d.push(h)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const s=this.getGcsUri(e),l=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${o}`;else if(l)i.dest=`${l}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Pd(this.apiClient,e);return u=P("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>rn(f))}else{const d=qo(this.apiClient,e);return u=P("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>lt(f))}}async createEmbeddingsInternal(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Nd(this.apiClient,e);return s=P("{model}:asyncBatchEmbedContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>lt(c))}}async get(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Od(this.apiClient,e);return u=P("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>rn(f))}else{const d=$d(this.apiClient,e);return u=P("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>lt(f))}}async cancel(e){var n,i,o,s;let l="",u={};if(this.apiClient.isVertexAI()){const c=Ad(this.apiClient,e);l=P("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=Sd(this.apiClient,e);l=P("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=ef(e);return u=P("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=nf(f),p=new Lo;return Object.assign(p,h),p})}else{const d=jd(e);return u=P("batches",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=tf(f),p=new Lo;return Object.assign(p,h),p})}}async delete(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Fd(this.apiClient,e);return u=P("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>kd(f))}else{const d=Dd(this.apiClient,e);return u=P("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>Ud(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uf(t){const e={},n=r(t,["data"]);if(n!=null&&a(e,["data"],n),r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Ho(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Df(s))),a(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&a(e,["role"],i),e}function cf(t,e){const n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&a(e,["ttl"],i);const o=r(t,["expireTime"]);e!==void 0&&o!=null&&a(e,["expireTime"],o);const s=r(t,["displayName"]);e!==void 0&&s!=null&&a(e,["displayName"],s);const l=r(t,["contents"]);if(e!==void 0&&l!=null){let f=X(l);Array.isArray(f)&&(f=f.map(h=>Ho(h))),a(e,["contents"],f)}const u=r(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Ho(W(u)));const c=r(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>Uf(h))),a(e,["tools"],f)}const d=r(t,["toolConfig"]);if(e!==void 0&&d!=null&&a(e,["toolConfig"],Ff(d)),r(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function df(t,e){const n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&a(e,["ttl"],i);const o=r(t,["expireTime"]);e!==void 0&&o!=null&&a(e,["expireTime"],o);const s=r(t,["displayName"]);e!==void 0&&s!=null&&a(e,["displayName"],s);const l=r(t,["contents"]);if(e!==void 0&&l!=null){let h=X(l);Array.isArray(h)&&(h=h.map(p=>p)),a(e,["contents"],h)}const u=r(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],W(u));const c=r(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>kf(p))),a(e,["tools"],h)}const d=r(t,["toolConfig"]);e!==void 0&&d!=null&&a(e,["toolConfig"],d);const f=r(t,["kmsKeyName"]);return e!==void 0&&f!=null&&a(e,["encryption_spec","kmsKeyName"],f),n}function ff(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["model"],ir(t,i));const o=r(e,["config"]);return o!=null&&cf(o,n),n}function hf(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["model"],ir(t,i));const o=r(e,["config"]);return o!=null&&df(o,n),n}function pf(t,e){const n={},i=r(e,["name"]);return i!=null&&a(n,["_url","name"],re(t,i)),n}function mf(t,e){const n={},i=r(e,["name"]);return i!=null&&a(n,["_url","name"],re(t,i)),n}function gf(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function yf(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function vf(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const i=r(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Tf(t){const e={},n=r(t,["id"]);n!=null&&a(e,["id"],n);const i=r(t,["args"]);i!=null&&a(e,["args"],i);const o=r(t,["name"]);if(o!=null&&a(e,["name"],o),r(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ef(t){const e={},n=r(t,["mode"]);n!=null&&a(e,["mode"],n);const i=r(t,["allowedFunctionNames"]);if(i!=null&&a(e,["allowedFunctionNames"],i),r(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _f(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&a(e,["description"],n);const i=r(t,["name"]);i!=null&&a(e,["name"],i);const o=r(t,["parameters"]);o!=null&&a(e,["parameters"],o);const s=r(t,["parametersJsonSchema"]);s!=null&&a(e,["parametersJsonSchema"],s);const l=r(t,["response"]);l!=null&&a(e,["response"],l);const u=r(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function Cf(t,e){const n={},i=r(e,["name"]);return i!=null&&a(n,["_url","name"],re(t,i)),n}function Sf(t,e){const n={},i=r(e,["name"]);return i!=null&&a(n,["_url","name"],re(t,i)),n}function Af(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function If(t){const e={};if(r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function Rf(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);return e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),n}function wf(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);return e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),n}function Mf(t){const e={},n=r(t,["config"]);return n!=null&&Rf(n,e),e}function Pf(t){const e={},n=r(t,["config"]);return n!=null&&wf(n,e),e}function xf(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=r(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),a(e,["cachedContents"],s)}return e}function Nf(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=r(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),a(e,["cachedContents"],s)}return e}function Df(t){const e={},n=r(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const i=r(t,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const o=r(t,["executableCode"]);o!=null&&a(e,["executableCode"],o);const s=r(t,["fileData"]);s!=null&&a(e,["fileData"],vf(s));const l=r(t,["functionCall"]);l!=null&&a(e,["functionCall"],Tf(l));const u=r(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=r(t,["inlineData"]);c!=null&&a(e,["inlineData"],uf(c));const d=r(t,["text"]);d!=null&&a(e,["text"],d);const f=r(t,["thought"]);f!=null&&a(e,["thought"],f);const h=r(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const p=r(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function Ff(t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],Ef(n));const i=r(t,["retrievalConfig"]);return i!=null&&a(e,["retrievalConfig"],i),e}function Uf(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const o=r(t,["computerUse"]);o!=null&&a(e,["computerUse"],o);const s=r(t,["fileSearch"]);s!=null&&a(e,["fileSearch"],s);const l=r(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=r(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],Af(u));const c=r(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],If(c));const d=r(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function kf(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>_f(p))),a(e,["functionDeclarations"],h)}const i=r(t,["retrieval"]);i!=null&&a(e,["retrieval"],i);const o=r(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const s=r(t,["computerUse"]);if(s!=null&&a(e,["computerUse"],s),r(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=r(t,["codeExecution"]);l!=null&&a(e,["codeExecution"],l);const u=r(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=r(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=r(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=r(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function Lf(t,e){const n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&a(e,["ttl"],i);const o=r(t,["expireTime"]);return e!==void 0&&o!=null&&a(e,["expireTime"],o),n}function bf(t,e){const n={},i=r(t,["ttl"]);e!==void 0&&i!=null&&a(e,["ttl"],i);const o=r(t,["expireTime"]);return e!==void 0&&o!=null&&a(e,["expireTime"],o),n}function Vf(t,e){const n={},i=r(e,["name"]);i!=null&&a(n,["_url","name"],re(t,i));const o=r(e,["config"]);return o!=null&&Lf(o,n),n}function Gf(t,e){const n={},i=r(e,["name"]);i!=null&&a(n,["_url","name"],re(t,i));const o=r(e,["config"]);return o!=null&&bf(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qf extends se{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Te(oe.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=hf(this.apiClient,e);return u=P("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const d=ff(this.apiClient,e);return u=P("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async get(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Sf(this.apiClient,e);return u=P("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const d=Cf(this.apiClient,e);return u=P("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async delete(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=mf(this.apiClient,e);return u=P("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=yf(f),p=new Uo;return Object.assign(p,h),p})}else{const d=pf(this.apiClient,e);return u=P("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=gf(f),p=new Uo;return Object.assign(p,h),p})}}async update(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Gf(this.apiClient,e);return u=P("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>f)}else{const d=Vf(this.apiClient,e);return u=P("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>f)}}async listInternal(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Pf(e);return u=P("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=Nf(f),p=new ko;return Object.assign(p,h),p})}else{const d=Mf(e);return u=P("cachedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=xf(f),p=new ko;return Object.assign(p,h),p})}}}function gt(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function Bo(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function D(t){return this instanceof D?(this.v=t,this):new D(t)}function te(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(m){return function(g){return Promise.resolve(g).then(m,h)}}function u(m,g){i[m]&&(o[m]=function(v){return new Promise(function(y,T){s.push([m,v,y,T])>1||c(m,v)})},g&&(o[m]=g(o[m])))}function c(m,g){try{d(i[m](g))}catch(v){p(s[0][3],v)}}function d(m){m.value instanceof D?Promise.resolve(m.value.v).then(f,h):p(s[0][2],m)}function f(m){c("next",m)}function h(m){c("throw",m)}function p(m,g){m(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function ne(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Bo=="function"?Bo(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(l){return new Promise(function(u,c){l=t[s](l),o(u,c,l.done,l.value)})}}function o(s,l,u,c){Promise.resolve(c).then(function(d){s({value:d,done:u})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hf(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:gr(n)}function gr(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Bf(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Jo(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let s=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),s&&!gr(t[i])&&(s=!1),i++;s?e.push(...o):e.pop()}return e}class Jf{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new $f(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class $f{constructor(e,n,i,o={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),Bf(s)}async sendMessage(e){var n;await this.sendPromise;const i=W(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,l,u;const c=await o,d=(l=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||l===void 0?void 0:l.content,f=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];f!=null&&(p=(u=f.slice(h))!==null&&u!==void 0?u:[]);const m=d?[d]:[];this.recordHistory(i,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=W(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,i)}getHistory(e=!1){const n=e?Jo(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return te(this,arguments,function*(){var o,s,l,u,c,d;const f=[];try{for(var h=!0,p=ne(e),m;m=yield D(p.next()),o=m.done,!o;h=!0){u=m.value,h=!1;const g=u;if(Hf(g)){const v=(d=(c=g.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;v!==void 0&&f.push(v)}yield yield D(g)}}catch(g){s={error:g}}finally{try{!h&&!o&&(l=p.return)&&(yield D(l.call(p)))}finally{if(s)throw s.error}}this.recordHistory(n,f)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Jo(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Et extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Et.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Of(t){const e={},n=r(t,["file"]);return n!=null&&a(e,["file"],n),e}function Wf(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function zf(t){const e={},n=r(t,["name"]);return n!=null&&a(e,["_url","file"],ur(n)),e}function Yf(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Kf(t){const e={},n=r(t,["name"]);return n!=null&&a(e,["_url","file"],ur(n)),e}function Xf(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);return e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),n}function Qf(t){const e={},n=r(t,["config"]);return n!=null&&Xf(n,e),e}function Zf(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=r(t,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),a(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jf extends se{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Te(oe.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Qf(e);return s=P("files",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=Zf(c),f=new nd;return Object.assign(f,d),f})}}async createInternal(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Of(e);return s=P("upload/v1beta/files",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=Wf(c),f=new id;return Object.assign(f,d),f})}}async get(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Kf(e);return s=P("files/{file}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=zf(e);return s=P("files/{file}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=Yf(c),f=new od;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function at(t){const e={},n=r(t,["data"]);if(n!=null&&a(e,["data"],n),r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function eh(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>gh(s))),a(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&a(e,["role"],i),e}function th(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const i=r(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function nh(t){const e={},n=r(t,["id"]);n!=null&&a(e,["id"],n);const i=r(t,["args"]);i!=null&&a(e,["args"],i);const o=r(t,["name"]);if(o!=null&&a(e,["name"],o),r(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ih(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&a(e,["description"],n);const i=r(t,["name"]);i!=null&&a(e,["name"],i);const o=r(t,["parameters"]);o!=null&&a(e,["parameters"],o);const s=r(t,["parametersJsonSchema"]);s!=null&&a(e,["parametersJsonSchema"],s);const l=r(t,["response"]);l!=null&&a(e,["response"],l);const u=r(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function oh(t){const e={},n=r(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const i=r(t,["responseJsonSchema"]);i!=null&&a(e,["responseJsonSchema"],i);const o=r(t,["audioTimestamp"]);o!=null&&a(e,["audioTimestamp"],o);const s=r(t,["candidateCount"]);s!=null&&a(e,["candidateCount"],s);const l=r(t,["enableAffectiveDialog"]);l!=null&&a(e,["enableAffectiveDialog"],l);const u=r(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const c=r(t,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=r(t,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const f=r(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const h=r(t,["presencePenalty"]);h!=null&&a(e,["presencePenalty"],h);const p=r(t,["responseLogprobs"]);p!=null&&a(e,["responseLogprobs"],p);const m=r(t,["responseMimeType"]);m!=null&&a(e,["responseMimeType"],m);const g=r(t,["responseModalities"]);g!=null&&a(e,["responseModalities"],g);const v=r(t,["responseSchema"]);v!=null&&a(e,["responseSchema"],v);const y=r(t,["routingConfig"]);y!=null&&a(e,["routingConfig"],y);const T=r(t,["seed"]);T!=null&&a(e,["seed"],T);const A=r(t,["speechConfig"]);A!=null&&a(e,["speechConfig"],yr(A));const E=r(t,["stopSequences"]);E!=null&&a(e,["stopSequences"],E);const _=r(t,["temperature"]);_!=null&&a(e,["temperature"],_);const C=r(t,["thinkingConfig"]);C!=null&&a(e,["thinkingConfig"],C);const S=r(t,["topK"]);S!=null&&a(e,["topK"],S);const I=r(t,["topP"]);if(I!=null&&a(e,["topP"],I),r(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function sh(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function rh(t){const e={};if(r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function lh(t,e){const n={},i=r(t,["generationConfig"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig"],i);const o=r(t,["responseModalities"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","responseModalities"],o);const s=r(t,["temperature"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","temperature"],s);const l=r(t,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const u=r(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=r(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=r(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=r(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const h=r(t,["speechConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","speechConfig"],Ln(h));const p=r(t,["thinkingConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","thinkingConfig"],p);const m=r(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=r(t,["systemInstruction"]);e!==void 0&&g!=null&&a(e,["setup","systemInstruction"],eh(W(g)));const v=r(t,["tools"]);if(e!==void 0&&v!=null){let S=Fe(v);Array.isArray(S)&&(S=S.map(I=>vh(De(I)))),a(e,["setup","tools"],S)}const y=r(t,["sessionResumption"]);e!==void 0&&y!=null&&a(e,["setup","sessionResumption"],yh(y));const T=r(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&a(e,["setup","inputAudioTranscription"],T);const A=r(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&a(e,["setup","outputAudioTranscription"],A);const E=r(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&a(e,["setup","realtimeInputConfig"],E);const _=r(t,["contextWindowCompression"]);e!==void 0&&_!=null&&a(e,["setup","contextWindowCompression"],_);const C=r(t,["proactivity"]);if(e!==void 0&&C!=null&&a(e,["setup","proactivity"],C),r(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function ah(t,e){const n={},i=r(t,["generationConfig"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig"],oh(i));const o=r(t,["responseModalities"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","responseModalities"],o);const s=r(t,["temperature"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","temperature"],s);const l=r(t,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const u=r(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=r(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=r(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=r(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const h=r(t,["speechConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","speechConfig"],yr(Ln(h)));const p=r(t,["thinkingConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","thinkingConfig"],p);const m=r(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=r(t,["systemInstruction"]);e!==void 0&&g!=null&&a(e,["setup","systemInstruction"],W(g));const v=r(t,["tools"]);if(e!==void 0&&v!=null){let I=Fe(v);Array.isArray(I)&&(I=I.map(w=>Th(De(w)))),a(e,["setup","tools"],I)}const y=r(t,["sessionResumption"]);e!==void 0&&y!=null&&a(e,["setup","sessionResumption"],y);const T=r(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&a(e,["setup","inputAudioTranscription"],T);const A=r(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&a(e,["setup","outputAudioTranscription"],A);const E=r(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&a(e,["setup","realtimeInputConfig"],E);const _=r(t,["contextWindowCompression"]);e!==void 0&&_!=null&&a(e,["setup","contextWindowCompression"],_);const C=r(t,["proactivity"]);e!==void 0&&C!=null&&a(e,["setup","proactivity"],C);const S=r(t,["explicitVadSignal"]);return e!==void 0&&S!=null&&a(e,["setup","explicitVadSignal"],S),n}function uh(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["setup","model"],G(t,i));const o=r(e,["config"]);return o!=null&&a(n,["config"],lh(o,n)),n}function ch(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["setup","model"],G(t,i));const o=r(e,["config"]);return o!=null&&a(n,["config"],ah(o,n)),n}function dh(t){const e={},n=r(t,["musicGenerationConfig"]);return n!=null&&a(e,["musicGenerationConfig"],n),e}function fh(t){const e={},n=r(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),a(e,["weightedPrompts"],i)}return e}function hh(t){const e={},n=r(t,["media"]);if(n!=null){let d=or(n);Array.isArray(d)&&(d=d.map(f=>at(f))),a(e,["mediaChunks"],d)}const i=r(t,["audio"]);i!=null&&a(e,["audio"],at(rr(i)));const o=r(t,["audioStreamEnd"]);o!=null&&a(e,["audioStreamEnd"],o);const s=r(t,["video"]);s!=null&&a(e,["video"],at(sr(s)));const l=r(t,["text"]);l!=null&&a(e,["text"],l);const u=r(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=r(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function ph(t){const e={},n=r(t,["media"]);if(n!=null){let d=or(n);Array.isArray(d)&&(d=d.map(f=>f)),a(e,["mediaChunks"],d)}const i=r(t,["audio"]);i!=null&&a(e,["audio"],rr(i));const o=r(t,["audioStreamEnd"]);o!=null&&a(e,["audioStreamEnd"],o);const s=r(t,["video"]);s!=null&&a(e,["video"],sr(s));const l=r(t,["text"]);l!=null&&a(e,["text"],l);const u=r(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=r(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function mh(t){const e={},n=r(t,["setupComplete"]);n!=null&&a(e,["setupComplete"],n);const i=r(t,["serverContent"]);i!=null&&a(e,["serverContent"],i);const o=r(t,["toolCall"]);o!=null&&a(e,["toolCall"],o);const s=r(t,["toolCallCancellation"]);s!=null&&a(e,["toolCallCancellation"],s);const l=r(t,["usageMetadata"]);l!=null&&a(e,["usageMetadata"],Eh(l));const u=r(t,["goAway"]);u!=null&&a(e,["goAway"],u);const c=r(t,["sessionResumptionUpdate"]);c!=null&&a(e,["sessionResumptionUpdate"],c);const d=r(t,["voiceActivityDetectionSignal"]);return d!=null&&a(e,["voiceActivityDetectionSignal"],d),e}function gh(t){const e={},n=r(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const i=r(t,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const o=r(t,["executableCode"]);o!=null&&a(e,["executableCode"],o);const s=r(t,["fileData"]);s!=null&&a(e,["fileData"],th(s));const l=r(t,["functionCall"]);l!=null&&a(e,["functionCall"],nh(l));const u=r(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=r(t,["inlineData"]);c!=null&&a(e,["inlineData"],at(c));const d=r(t,["text"]);d!=null&&a(e,["text"],d);const f=r(t,["thought"]);f!=null&&a(e,["thought"],f);const h=r(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const p=r(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function yh(t){const e={},n=r(t,["handle"]);if(n!=null&&a(e,["handle"],n),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function yr(t){const e={},n=r(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],n);const i=r(t,["languageCode"]);if(i!=null&&a(e,["languageCode"],i),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function vh(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const o=r(t,["computerUse"]);o!=null&&a(e,["computerUse"],o);const s=r(t,["fileSearch"]);s!=null&&a(e,["fileSearch"],s);const l=r(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=r(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],sh(u));const c=r(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],rh(c));const d=r(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function Th(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>ih(p))),a(e,["functionDeclarations"],h)}const i=r(t,["retrieval"]);i!=null&&a(e,["retrieval"],i);const o=r(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const s=r(t,["computerUse"]);if(s!=null&&a(e,["computerUse"],s),r(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=r(t,["codeExecution"]);l!=null&&a(e,["codeExecution"],l);const u=r(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=r(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=r(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=r(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function Eh(t){const e={},n=r(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);const i=r(t,["cachedContentTokenCount"]);i!=null&&a(e,["cachedContentTokenCount"],i);const o=r(t,["candidatesTokenCount"]);o!=null&&a(e,["responseTokenCount"],o);const s=r(t,["toolUsePromptTokenCount"]);s!=null&&a(e,["toolUsePromptTokenCount"],s);const l=r(t,["thoughtsTokenCount"]);l!=null&&a(e,["thoughtsTokenCount"],l);const u=r(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const c=r(t,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["promptTokensDetails"],m)}const d=r(t,["cacheTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["cacheTokensDetails"],m)}const f=r(t,["candidatesTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["responseTokensDetails"],m)}const h=r(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>g)),a(e,["toolUsePromptTokensDetails"],m)}const p=r(t,["trafficType"]);return p!=null&&a(e,["trafficType"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _h(t){const e={},n=r(t,["data"]);if(n!=null&&a(e,["data"],n),r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Ch(t){const e={},n=r(t,["content"]);n!=null&&a(e,["content"],n);const i=r(t,["citationMetadata"]);i!=null&&a(e,["citationMetadata"],Sh(i));const o=r(t,["tokenCount"]);o!=null&&a(e,["tokenCount"],o);const s=r(t,["finishReason"]);s!=null&&a(e,["finishReason"],s);const l=r(t,["avgLogprobs"]);l!=null&&a(e,["avgLogprobs"],l);const u=r(t,["groundingMetadata"]);u!=null&&a(e,["groundingMetadata"],u);const c=r(t,["index"]);c!=null&&a(e,["index"],c);const d=r(t,["logprobsResult"]);d!=null&&a(e,["logprobsResult"],d);const f=r(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>m)),a(e,["safetyRatings"],p)}const h=r(t,["urlContextMetadata"]);return h!=null&&a(e,["urlContextMetadata"],h),e}function Sh(t){const e={},n=r(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),a(e,["citations"],i)}return e}function Ah(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["contents"]);if(o!=null){let s=X(o);Array.isArray(s)&&(s=s.map(l=>l)),a(n,["contents"],s)}return n}function Ih(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),a(e,["tokensInfo"],o)}return e}function Rh(t){const e={},n=r(t,["values"]);n!=null&&a(e,["values"],n);const i=r(t,["statistics"]);return i!=null&&a(e,["statistics"],wh(i)),e}function wh(t){const e={},n=r(t,["truncated"]);n!=null&&a(e,["truncated"],n);const i=r(t,["token_count"]);return i!=null&&a(e,["tokenCount"],i),e}function _t(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Lp(s))),a(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&a(e,["role"],i),e}function Mh(t){const e={},n=r(t,["controlType"]);n!=null&&a(e,["controlType"],n);const i=r(t,["enableControlImageComputation"]);return i!=null&&a(e,["computeControl"],i),e}function Ph(t){const e={};if(r(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(r(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(r(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function xh(t,e){const n={},i=r(t,["systemInstruction"]);e!==void 0&&i!=null&&a(e,["systemInstruction"],W(i));const o=r(t,["tools"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Cr(u))),a(e,["tools"],l)}const s=r(t,["generationConfig"]);return e!==void 0&&s!=null&&a(e,["generationConfig"],_p(s)),n}function Nh(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["contents"]);if(o!=null){let l=X(o);Array.isArray(l)&&(l=l.map(u=>_t(u))),a(n,["contents"],l)}const s=r(e,["config"]);return s!=null&&Ph(s),n}function Dh(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["contents"]);if(o!=null){let l=X(o);Array.isArray(l)&&(l=l.map(u=>u)),a(n,["contents"],l)}const s=r(e,["config"]);return s!=null&&xh(s,n),n}function Fh(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["totalTokens"]);i!=null&&a(e,["totalTokens"],i);const o=r(t,["cachedContentTokenCount"]);return o!=null&&a(e,["cachedContentTokenCount"],o),e}function Uh(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["totalTokens"]);return i!=null&&a(e,["totalTokens"],i),e}function kh(t,e){const n={},i=r(e,["model"]);return i!=null&&a(n,["_url","name"],G(t,i)),n}function Lh(t,e){const n={},i=r(e,["model"]);return i!=null&&a(n,["_url","name"],G(t,i)),n}function bh(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Vh(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Gh(t,e){const n={},i=r(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const o=r(t,["negativePrompt"]);e!==void 0&&o!=null&&a(e,["parameters","negativePrompt"],o);const s=r(t,["numberOfImages"]);e!==void 0&&s!=null&&a(e,["parameters","sampleCount"],s);const l=r(t,["aspectRatio"]);e!==void 0&&l!=null&&a(e,["parameters","aspectRatio"],l);const u=r(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=r(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=r(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=r(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const h=r(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&a(e,["parameters","includeSafetyAttributes"],h);const p=r(t,["includeRaiReason"]);e!==void 0&&p!=null&&a(e,["parameters","includeRaiReason"],p);const m=r(t,["language"]);e!==void 0&&m!=null&&a(e,["parameters","language"],m);const g=r(t,["outputMimeType"]);e!==void 0&&g!=null&&a(e,["parameters","outputOptions","mimeType"],g);const v=r(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&a(e,["parameters","outputOptions","compressionQuality"],v);const y=r(t,["addWatermark"]);e!==void 0&&y!=null&&a(e,["parameters","addWatermark"],y);const T=r(t,["labels"]);e!==void 0&&T!=null&&a(e,["labels"],T);const A=r(t,["editMode"]);e!==void 0&&A!=null&&a(e,["parameters","editMode"],A);const E=r(t,["baseSteps"]);return e!==void 0&&E!=null&&a(e,["parameters","editConfig","baseSteps"],E),n}function qh(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const s=r(e,["referenceImages"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(c=>Bp(c))),a(n,["instances[0]","referenceImages"],u)}const l=r(e,["config"]);return l!=null&&Gh(l,n),n}function Hh(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ct(s))),a(e,["generatedImages"],o)}return e}function Bh(t,e){const n={},i=r(t,["taskType"]);e!==void 0&&i!=null&&a(e,["requests[]","taskType"],i);const o=r(t,["title"]);e!==void 0&&o!=null&&a(e,["requests[]","title"],o);const s=r(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&a(e,["requests[]","outputDimensionality"],s),r(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(r(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Jh(t,e){const n={},i=r(t,["taskType"]);e!==void 0&&i!=null&&a(e,["instances[]","task_type"],i);const o=r(t,["title"]);e!==void 0&&o!=null&&a(e,["instances[]","title"],o);const s=r(t,["outputDimensionality"]);e!==void 0&&s!=null&&a(e,["parameters","outputDimensionality"],s);const l=r(t,["mimeType"]);e!==void 0&&l!=null&&a(e,["instances[]","mimeType"],l);const u=r(t,["autoTruncate"]);return e!==void 0&&u!=null&&a(e,["parameters","autoTruncate"],u),n}function $h(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["contents"]);if(o!=null){let u=Fn(t,o);Array.isArray(u)&&(u=u.map(c=>c)),a(n,["requests[]","content"],u)}const s=r(e,["config"]);s!=null&&Bh(s,n);const l=r(e,["model"]);return l!==void 0&&a(n,["requests[]","model"],G(t,l)),n}function Oh(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["contents"]);if(o!=null){let l=Fn(t,o);Array.isArray(l)&&(l=l.map(u=>u)),a(n,["instances[]","content"],l)}const s=r(e,["config"]);return s!=null&&Jh(s,n),n}function Wh(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>l)),a(e,["embeddings"],s)}const o=r(t,["metadata"]);return o!=null&&a(e,["metadata"],o),e}function zh(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Rh(l))),a(e,["embeddings"],s)}const o=r(t,["metadata"]);return o!=null&&a(e,["metadata"],o),e}function Yh(t){const e={},n=r(t,["endpoint"]);n!=null&&a(e,["name"],n);const i=r(t,["deployedModelId"]);return i!=null&&a(e,["deployedModelId"],i),e}function Kh(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const i=r(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function Xh(t){const e={},n=r(t,["id"]);n!=null&&a(e,["id"],n);const i=r(t,["args"]);i!=null&&a(e,["args"],i);const o=r(t,["name"]);if(o!=null&&a(e,["name"],o),r(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Qh(t){const e={},n=r(t,["mode"]);n!=null&&a(e,["mode"],n);const i=r(t,["allowedFunctionNames"]);if(i!=null&&a(e,["allowedFunctionNames"],i),r(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Zh(t){const e={};if(r(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=r(t,["description"]);n!=null&&a(e,["description"],n);const i=r(t,["name"]);i!=null&&a(e,["name"],i);const o=r(t,["parameters"]);o!=null&&a(e,["parameters"],o);const s=r(t,["parametersJsonSchema"]);s!=null&&a(e,["parametersJsonSchema"],s);const l=r(t,["response"]);l!=null&&a(e,["response"],l);const u=r(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function jh(t,e,n){const i={},o=r(e,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],_t(W(o)));const s=r(e,["temperature"]);s!=null&&a(i,["temperature"],s);const l=r(e,["topP"]);l!=null&&a(i,["topP"],l);const u=r(e,["topK"]);u!=null&&a(i,["topK"],u);const c=r(e,["candidateCount"]);c!=null&&a(i,["candidateCount"],c);const d=r(e,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const f=r(e,["stopSequences"]);f!=null&&a(i,["stopSequences"],f);const h=r(e,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);const p=r(e,["logprobs"]);p!=null&&a(i,["logprobs"],p);const m=r(e,["presencePenalty"]);m!=null&&a(i,["presencePenalty"],m);const g=r(e,["frequencyPenalty"]);g!=null&&a(i,["frequencyPenalty"],g);const v=r(e,["seed"]);v!=null&&a(i,["seed"],v);const y=r(e,["responseMimeType"]);y!=null&&a(i,["responseMimeType"],y);const T=r(e,["responseSchema"]);T!=null&&a(i,["responseSchema"],Un(T));const A=r(e,["responseJsonSchema"]);if(A!=null&&a(i,["responseJsonSchema"],A),r(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(r(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=r(e,["safetySettings"]);if(n!==void 0&&E!=null){let U=E;Array.isArray(U)&&(U=U.map(N=>Jp(N))),a(n,["safetySettings"],U)}const _=r(e,["tools"]);if(n!==void 0&&_!=null){let U=Fe(_);Array.isArray(U)&&(U=U.map(N=>Xp(De(N)))),a(n,["tools"],U)}const C=r(e,["toolConfig"]);if(n!==void 0&&C!=null&&a(n,["toolConfig"],Kp(C)),r(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=r(e,["cachedContent"]);n!==void 0&&S!=null&&a(n,["cachedContent"],re(t,S));const I=r(e,["responseModalities"]);I!=null&&a(i,["responseModalities"],I);const w=r(e,["mediaResolution"]);w!=null&&a(i,["mediaResolution"],w);const R=r(e,["speechConfig"]);if(R!=null&&a(i,["speechConfig"],kn(R)),r(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=r(e,["thinkingConfig"]);x!=null&&a(i,["thinkingConfig"],x);const F=r(e,["imageConfig"]);F!=null&&a(i,["imageConfig"],Rp(F));const V=r(e,["enableEnhancedCivicAnswers"]);return V!=null&&a(i,["enableEnhancedCivicAnswers"],V),i}function ep(t,e,n){const i={},o=r(e,["systemInstruction"]);n!==void 0&&o!=null&&a(n,["systemInstruction"],W(o));const s=r(e,["temperature"]);s!=null&&a(i,["temperature"],s);const l=r(e,["topP"]);l!=null&&a(i,["topP"],l);const u=r(e,["topK"]);u!=null&&a(i,["topK"],u);const c=r(e,["candidateCount"]);c!=null&&a(i,["candidateCount"],c);const d=r(e,["maxOutputTokens"]);d!=null&&a(i,["maxOutputTokens"],d);const f=r(e,["stopSequences"]);f!=null&&a(i,["stopSequences"],f);const h=r(e,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);const p=r(e,["logprobs"]);p!=null&&a(i,["logprobs"],p);const m=r(e,["presencePenalty"]);m!=null&&a(i,["presencePenalty"],m);const g=r(e,["frequencyPenalty"]);g!=null&&a(i,["frequencyPenalty"],g);const v=r(e,["seed"]);v!=null&&a(i,["seed"],v);const y=r(e,["responseMimeType"]);y!=null&&a(i,["responseMimeType"],y);const T=r(e,["responseSchema"]);T!=null&&a(i,["responseSchema"],Un(T));const A=r(e,["responseJsonSchema"]);A!=null&&a(i,["responseJsonSchema"],A);const E=r(e,["routingConfig"]);E!=null&&a(i,["routingConfig"],E);const _=r(e,["modelSelectionConfig"]);_!=null&&a(i,["modelConfig"],_);const C=r(e,["safetySettings"]);if(n!==void 0&&C!=null){let M=C;Array.isArray(M)&&(M=M.map(L=>L)),a(n,["safetySettings"],M)}const S=r(e,["tools"]);if(n!==void 0&&S!=null){let M=Fe(S);Array.isArray(M)&&(M=M.map(L=>Cr(De(L)))),a(n,["tools"],M)}const I=r(e,["toolConfig"]);n!==void 0&&I!=null&&a(n,["toolConfig"],I);const w=r(e,["labels"]);n!==void 0&&w!=null&&a(n,["labels"],w);const R=r(e,["cachedContent"]);n!==void 0&&R!=null&&a(n,["cachedContent"],re(t,R));const x=r(e,["responseModalities"]);x!=null&&a(i,["responseModalities"],x);const F=r(e,["mediaResolution"]);F!=null&&a(i,["mediaResolution"],F);const V=r(e,["speechConfig"]);V!=null&&a(i,["speechConfig"],_r(kn(V)));const U=r(e,["audioTimestamp"]);U!=null&&a(i,["audioTimestamp"],U);const N=r(e,["thinkingConfig"]);N!=null&&a(i,["thinkingConfig"],N);const K=r(e,["imageConfig"]);if(K!=null&&a(i,["imageConfig"],wp(K)),r(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function $o(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["contents"]);if(o!=null){let l=X(o);Array.isArray(l)&&(l=l.map(u=>_t(u))),a(n,["contents"],l)}const s=r(e,["config"]);return s!=null&&a(n,["generationConfig"],jh(t,s,n)),n}function Oo(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["contents"]);if(o!=null){let l=X(o);Array.isArray(l)&&(l=l.map(u=>u)),a(n,["contents"],l)}const s=r(e,["config"]);return s!=null&&a(n,["generationConfig"],ep(t,s,n)),n}function Wo(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>Ch(d))),a(e,["candidates"],c)}const o=r(t,["modelVersion"]);o!=null&&a(e,["modelVersion"],o);const s=r(t,["promptFeedback"]);s!=null&&a(e,["promptFeedback"],s);const l=r(t,["responseId"]);l!=null&&a(e,["responseId"],l);const u=r(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function zo(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>f)),a(e,["candidates"],d)}const o=r(t,["createTime"]);o!=null&&a(e,["createTime"],o);const s=r(t,["modelVersion"]);s!=null&&a(e,["modelVersion"],s);const l=r(t,["promptFeedback"]);l!=null&&a(e,["promptFeedback"],l);const u=r(t,["responseId"]);u!=null&&a(e,["responseId"],u);const c=r(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function tp(t,e){const n={};if(r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=r(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const o=r(t,["aspectRatio"]);e!==void 0&&o!=null&&a(e,["parameters","aspectRatio"],o);const s=r(t,["guidanceScale"]);if(e!==void 0&&s!=null&&a(e,["parameters","guidanceScale"],s),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=r(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&a(e,["parameters","safetySetting"],l);const u=r(t,["personGeneration"]);e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u);const c=r(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&a(e,["parameters","includeSafetyAttributes"],c);const d=r(t,["includeRaiReason"]);e!==void 0&&d!=null&&a(e,["parameters","includeRaiReason"],d);const f=r(t,["language"]);e!==void 0&&f!=null&&a(e,["parameters","language"],f);const h=r(t,["outputMimeType"]);e!==void 0&&h!=null&&a(e,["parameters","outputOptions","mimeType"],h);const p=r(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&a(e,["parameters","outputOptions","compressionQuality"],p),r(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const m=r(t,["imageSize"]);if(e!==void 0&&m!=null&&a(e,["parameters","sampleImageSize"],m),r(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function np(t,e){const n={},i=r(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const o=r(t,["negativePrompt"]);e!==void 0&&o!=null&&a(e,["parameters","negativePrompt"],o);const s=r(t,["numberOfImages"]);e!==void 0&&s!=null&&a(e,["parameters","sampleCount"],s);const l=r(t,["aspectRatio"]);e!==void 0&&l!=null&&a(e,["parameters","aspectRatio"],l);const u=r(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=r(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=r(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=r(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const h=r(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&a(e,["parameters","includeSafetyAttributes"],h);const p=r(t,["includeRaiReason"]);e!==void 0&&p!=null&&a(e,["parameters","includeRaiReason"],p);const m=r(t,["language"]);e!==void 0&&m!=null&&a(e,["parameters","language"],m);const g=r(t,["outputMimeType"]);e!==void 0&&g!=null&&a(e,["parameters","outputOptions","mimeType"],g);const v=r(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&a(e,["parameters","outputOptions","compressionQuality"],v);const y=r(t,["addWatermark"]);e!==void 0&&y!=null&&a(e,["parameters","addWatermark"],y);const T=r(t,["labels"]);e!==void 0&&T!=null&&a(e,["labels"],T);const A=r(t,["imageSize"]);e!==void 0&&A!=null&&a(e,["parameters","sampleImageSize"],A);const E=r(t,["enhancePrompt"]);return e!==void 0&&E!=null&&a(e,["parameters","enhancePrompt"],E),n}function ip(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const s=r(e,["config"]);return s!=null&&tp(s,n),n}function op(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const s=r(e,["config"]);return s!=null&&np(s,n),n}function sp(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>yp(l))),a(e,["generatedImages"],s)}const o=r(t,["positivePromptSafetyAttributes"]);return o!=null&&a(e,["positivePromptSafetyAttributes"],Tr(o)),e}function rp(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Ct(l))),a(e,["generatedImages"],s)}const o=r(t,["positivePromptSafetyAttributes"]);return o!=null&&a(e,["positivePromptSafetyAttributes"],Er(o)),e}function lp(t,e){const n={},i=r(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i),r(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(r(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=r(t,["durationSeconds"]);if(e!==void 0&&o!=null&&a(e,["parameters","durationSeconds"],o),r(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=r(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const l=r(t,["resolution"]);e!==void 0&&l!=null&&a(e,["parameters","resolution"],l);const u=r(t,["personGeneration"]);if(e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u),r(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=r(t,["negativePrompt"]);e!==void 0&&c!=null&&a(e,["parameters","negativePrompt"],c);const d=r(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&a(e,["parameters","enhancePrompt"],d),r(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=r(t,["lastFrame"]);e!==void 0&&f!=null&&a(e,["instances[0]","lastFrame"],St(f));const h=r(t,["referenceImages"]);if(e!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>um(m))),a(e,["instances[0]","referenceImages"],p)}if(r(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(r(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ap(t,e){const n={},i=r(t,["numberOfVideos"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const o=r(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const s=r(t,["fps"]);e!==void 0&&s!=null&&a(e,["parameters","fps"],s);const l=r(t,["durationSeconds"]);e!==void 0&&l!=null&&a(e,["parameters","durationSeconds"],l);const u=r(t,["seed"]);e!==void 0&&u!=null&&a(e,["parameters","seed"],u);const c=r(t,["aspectRatio"]);e!==void 0&&c!=null&&a(e,["parameters","aspectRatio"],c);const d=r(t,["resolution"]);e!==void 0&&d!=null&&a(e,["parameters","resolution"],d);const f=r(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const h=r(t,["pubsubTopic"]);e!==void 0&&h!=null&&a(e,["parameters","pubsubTopic"],h);const p=r(t,["negativePrompt"]);e!==void 0&&p!=null&&a(e,["parameters","negativePrompt"],p);const m=r(t,["enhancePrompt"]);e!==void 0&&m!=null&&a(e,["parameters","enhancePrompt"],m);const g=r(t,["generateAudio"]);e!==void 0&&g!=null&&a(e,["parameters","generateAudio"],g);const v=r(t,["lastFrame"]);e!==void 0&&v!=null&&a(e,["instances[0]","lastFrame"],ie(v));const y=r(t,["referenceImages"]);if(e!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(_=>cm(_))),a(e,["instances[0]","referenceImages"],E)}const T=r(t,["mask"]);e!==void 0&&T!=null&&a(e,["instances[0]","mask"],am(T));const A=r(t,["compressionQuality"]);return e!==void 0&&A!=null&&a(e,["parameters","compressionQuality"],A),n}function up(t){const e={},n=r(t,["name"]);n!=null&&a(e,["name"],n);const i=r(t,["metadata"]);i!=null&&a(e,["metadata"],i);const o=r(t,["done"]);o!=null&&a(e,["done"],o);const s=r(t,["error"]);s!=null&&a(e,["error"],s);const l=r(t,["response","generateVideoResponse"]);return l!=null&&a(e,["response"],hp(l)),e}function cp(t){const e={},n=r(t,["name"]);n!=null&&a(e,["name"],n);const i=r(t,["metadata"]);i!=null&&a(e,["metadata"],i);const o=r(t,["done"]);o!=null&&a(e,["done"],o);const s=r(t,["error"]);s!=null&&a(e,["error"],s);const l=r(t,["response"]);return l!=null&&a(e,["response"],pp(l)),e}function dp(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const s=r(e,["image"]);s!=null&&a(n,["instances[0]","image"],St(s));const l=r(e,["video"]);l!=null&&a(n,["instances[0]","video"],Sr(l));const u=r(e,["source"]);u!=null&&mp(u,n);const c=r(e,["config"]);return c!=null&&lp(c,n),n}function fp(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["prompt"]);o!=null&&a(n,["instances[0]","prompt"],o);const s=r(e,["image"]);s!=null&&a(n,["instances[0]","image"],ie(s));const l=r(e,["video"]);l!=null&&a(n,["instances[0]","video"],Ar(l));const u=r(e,["source"]);u!=null&&gp(u,n);const c=r(e,["config"]);return c!=null&&ap(c,n),n}function hp(t){const e={},n=r(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Tp(l))),a(e,["generatedVideos"],s)}const i=r(t,["raiMediaFilteredCount"]);i!=null&&a(e,["raiMediaFilteredCount"],i);const o=r(t,["raiMediaFilteredReasons"]);return o!=null&&a(e,["raiMediaFilteredReasons"],o),e}function pp(t){const e={},n=r(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Ep(l))),a(e,["generatedVideos"],s)}const i=r(t,["raiMediaFilteredCount"]);i!=null&&a(e,["raiMediaFilteredCount"],i);const o=r(t,["raiMediaFilteredReasons"]);return o!=null&&a(e,["raiMediaFilteredReasons"],o),e}function mp(t,e){const n={},i=r(t,["prompt"]);e!==void 0&&i!=null&&a(e,["instances[0]","prompt"],i);const o=r(t,["image"]);e!==void 0&&o!=null&&a(e,["instances[0]","image"],St(o));const s=r(t,["video"]);return e!==void 0&&s!=null&&a(e,["instances[0]","video"],Sr(s)),n}function gp(t,e){const n={},i=r(t,["prompt"]);e!==void 0&&i!=null&&a(e,["instances[0]","prompt"],i);const o=r(t,["image"]);e!==void 0&&o!=null&&a(e,["instances[0]","image"],ie(o));const s=r(t,["video"]);return e!==void 0&&s!=null&&a(e,["instances[0]","video"],Ar(s)),n}function yp(t){const e={},n=r(t,["_self"]);n!=null&&a(e,["image"],Mp(n));const i=r(t,["raiFilteredReason"]);i!=null&&a(e,["raiFilteredReason"],i);const o=r(t,["_self"]);return o!=null&&a(e,["safetyAttributes"],Tr(o)),e}function Ct(t){const e={},n=r(t,["_self"]);n!=null&&a(e,["image"],vr(n));const i=r(t,["raiFilteredReason"]);i!=null&&a(e,["raiFilteredReason"],i);const o=r(t,["_self"]);o!=null&&a(e,["safetyAttributes"],Er(o));const s=r(t,["prompt"]);return s!=null&&a(e,["enhancedPrompt"],s),e}function vp(t){const e={},n=r(t,["_self"]);n!=null&&a(e,["mask"],vr(n));const i=r(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),a(e,["labels"],o)}return e}function Tp(t){const e={},n=r(t,["video"]);return n!=null&&a(e,["video"],rm(n)),e}function Ep(t){const e={},n=r(t,["_self"]);return n!=null&&a(e,["video"],lm(n)),e}function _p(t){const e={},n=r(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const i=r(t,["responseJsonSchema"]);i!=null&&a(e,["responseJsonSchema"],i);const o=r(t,["audioTimestamp"]);o!=null&&a(e,["audioTimestamp"],o);const s=r(t,["candidateCount"]);s!=null&&a(e,["candidateCount"],s);const l=r(t,["enableAffectiveDialog"]);l!=null&&a(e,["enableAffectiveDialog"],l);const u=r(t,["frequencyPenalty"]);u!=null&&a(e,["frequencyPenalty"],u);const c=r(t,["logprobs"]);c!=null&&a(e,["logprobs"],c);const d=r(t,["maxOutputTokens"]);d!=null&&a(e,["maxOutputTokens"],d);const f=r(t,["mediaResolution"]);f!=null&&a(e,["mediaResolution"],f);const h=r(t,["presencePenalty"]);h!=null&&a(e,["presencePenalty"],h);const p=r(t,["responseLogprobs"]);p!=null&&a(e,["responseLogprobs"],p);const m=r(t,["responseMimeType"]);m!=null&&a(e,["responseMimeType"],m);const g=r(t,["responseModalities"]);g!=null&&a(e,["responseModalities"],g);const v=r(t,["responseSchema"]);v!=null&&a(e,["responseSchema"],v);const y=r(t,["routingConfig"]);y!=null&&a(e,["routingConfig"],y);const T=r(t,["seed"]);T!=null&&a(e,["seed"],T);const A=r(t,["speechConfig"]);A!=null&&a(e,["speechConfig"],_r(A));const E=r(t,["stopSequences"]);E!=null&&a(e,["stopSequences"],E);const _=r(t,["temperature"]);_!=null&&a(e,["temperature"],_);const C=r(t,["thinkingConfig"]);C!=null&&a(e,["thinkingConfig"],C);const S=r(t,["topK"]);S!=null&&a(e,["topK"],S);const I=r(t,["topP"]);if(I!=null&&a(e,["topP"],I),r(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Cp(t,e){const n={},i=r(e,["model"]);return i!=null&&a(n,["_url","name"],G(t,i)),n}function Sp(t,e){const n={},i=r(e,["model"]);return i!=null&&a(n,["_url","name"],G(t,i)),n}function Ap(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function Ip(t){const e={};if(r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function Rp(t){const e={},n=r(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const i=r(t,["imageSize"]);if(i!=null&&a(e,["imageSize"],i),r(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(r(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function wp(t){const e={},n=r(t,["aspectRatio"]);n!=null&&a(e,["aspectRatio"],n);const i=r(t,["imageSize"]);i!=null&&a(e,["imageSize"],i);const o=r(t,["outputMimeType"]);o!=null&&a(e,["imageOutputOptions","mimeType"],o);const s=r(t,["outputCompressionQuality"]);return s!=null&&a(e,["imageOutputOptions","compressionQuality"],s),e}function Mp(t){const e={},n=r(t,["bytesBase64Encoded"]);n!=null&&a(e,["imageBytes"],de(n));const i=r(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function vr(t){const e={},n=r(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const i=r(t,["bytesBase64Encoded"]);i!=null&&a(e,["imageBytes"],de(i));const o=r(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function St(t){const e={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=r(t,["imageBytes"]);n!=null&&a(e,["bytesBase64Encoded"],de(n));const i=r(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function ie(t){const e={},n=r(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const i=r(t,["imageBytes"]);i!=null&&a(e,["bytesBase64Encoded"],de(i));const o=r(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Pp(t,e,n){const i={},o=r(e,["pageSize"]);n!==void 0&&o!=null&&a(n,["_query","pageSize"],o);const s=r(e,["pageToken"]);n!==void 0&&s!=null&&a(n,["_query","pageToken"],s);const l=r(e,["filter"]);n!==void 0&&l!=null&&a(n,["_query","filter"],l);const u=r(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],cr(t,u)),i}function xp(t,e,n){const i={},o=r(e,["pageSize"]);n!==void 0&&o!=null&&a(n,["_query","pageSize"],o);const s=r(e,["pageToken"]);n!==void 0&&s!=null&&a(n,["_query","pageToken"],s);const l=r(e,["filter"]);n!==void 0&&l!=null&&a(n,["_query","filter"],l);const u=r(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],cr(t,u)),i}function Np(t,e){const n={},i=r(e,["config"]);return i!=null&&Pp(t,i,n),n}function Dp(t,e){const n={},i=r(e,["config"]);return i!=null&&xp(t,i,n),n}function Fp(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=r(t,["_self"]);if(o!=null){let s=dr(o);Array.isArray(s)&&(s=s.map(l=>ln(l))),a(e,["models"],s)}return e}function Up(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=r(t,["_self"]);if(o!=null){let s=dr(o);Array.isArray(s)&&(s=s.map(l=>an(l))),a(e,["models"],s)}return e}function kp(t){const e={},n=r(t,["maskMode"]);n!=null&&a(e,["maskMode"],n);const i=r(t,["segmentationClasses"]);i!=null&&a(e,["maskClasses"],i);const o=r(t,["maskDilation"]);return o!=null&&a(e,["dilation"],o),e}function ln(t){const e={},n=r(t,["name"]);n!=null&&a(e,["name"],n);const i=r(t,["displayName"]);i!=null&&a(e,["displayName"],i);const o=r(t,["description"]);o!=null&&a(e,["description"],o);const s=r(t,["version"]);s!=null&&a(e,["version"],s);const l=r(t,["_self"]);l!=null&&a(e,["tunedModelInfo"],Qp(l));const u=r(t,["inputTokenLimit"]);u!=null&&a(e,["inputTokenLimit"],u);const c=r(t,["outputTokenLimit"]);c!=null&&a(e,["outputTokenLimit"],c);const d=r(t,["supportedGenerationMethods"]);d!=null&&a(e,["supportedActions"],d);const f=r(t,["temperature"]);f!=null&&a(e,["temperature"],f);const h=r(t,["maxTemperature"]);h!=null&&a(e,["maxTemperature"],h);const p=r(t,["topP"]);p!=null&&a(e,["topP"],p);const m=r(t,["topK"]);m!=null&&a(e,["topK"],m);const g=r(t,["thinking"]);return g!=null&&a(e,["thinking"],g),e}function an(t){const e={},n=r(t,["name"]);n!=null&&a(e,["name"],n);const i=r(t,["displayName"]);i!=null&&a(e,["displayName"],i);const o=r(t,["description"]);o!=null&&a(e,["description"],o);const s=r(t,["versionId"]);s!=null&&a(e,["version"],s);const l=r(t,["deployedModels"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>Yh(p))),a(e,["endpoints"],h)}const u=r(t,["labels"]);u!=null&&a(e,["labels"],u);const c=r(t,["_self"]);c!=null&&a(e,["tunedModelInfo"],Zp(c));const d=r(t,["defaultCheckpointId"]);d!=null&&a(e,["defaultCheckpointId"],d);const f=r(t,["checkpoints"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(p=>p)),a(e,["checkpoints"],h)}return e}function Lp(t){const e={},n=r(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const i=r(t,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const o=r(t,["executableCode"]);o!=null&&a(e,["executableCode"],o);const s=r(t,["fileData"]);s!=null&&a(e,["fileData"],Kh(s));const l=r(t,["functionCall"]);l!=null&&a(e,["functionCall"],Xh(l));const u=r(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=r(t,["inlineData"]);c!=null&&a(e,["inlineData"],_h(c));const d=r(t,["text"]);d!=null&&a(e,["text"],d);const f=r(t,["thought"]);f!=null&&a(e,["thought"],f);const h=r(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const p=r(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function bp(t){const e={},n=r(t,["productImage"]);return n!=null&&a(e,["image"],ie(n)),e}function Vp(t,e){const n={},i=r(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const o=r(t,["baseSteps"]);e!==void 0&&o!=null&&a(e,["parameters","baseSteps"],o);const s=r(t,["outputGcsUri"]);e!==void 0&&s!=null&&a(e,["parameters","storageUri"],s);const l=r(t,["seed"]);e!==void 0&&l!=null&&a(e,["parameters","seed"],l);const u=r(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&a(e,["parameters","safetySetting"],u);const c=r(t,["personGeneration"]);e!==void 0&&c!=null&&a(e,["parameters","personGeneration"],c);const d=r(t,["addWatermark"]);e!==void 0&&d!=null&&a(e,["parameters","addWatermark"],d);const f=r(t,["outputMimeType"]);e!==void 0&&f!=null&&a(e,["parameters","outputOptions","mimeType"],f);const h=r(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&a(e,["parameters","outputOptions","compressionQuality"],h);const p=r(t,["enhancePrompt"]);e!==void 0&&p!=null&&a(e,["parameters","enhancePrompt"],p);const m=r(t,["labels"]);return e!==void 0&&m!=null&&a(e,["labels"],m),n}function Gp(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["source"]);o!=null&&Hp(o,n);const s=r(e,["config"]);return s!=null&&Vp(s,n),n}function qp(t){const e={},n=r(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Ct(o))),a(e,["generatedImages"],i)}return e}function Hp(t,e){const n={},i=r(t,["prompt"]);e!==void 0&&i!=null&&a(e,["instances[0]","prompt"],i);const o=r(t,["personImage"]);e!==void 0&&o!=null&&a(e,["instances[0]","personImage","image"],ie(o));const s=r(t,["productImages"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>bp(u))),a(e,["instances[0]","productImages"],l)}return n}function Bp(t){const e={},n=r(t,["referenceImage"]);n!=null&&a(e,["referenceImage"],ie(n));const i=r(t,["referenceId"]);i!=null&&a(e,["referenceId"],i);const o=r(t,["referenceType"]);o!=null&&a(e,["referenceType"],o);const s=r(t,["maskImageConfig"]);s!=null&&a(e,["maskImageConfig"],kp(s));const l=r(t,["controlImageConfig"]);l!=null&&a(e,["controlImageConfig"],Mh(l));const u=r(t,["styleImageConfig"]);u!=null&&a(e,["styleImageConfig"],u);const c=r(t,["subjectImageConfig"]);return c!=null&&a(e,["subjectImageConfig"],c),e}function Tr(t){const e={},n=r(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const i=r(t,["safetyAttributes","scores"]);i!=null&&a(e,["scores"],i);const o=r(t,["contentType"]);return o!=null&&a(e,["contentType"],o),e}function Er(t){const e={},n=r(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const i=r(t,["safetyAttributes","scores"]);i!=null&&a(e,["scores"],i);const o=r(t,["contentType"]);return o!=null&&a(e,["contentType"],o),e}function Jp(t){const e={},n=r(t,["category"]);if(n!=null&&a(e,["category"],n),r(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=r(t,["threshold"]);return i!=null&&a(e,["threshold"],i),e}function $p(t){const e={},n=r(t,["image"]);return n!=null&&a(e,["image"],ie(n)),e}function Op(t,e){const n={},i=r(t,["mode"]);e!==void 0&&i!=null&&a(e,["parameters","mode"],i);const o=r(t,["maxPredictions"]);e!==void 0&&o!=null&&a(e,["parameters","maxPredictions"],o);const s=r(t,["confidenceThreshold"]);e!==void 0&&s!=null&&a(e,["parameters","confidenceThreshold"],s);const l=r(t,["maskDilation"]);e!==void 0&&l!=null&&a(e,["parameters","maskDilation"],l);const u=r(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&a(e,["parameters","binaryColorThreshold"],u);const c=r(t,["labels"]);return e!==void 0&&c!=null&&a(e,["labels"],c),n}function Wp(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["source"]);o!=null&&Yp(o,n);const s=r(e,["config"]);return s!=null&&Op(s,n),n}function zp(t){const e={},n=r(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>vp(o))),a(e,["generatedMasks"],i)}return e}function Yp(t,e){const n={},i=r(t,["prompt"]);e!==void 0&&i!=null&&a(e,["instances[0]","prompt"],i);const o=r(t,["image"]);e!==void 0&&o!=null&&a(e,["instances[0]","image"],ie(o));const s=r(t,["scribbleImage"]);return e!==void 0&&s!=null&&a(e,["instances[0]","scribble"],$p(s)),n}function _r(t){const e={},n=r(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],n);const i=r(t,["languageCode"]);if(i!=null&&a(e,["languageCode"],i),r(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Kp(t){const e={},n=r(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],Qh(n));const i=r(t,["retrievalConfig"]);return i!=null&&a(e,["retrievalConfig"],i),e}function Xp(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const o=r(t,["computerUse"]);o!=null&&a(e,["computerUse"],o);const s=r(t,["fileSearch"]);s!=null&&a(e,["fileSearch"],s);const l=r(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=r(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],Ap(u));const c=r(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],Ip(c));const d=r(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}function Cr(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>Zh(p))),a(e,["functionDeclarations"],h)}const i=r(t,["retrieval"]);i!=null&&a(e,["retrieval"],i);const o=r(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],o);const s=r(t,["computerUse"]);if(s!=null&&a(e,["computerUse"],s),r(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=r(t,["codeExecution"]);l!=null&&a(e,["codeExecution"],l);const u=r(t,["enterpriseWebSearch"]);u!=null&&a(e,["enterpriseWebSearch"],u);const c=r(t,["googleMaps"]);c!=null&&a(e,["googleMaps"],c);const d=r(t,["googleSearch"]);d!=null&&a(e,["googleSearch"],d);const f=r(t,["urlContext"]);return f!=null&&a(e,["urlContext"],f),e}function Qp(t){const e={},n=r(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const i=r(t,["createTime"]);i!=null&&a(e,["createTime"],i);const o=r(t,["updateTime"]);return o!=null&&a(e,["updateTime"],o),e}function Zp(t){const e={},n=r(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(e,["baseModel"],n);const i=r(t,["createTime"]);i!=null&&a(e,["createTime"],i);const o=r(t,["updateTime"]);return o!=null&&a(e,["updateTime"],o),e}function jp(t,e){const n={},i=r(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const o=r(t,["description"]);e!==void 0&&o!=null&&a(e,["description"],o);const s=r(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&a(e,["defaultCheckpointId"],s),n}function em(t,e){const n={},i=r(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const o=r(t,["description"]);e!==void 0&&o!=null&&a(e,["description"],o);const s=r(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&a(e,["defaultCheckpointId"],s),n}function tm(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","name"],G(t,i));const o=r(e,["config"]);return o!=null&&jp(o,n),n}function nm(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["config"]);return o!=null&&em(o,n),n}function im(t,e){const n={},i=r(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const o=r(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&a(e,["parameters","safetySetting"],o);const s=r(t,["personGeneration"]);e!==void 0&&s!=null&&a(e,["parameters","personGeneration"],s);const l=r(t,["includeRaiReason"]);e!==void 0&&l!=null&&a(e,["parameters","includeRaiReason"],l);const u=r(t,["outputMimeType"]);e!==void 0&&u!=null&&a(e,["parameters","outputOptions","mimeType"],u);const c=r(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&a(e,["parameters","outputOptions","compressionQuality"],c);const d=r(t,["enhanceInputImage"]);e!==void 0&&d!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=r(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const h=r(t,["labels"]);e!==void 0&&h!=null&&a(e,["labels"],h);const p=r(t,["numberOfImages"]);e!==void 0&&p!=null&&a(e,["parameters","sampleCount"],p);const m=r(t,["mode"]);return e!==void 0&&m!=null&&a(e,["parameters","mode"],m),n}function om(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["_url","model"],G(t,i));const o=r(e,["image"]);o!=null&&a(n,["instances[0]","image"],ie(o));const s=r(e,["upscaleFactor"]);s!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],s);const l=r(e,["config"]);return l!=null&&im(l,n),n}function sm(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ct(s))),a(e,["generatedImages"],o)}return e}function rm(t){const e={},n=r(t,["uri"]);n!=null&&a(e,["uri"],n);const i=r(t,["encodedVideo"]);i!=null&&a(e,["videoBytes"],de(i));const o=r(t,["encoding"]);return o!=null&&a(e,["mimeType"],o),e}function lm(t){const e={},n=r(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const i=r(t,["bytesBase64Encoded"]);i!=null&&a(e,["videoBytes"],de(i));const o=r(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function am(t){const e={},n=r(t,["image"]);n!=null&&a(e,["_self"],ie(n));const i=r(t,["maskMode"]);return i!=null&&a(e,["maskMode"],i),e}function um(t){const e={},n=r(t,["image"]);n!=null&&a(e,["image"],St(n));const i=r(t,["referenceType"]);return i!=null&&a(e,["referenceType"],i),e}function cm(t){const e={},n=r(t,["image"]);n!=null&&a(e,["image"],ie(n));const i=r(t,["referenceType"]);return i!=null&&a(e,["referenceType"],i),e}function Sr(t){const e={},n=r(t,["uri"]);n!=null&&a(e,["uri"],n);const i=r(t,["videoBytes"]);i!=null&&a(e,["encodedVideo"],de(i));const o=r(t,["mimeType"]);return o!=null&&a(e,["encoding"],o),e}function Ar(t){const e={},n=r(t,["uri"]);n!=null&&a(e,["gcsUri"],n);const i=r(t,["videoBytes"]);i!=null&&a(e,["bytesBase64Encoded"],de(i));const o=r(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dm(t,e){const n={},i=r(t,["displayName"]);return e!==void 0&&i!=null&&a(e,["displayName"],i),n}function fm(t){const e={},n=r(t,["config"]);return n!=null&&dm(n,e),e}function hm(t,e){const n={},i=r(t,["force"]);return e!==void 0&&i!=null&&a(e,["_query","force"],i),n}function pm(t){const e={},n=r(t,["name"]);n!=null&&a(e,["_url","name"],n);const i=r(t,["config"]);return i!=null&&hm(i,e),e}function mm(t){const e={},n=r(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function gm(t,e){const n={},i=r(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>l)),a(e,["customMetadata"],s)}const o=r(t,["chunkingConfig"]);return e!==void 0&&o!=null&&a(e,["chunkingConfig"],o),n}function ym(t){const e={},n=r(t,["name"]);n!=null&&a(e,["name"],n);const i=r(t,["metadata"]);i!=null&&a(e,["metadata"],i);const o=r(t,["done"]);o!=null&&a(e,["done"],o);const s=r(t,["error"]);s!=null&&a(e,["error"],s);const l=r(t,["response"]);return l!=null&&a(e,["response"],Tm(l)),e}function vm(t){const e={},n=r(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const i=r(t,["fileName"]);i!=null&&a(e,["fileName"],i);const o=r(t,["config"]);return o!=null&&gm(o,e),e}function Tm(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["parent"]);i!=null&&a(e,["parent"],i);const o=r(t,["documentName"]);return o!=null&&a(e,["documentName"],o),e}function Em(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);return e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),n}function _m(t){const e={},n=r(t,["config"]);return n!=null&&Em(n,e),e}function Cm(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=r(t,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),a(e,["fileSearchStores"],s)}return e}function Ir(t,e){const n={},i=r(t,["mimeType"]);e!==void 0&&i!=null&&a(e,["mimeType"],i);const o=r(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const s=r(t,["customMetadata"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(c=>c)),a(e,["customMetadata"],u)}const l=r(t,["chunkingConfig"]);return e!==void 0&&l!=null&&a(e,["chunkingConfig"],l),n}function Sm(t){const e={},n=r(t,["fileSearchStoreName"]);n!=null&&a(e,["_url","file_search_store_name"],n);const i=r(t,["config"]);return i!=null&&Ir(i,e),e}function Am(t){const e={},n=r(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Im="Content-Type",Rm="X-Server-Timeout",wm="User-Agent",un="x-goog-api-client",Mm="1.33.0",Pm=`google-genai-sdk/${Mm}`,xm="v1beta1",Nm="v1beta";class Dm{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:xm,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Nm,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[l,u]of Object.entries(e.queryParams))o.searchParams.append(l,String(u));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.unaryApiCall(o,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,s]of Object.entries(n))typeof s=="object"?i[o]=Object.assign(Object.assign({},i[o]),s):s!==void 0&&(i[o]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.streamApiCall(o,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,o){if(n&&n.timeout||o){const s=new AbortController,l=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>s.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=l}return n&&n.extraBody!==null&&Fm(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Yo(o),new on(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await Yo(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return te(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let l="";const u="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:f}=yield D(o.read());if(d){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=s.decode(f,{stream:!0});try{const g=JSON.parse(h);if("error"in g){const v=JSON.parse(JSON.stringify(g.error)),y=v.status,T=v.code,A=`got status: ${y}. ${JSON.stringify(g)}`;if(T>=400&&T<600)throw new Et({message:A,status:T})}}catch(g){if(g.name==="ApiError")throw g}l+=h;let p=-1,m=0;for(;;){p=-1,m=0;for(const y of c){const T=l.indexOf(y);T!==-1&&(p===-1||T<p)&&(p=T,m=y.length)}if(p===-1)break;const g=l.substring(0,p);l=l.substring(p+m);const v=g.trim();if(v.startsWith(u)){const y=v.substring(u.length).trim();try{const T=new Response(y,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield D(new on(T))}catch(T){throw new Error(`exception parsing stream chunk ${y}. ${T}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=Pm+" "+this.clientOptions.userAgentExtra;return e[wm]=n,e[un]=n,e[Im]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[o,s]of Object.entries(e.headers))i.append(o,s);e.timeout&&e.timeout>0&&i.append(Rm,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const s=this.clientOptions.uploader,l=await s.stat(e);o.sizeBytes=String(l.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;const c={file:o},d=this.getFileName(e),f=P("upload/v1beta/files",c._url),h=await this.fetchUploadUrl(f,o.sizeBytes,o.mimeType,d,c,n==null?void 0:n.httpOptions);return s.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,i){var o;const s=this.clientOptions.uploader,l=await s.stat(n),u=String(l.size),c=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),h={};i!=null&&Ir(i,h);const p=await this.fetchUploadUrl(d,u,c,f,h,i==null?void 0:i.httpOptions);return s.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,o,s,l){var u;let c={};l?c=l:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const d=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=d==null?void 0:d.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Yo(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new Et({message:o,status:n}):new Error(o)}}function Fm(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,l){const u=Object.assign({},s);for(const c in l)if(Object.prototype.hasOwnProperty.call(l,c)){const d=l[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=i(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Um="mcp_used/unknown";let km=!1;function Rr(t){for(const e of t)if(Lm(e)||typeof e=="object"&&"inputSchema"in e)return!0;return km}function wr(t){var e;const n=(e=t[un])!==null&&e!==void 0?e:"";t[un]=(n+` ${Um}`).trimStart()}function Lm(t){return t!==null&&typeof t=="object"&&t instanceof bn}function bm(t){return te(this,arguments,function*(n,i=100){let o,s=0;for(;s<i;){const l=yield D(n.listTools({cursor:o}));for(const u of l.tools)yield yield D(u),s++;if(!l.nextCursor)break;o=l.nextCursor}})}class bn{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new bn(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const s={},l=[];for(const f of this.mcpClients)try{for(var u=!0,c=(n=void 0,ne(bm(f))),d;d=await c.next(),e=d.done,!e;u=!0){o=d.value,u=!1;const h=o;l.push(h);const p=h.name;if(s[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);s[p]=f}}catch(h){n={error:h}}finally{try{!u&&!e&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),pd(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const l=await o.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Vm(t,e,n){const i=new rd;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),e(i)}class Gm{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),l=Bm(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(E=>{d=E}),h=e.callbacks,p=function(){d({})},m=this.apiClient,g={onopen:p,onmessage:E=>{Vm(m,h.onmessage,E)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(E){},onclose:(i=h==null?void 0:h.onclose)!==null&&i!==void 0?i:function(E){}},v=this.webSocketFactory.create(c,Hm(l),g);v.connect(),await f;const A={setup:{model:G(this.apiClient,e.model)}};return v.send(JSON.stringify(A)),new qm(v,this.apiClient)}}class qm{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=fh(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=dh(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Se.PLAY)}pause(){this.sendPlaybackControl(Se.PAUSE)}stop(){this.sendPlaybackControl(Se.STOP)}resetContext(){this.sendPlaybackControl(Se.RESET_CONTEXT)}close(){this.conn.close()}}function Hm(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Bm(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jm="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function $m(t,e,n){const i=new sd;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const s=JSON.parse(o);if(t.isVertexAI()){const l=mh(s);Object.assign(i,l)}else Object.assign(i,s);e(i)}class Om{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Gm(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,s,l,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&Rr(e.config.tools)&&wr(h);const p=Km(h);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,f);else{const R=this.apiClient.getApiKey();let x="BidiGenerateContent",F="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),x="BidiGenerateContentConstrained",F="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${x}?${F}=${R}`}let m=()=>{};const g=new Promise(R=>{m=R}),v=e.callbacks,y=function(){var R;(R=v==null?void 0:v.onopen)===null||R===void 0||R.call(v),m({})},T=this.apiClient,A={onopen:y,onmessage:R=>{$m(T,v.onmessage,R)},onerror:(n=v==null?void 0:v.onerror)!==null&&n!==void 0?n:function(R){},onclose:(i=v==null?void 0:v.onclose)!==null&&i!==void 0?i:function(R){}},E=this.webSocketFactory.create(f,Ym(p),A);E.connect(),await g;let _=G(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&_.startsWith("publishers/")){const R=this.apiClient.getProject(),x=this.apiClient.getLocation();_=`projects/${R}/locations/${x}/`+_}let C={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ht.AUDIO]}:e.config.responseModalities=[ht.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const S=(u=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[],I=[];for(const R of S)if(this.isCallableTool(R)){const x=R;I.push(await x.tool())}else I.push(R);I.length>0&&(e.config.tools=I);const w={model:_,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?C=ch(this.apiClient,w):C=uh(this.apiClient,w),delete C.config,E.send(JSON.stringify(C)),new zm(E,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Wm={turnComplete:!0};class zm{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=X(n.turns),e.isVertexAI()||(i=i.map(o=>_t(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(Jm)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},Wm),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ph(e)}:n={realtimeInput:hh(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Ym(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Km(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ko=10;function Xo(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const l of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(we(l)){o=!0;break}if(!o)return!0;const s=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function we(t){return"callTool"in t&&typeof t.callTool=="function"}function Xm(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>we(o)))!==null&&i!==void 0?i:!1}function Qo(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,o)=>{if(we(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function Zo(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qm extends se{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,s,l,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Xm(n)||Xo(n.config))return await this.generateContentInternal(c);const d=Qo(n);if(d.length>0){const v=d.map(y=>`tools[${y}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let f,h;const p=X(c.contents),m=(s=(o=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Ko;let g=0;for(;g<m&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const v=f.candidates[0].content,y=[];for(const T of(u=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&u!==void 0?u:[])if(we(T)){const E=await T.callTool(f.functionCalls);y.push(...E)}g++,h={role:"user",parts:y},c.contents=X(c.contents),c.contents.push(v),c.contents.push(h),Zo(c.config)&&(p.push(v),p.push(h))}return Zo(c.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{var i,o,s,l,u;if(this.maybeMoveToResponseJsonSchem(n),Xo(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const c=Qo(n);if(c.length>0){const h=c.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(s=(o=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,f=(u=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let s;const l=[];if(i!=null&&i.generatedImages)for(const c of i.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((o=c==null?void 0:c.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:l.push(c);let u;return s?u={generatedImages:l,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Te(oe.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(l),l)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,s,l,u,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(s=n.source)===null||s===void 0?void 0:s.video)===null||l===void 0)&&l.uri&&(!((c=(u=n.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const l=await Promise.all(s.map(async c=>we(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(u.config.tools=l,e.config&&e.config.tools&&Rr(e.config.tools)){const c=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),wr(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,i,o;const s=new Map;for(const l of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(we(l)){const u=l,c=await u.tool();for(const d of(o=c.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(s.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);s.set(d.name,u)}}return s}async processAfcStream(e){var n,i,o;const s=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Ko;let l=!1,u=0;const c=await this.initAfcToolsMap(e);return(function(d,f,h){return te(this,arguments,function*(){for(var p,m,g,v,y,T;u<s;){l&&(u++,l=!1);const C=yield D(d.processParamsMaybeAddMcpUsage(h)),S=yield D(d.generateContentStreamInternal(C)),I=[],w=[];try{for(var A=!0,E=(m=void 0,ne(S)),_;_=yield D(E.next()),p=_.done,!p;A=!0){v=_.value,A=!1;const R=v;if(yield yield D(R),R.candidates&&(!((y=R.candidates[0])===null||y===void 0)&&y.content)){w.push(R.candidates[0].content);for(const x of(T=R.candidates[0].content.parts)!==null&&T!==void 0?T:[])if(u<s&&x.functionCall){if(!x.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(x.functionCall.name)){const F=yield D(f.get(x.functionCall.name).callTool([x.functionCall]));I.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${x.functionCall.name}`)}}}}catch(R){m={error:R}}finally{try{!A&&!p&&(g=E.return)&&(yield D(g.call(E)))}finally{if(m)throw m.error}}if(I.length>0){l=!0;const R=new ke;R.candidates=[{content:{role:"user",parts:I}}],yield yield D(R);const x=[];x.push(...w),x.push({role:"user",parts:I});const F=X(h.contents).concat(x);h.contents=F}else break}})})(this,c,e)}async generateContentInternal(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Oo(this.apiClient,e);return u=P("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=zo(f),p=new ke;return Object.assign(p,h),p})}else{const d=$o(this.apiClient,e);return u=P("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=Wo(f),p=new ke;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Oo(this.apiClient,e);return u=P("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(h){return te(this,arguments,function*(){var p,m,g,v;try{for(var y=!0,T=ne(h),A;A=yield D(T.next()),p=A.done,!p;y=!0){v=A.value,y=!1;const E=v,_=zo(yield D(E.json()));_.sdkHttpResponse={headers:E.headers};const C=new ke;Object.assign(C,_),yield yield D(C)}}catch(E){m={error:E}}finally{try{!y&&!p&&(g=T.return)&&(yield D(g.call(T)))}finally{if(m)throw m.error}}})})}else{const d=$o(this.apiClient,e);return u=P("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),l.then(function(h){return te(this,arguments,function*(){var p,m,g,v;try{for(var y=!0,T=ne(h),A;A=yield D(T.next()),p=A.done,!p;y=!0){v=A.value,y=!1;const E=v,_=Wo(yield D(E.json()));_.sdkHttpResponse={headers:E.headers};const C=new ke;Object.assign(C,_),yield yield D(C)}}catch(E){m={error:E}}finally{try{!y&&!p&&(g=T.return)&&(yield D(g.call(T)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Oh(this.apiClient,e);return u=P("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=zh(f),p=new wo;return Object.assign(p,h),p})}else{const d=$h(this.apiClient,e);return u=P("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=Wh(f),p=new wo;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=op(this.apiClient,e);return u=P("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=rp(f),p=new Mo;return Object.assign(p,h),p})}else{const d=ip(this.apiClient,e);return u=P("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=sp(f),p=new Mo;return Object.assign(p,h),p})}}async editImageInternal(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=qh(this.apiClient,e);return s=P("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=Hh(c),f=new Yc;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=om(this.apiClient,e);return s=P("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=sm(c),f=new Kc;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Gp(this.apiClient,e);return s=P("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=qp(c),f=new Xc;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Wp(this.apiClient,e);return s=P("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=zp(c),f=new Qc;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Sp(this.apiClient,e);return u=P("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>an(f))}else{const d=Cp(this.apiClient,e);return u=P("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>ln(f))}}async listInternal(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Dp(this.apiClient,e);return u=P("{models_url}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=Up(f),p=new Po;return Object.assign(p,h),p})}else{const d=Np(this.apiClient,e);return u=P("{models_url}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=Fp(f),p=new Po;return Object.assign(p,h),p})}}async update(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=nm(this.apiClient,e);return u=P("{model}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>an(f))}else{const d=tm(this.apiClient,e);return u=P("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>ln(f))}}async delete(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Lh(this.apiClient,e);return u=P("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=Vh(f),p=new xo;return Object.assign(p,h),p})}else{const d=kh(this.apiClient,e);return u=P("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=bh(f),p=new xo;return Object.assign(p,h),p})}}async countTokens(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Dh(this.apiClient,e);return u=P("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=Uh(f),p=new No;return Object.assign(p,h),p})}else{const d=Nh(this.apiClient,e);return u=P("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=Fh(f),p=new No;return Object.assign(p,h),p})}}async computeTokens(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Ah(this.apiClient,e);return s=P("{model}:computeTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=Ih(c),f=new Zc;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=fp(this.apiClient,e);return u=P("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l.then(f=>{const h=cp(f),p=new pt;return Object.assign(p,h),p})}else{const d=dp(this.apiClient,e);return u=P("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l.then(f=>{const h=up(f),p=new pt;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zm extends se{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=Bc(e);return u=P("{operationName}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),l}else{const d=Hc(e);return u=P("{operationName}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),l}}async fetchPredictVideosOperationInternal(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=Uc(e);return s=P("{resourceName}:fetchPredictOperation",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jm(t){const e={},n=r(t,["data"]);if(n!=null&&a(e,["data"],n),r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=r(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function eg(t){const e={},n=r(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ug(s))),a(e,["parts"],o)}const i=r(t,["role"]);return i!=null&&a(e,["role"],i),e}function tg(t,e,n){const i={},o=r(e,["expireTime"]);n!==void 0&&o!=null&&a(n,["expireTime"],o);const s=r(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&a(n,["newSessionExpireTime"],s);const l=r(e,["uses"]);n!==void 0&&l!=null&&a(n,["uses"],l);const u=r(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],ag(t,u));const c=r(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&a(n,["fieldMask"],c),i}function ng(t,e){const n={},i=r(e,["config"]);return i!=null&&a(n,["config"],tg(t,i,n)),n}function ig(t){const e={};if(r(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=r(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const i=r(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function og(t){const e={},n=r(t,["id"]);n!=null&&a(e,["id"],n);const i=r(t,["args"]);i!=null&&a(e,["args"],i);const o=r(t,["name"]);if(o!=null&&a(e,["name"],o),r(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(r(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sg(t){const e={};if(r(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=r(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function rg(t){const e={};if(r(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(r(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=r(t,["timeRangeFilter"]);return n!=null&&a(e,["timeRangeFilter"],n),e}function lg(t,e){const n={},i=r(t,["generationConfig"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig"],i);const o=r(t,["responseModalities"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","responseModalities"],o);const s=r(t,["temperature"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","temperature"],s);const l=r(t,["topP"]);e!==void 0&&l!=null&&a(e,["setup","generationConfig","topP"],l);const u=r(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=r(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=r(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=r(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const h=r(t,["speechConfig"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","speechConfig"],Ln(h));const p=r(t,["thinkingConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","thinkingConfig"],p);const m=r(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=r(t,["systemInstruction"]);e!==void 0&&g!=null&&a(e,["setup","systemInstruction"],eg(W(g)));const v=r(t,["tools"]);if(e!==void 0&&v!=null){let S=Fe(v);Array.isArray(S)&&(S=S.map(I=>dg(De(I)))),a(e,["setup","tools"],S)}const y=r(t,["sessionResumption"]);e!==void 0&&y!=null&&a(e,["setup","sessionResumption"],cg(y));const T=r(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&a(e,["setup","inputAudioTranscription"],T);const A=r(t,["outputAudioTranscription"]);e!==void 0&&A!=null&&a(e,["setup","outputAudioTranscription"],A);const E=r(t,["realtimeInputConfig"]);e!==void 0&&E!=null&&a(e,["setup","realtimeInputConfig"],E);const _=r(t,["contextWindowCompression"]);e!==void 0&&_!=null&&a(e,["setup","contextWindowCompression"],_);const C=r(t,["proactivity"]);if(e!==void 0&&C!=null&&a(e,["setup","proactivity"],C),r(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function ag(t,e){const n={},i=r(e,["model"]);i!=null&&a(n,["setup","model"],G(t,i));const o=r(e,["config"]);return o!=null&&a(n,["config"],lg(o,n)),n}function ug(t){const e={},n=r(t,["mediaResolution"]);n!=null&&a(e,["mediaResolution"],n);const i=r(t,["codeExecutionResult"]);i!=null&&a(e,["codeExecutionResult"],i);const o=r(t,["executableCode"]);o!=null&&a(e,["executableCode"],o);const s=r(t,["fileData"]);s!=null&&a(e,["fileData"],ig(s));const l=r(t,["functionCall"]);l!=null&&a(e,["functionCall"],og(l));const u=r(t,["functionResponse"]);u!=null&&a(e,["functionResponse"],u);const c=r(t,["inlineData"]);c!=null&&a(e,["inlineData"],jm(c));const d=r(t,["text"]);d!=null&&a(e,["text"],d);const f=r(t,["thought"]);f!=null&&a(e,["thought"],f);const h=r(t,["thoughtSignature"]);h!=null&&a(e,["thoughtSignature"],h);const p=r(t,["videoMetadata"]);return p!=null&&a(e,["videoMetadata"],p),e}function cg(t){const e={},n=r(t,["handle"]);if(n!=null&&a(e,["handle"],n),r(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function dg(t){const e={},n=r(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),a(e,["functionDeclarations"],f)}if(r(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=r(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const o=r(t,["computerUse"]);o!=null&&a(e,["computerUse"],o);const s=r(t,["fileSearch"]);s!=null&&a(e,["fileSearch"],s);const l=r(t,["codeExecution"]);if(l!=null&&a(e,["codeExecution"],l),r(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=r(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],sg(u));const c=r(t,["googleSearch"]);c!=null&&a(e,["googleSearch"],rg(c));const d=r(t,["urlContext"]);return d!=null&&a(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fg(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(s=>`${n}.${s}`);e.push(...o)}else e.push(n)}return e.join(",")}function hg(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const s=fg(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];o.length>0&&(u=o.map(d=>l.includes(d)?`generationConfig.${d}`:d));const c=[];s&&c.push(s),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class pg extends se{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=ng(this.apiClient,e);s=P("auth_tokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query;const c=hg(u,e.config);return o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mg(t,e){const n={},i=r(t,["force"]);return e!==void 0&&i!=null&&a(e,["_query","force"],i),n}function gg(t){const e={},n=r(t,["name"]);n!=null&&a(e,["_url","name"],n);const i=r(t,["config"]);return i!=null&&mg(i,e),e}function yg(t){const e={},n=r(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function vg(t,e){const n={},i=r(t,["pageSize"]);e!==void 0&&i!=null&&a(e,["_query","pageSize"],i);const o=r(t,["pageToken"]);return e!==void 0&&o!=null&&a(e,["_query","pageToken"],o),n}function Tg(t){const e={},n=r(t,["parent"]);n!=null&&a(e,["_url","parent"],n);const i=r(t,["config"]);return i!=null&&vg(i,e),e}function Eg(t){const e={},n=r(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const i=r(t,["nextPageToken"]);i!=null&&a(e,["nextPageToken"],i);const o=r(t,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),a(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _g extends se{constructor(e){super(),this.apiClient=e,this.list=async n=>new Te(oe.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=yg(e);return s=P("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=gg(e);o=P("{name}",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Tg(e);return s=P("{parent}/documents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=Eg(c),f=new jc;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cg extends se{constructor(e,n=new _g(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new Te(oe.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fm(e);return s=P("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async get(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=mm(e);return s=P("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=pm(e);o=P("{name}",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=_m(e);return s=P("fileSearchStores",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=Cm(c),f=new ed;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Sm(e);return s=P("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=Am(c),f=new td;return Object.assign(f,d),f})}}async importFile(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=vm(e);return s=P("{file_search_store_name}:importFile",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>{const d=ym(c),f=new Nn;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Mr=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Mr=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const Sg=()=>Mr();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cn(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const dn=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q extends Error{}class Y extends Q{constructor(e,n,i,o){super(`${Y.makeMessage(e,n,i)}`),this.status=e,this.headers=o,this.error=n}static makeMessage(e,n,i){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,i,o){if(!e||!o)return new At({message:i,cause:dn(n)});const s=n;return e===400?new xr(e,s,i,o):e===401?new Nr(e,s,i,o):e===403?new Dr(e,s,i,o):e===404?new Fr(e,s,i,o):e===409?new Ur(e,s,i,o):e===422?new kr(e,s,i,o):e===429?new Lr(e,s,i,o):e>=500?new br(e,s,i,o):new Y(e,s,i,o)}}class fn extends Y{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class At extends Y{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Pr extends At{constructor({message:e}={}){super({message:e??"Request timed out."})}}class xr extends Y{}class Nr extends Y{}class Dr extends Y{}class Fr extends Y{}class Ur extends Y{}class kr extends Y{}class Lr extends Y{}class br extends Y{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ag=/^[a-z][a-z0-9+.-]*:/i,Ig=t=>Ag.test(t);let hn=t=>(hn=Array.isArray,hn(t));const Rg=hn;let wg=Rg;const jo=wg;function Mg(t){if(!t)return!0;for(const e in t)return!1;return!0}function Pg(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const xg=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Q(`${t} must be an integer`);if(e<0)throw new Q(`${t} must be a positive integer`);return e},Ng=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dg=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ee="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fg(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Ug=()=>{var t,e,n,i,o;const s=Fg();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ee,"X-Stainless-OS":ts(Deno.build.os),"X-Stainless-Arch":es(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ee,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ee,"X-Stainless-OS":ts((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":es((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const l=kg();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ee,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ee,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function kg(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const o=i[1]||0,s=i[2]||0,l=i[3]||0;return{browser:e,version:`${o}.${s}.${l}`}}}return null}const es=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",ts=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ze;const Lg=()=>Ze??(Ze=Ug());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bg(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Vr(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Vg(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Vr({start(){},async pull(n){const{done:i,value:o}=await e.next();i?n.close():n.enqueue(o)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Gr(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Gg(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qg=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qr=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Gt(t,e,n){return qr(),new File(t,e??"unknown_file",n)}function Hg(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const Bg=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hr=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Jg=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Hr(t),$g=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Og(t,e,n){if(qr(),t=await t,Jg(t))return t instanceof File?t:Gt([await t.arrayBuffer()],t.name);if($g(t)){const o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Gt(await pn(o),e,n)}const i=await pn(t);if(e||(e=Hg(t)),!(n!=null&&n.type)){const o=i.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return Gt(i,e,n)}async function pn(t){var e,n,i,o,s;let l=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)l.push(t);else if(Hr(t))l.push(t instanceof Blob?t:await t.arrayBuffer());else if(Bg(t))try{for(var u=!0,c=ne(t),d;d=await c.next(),e=d.done,!e;u=!0){o=d.value,u=!1;const f=o;l.push(...await pn(f))}}catch(f){n={error:f}}finally{try{!u&&!e&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}else{const f=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${Wg(t)}`)}return l}function Wg(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Br{constructor(e){this._client=e}}Br._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jr(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ns=Object.freeze(Object.create(null)),zg=(t=Jr)=>(function(n,...i){if(n.length===1)return n[0];let o=!1;const s=[],l=n.reduce((f,h,p)=>{var m,g,v;/[?#]/.test(h)&&(o=!0);const y=i[p];let T=(o?encodeURIComponent:t)(""+y);return p!==i.length&&(y==null||typeof y=="object"&&y.toString===((v=Object.getPrototypeOf((g=Object.getPrototypeOf((m=y.hasOwnProperty)!==null&&m!==void 0?m:ns))!==null&&g!==void 0?g:ns))===null||v===void 0?void 0:v.toString))&&(T=y+"",s.push({start:f.length+h.length,length:T.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),f+h+(p===i.length?"":T)},""),u=l.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(u))!==null;)s.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(s.sort((f,h)=>f.start-h.start),s.length>0){let f=0;const h=s.reduce((p,m)=>{const g=" ".repeat(m.start-f),v="^".repeat(m.length);return f=m.start+m.length,p+g+v},"");throw new Q(`Path parameters result in path with invalid segments:
${s.map(p=>p.error).join(`
`)}
${l}
${h}`)}return l}),je=zg(Jr);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $r extends Br{create(e,n){var i;const{api_version:o=this._client.apiVersion}=e,s=gt(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new Q("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new Q("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(je`/${o}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(je`/${o}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:o=this._client.apiVersion}=n??{};return this._client.post(je`/${o}/interactions/${e}/cancel`,i)}get(e,n={},i){var o;const s=n??{},{api_version:l=this._client.apiVersion}=s,u=gt(s,["api_version"]);return this._client.get(je`/${l}/interactions/${e}`,Object.assign(Object.assign({query:u},i),{stream:(o=n==null?void 0:n.stream)!==null&&o!==void 0?o:!1}))}}$r._key=Object.freeze(["interactions"]);class Or extends $r{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yg(t){let e=0;for(const o of t)e+=o.length;const n=new Uint8Array(e);let i=0;for(const o of t)n.set(o,i),i+=o.length;return n}let et;function Vn(t){let e;return(et??(e=new globalThis.TextEncoder,et=e.encode.bind(e)))(t)}let tt;function is(t){let e;return(tt??(e=new globalThis.TextDecoder,tt=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class It{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Vn(e):e;this.buffer=Yg([this.buffer,n]);const i=[];let o;for(;(o=Kg(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(is(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,l=is(this.buffer.subarray(0,s));i.push(l),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}It.NEWLINE_CHARS=new Set([`
`,"\r"]);It.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Kg(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function Xg(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yt={off:0,error:200,warn:300,info:400,debug:500},os=(t,e,n)=>{if(t){if(Pg(yt,t))return t;z(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(yt))}`)}};function be(){}function nt(t,e,n){return!e||yt[t]>yt[n]?be:e[t].bind(e)}const Qg={error:be,warn:be,info:be,debug:be};let ss=new WeakMap;function z(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return Qg;const o=ss.get(n);if(o&&o[0]===i)return o[1];const s={error:nt("error",n,i),warn:nt("warn",n,i),info:nt("info",n,i),debug:nt("debug",n,i)};return ss.set(n,[i,s]),s}const he=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ae{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let o=!1;const s=i?z(i):console;function l(){return te(this,arguments,function*(){var c,d,f,h;if(o)throw new Q("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let p=!1;try{try{for(var m=!0,g=ne(Zg(e,n)),v;v=yield D(g.next()),c=v.done,!c;m=!0){h=v.value,m=!1;const y=h;if(!p)if(y.data.startsWith("[DONE]")){p=!0;continue}else try{yield yield D(JSON.parse(y.data))}catch(T){throw s.error("Could not parse message into JSON:",y.data),s.error("From chunk:",y.raw),T}}}catch(y){d={error:y}}finally{try{!m&&!c&&(f=g.return)&&(yield D(f.call(g)))}finally{if(d)throw d.error}}p=!0}catch(y){if(cn(y))return yield D(void 0);throw y}finally{p||n.abort()}})}return new Ae(l,n,i)}static fromReadableStream(e,n,i){let o=!1;function s(){return te(this,arguments,function*(){var c,d,f,h;const p=new It,m=Gr(e);try{for(var g=!0,v=ne(m),y;y=yield D(v.next()),c=y.done,!c;g=!0){h=y.value,g=!1;const T=h;for(const A of p.decode(T))yield yield D(A)}}catch(T){d={error:T}}finally{try{!g&&!c&&(f=v.return)&&(yield D(f.call(v)))}finally{if(d)throw d.error}}for(const T of p.flush())yield yield D(T)})}function l(){return te(this,arguments,function*(){var c,d,f,h;if(o)throw new Q("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let p=!1;try{try{for(var m=!0,g=ne(s()),v;v=yield D(g.next()),c=v.done,!c;m=!0){h=v.value,m=!1;const y=h;p||y&&(yield yield D(JSON.parse(y)))}}catch(y){d={error:y}}finally{try{!m&&!c&&(f=g.return)&&(yield D(f.call(g)))}finally{if(d)throw d.error}}p=!0}catch(y){if(cn(y))return yield D(void 0);throw y}finally{p||n.abort()}})}return new Ae(l,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),o=s=>({next:()=>{if(s.length===0){const l=i.next();e.push(l),n.push(l)}return s.shift()}});return[new Ae(()=>o(e),this.controller,this.client),new Ae(()=>o(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Vr({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:s}=await n.next();if(s)return i.close();const l=Vn(JSON.stringify(o)+`
`);i.enqueue(l)}catch(o){i.error(o)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function Zg(t,e){return te(this,arguments,function*(){var i,o,s,l;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Q("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Q("Attempted to iterate over a response with no body");const u=new ey,c=new It,d=Gr(t.body);try{for(var f=!0,h=ne(jg(d)),p;p=yield D(h.next()),i=p.done,!i;f=!0){l=p.value,f=!1;const m=l;for(const g of c.decode(m)){const v=u.decode(g);v&&(yield yield D(v))}}}catch(m){o={error:m}}finally{try{!f&&!i&&(s=h.return)&&(yield D(s.call(h)))}finally{if(o)throw o.error}}for(const m of c.flush()){const g=u.decode(m);g&&(yield yield D(g))}})}function jg(t){return te(this,arguments,function*(){var n,i,o,s;let l=new Uint8Array;try{for(var u=!0,c=ne(t),d;d=yield D(c.next()),n=d.done,!n;u=!0){s=d.value,u=!1;const f=s;if(f==null)continue;const h=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?Vn(f):f;let p=new Uint8Array(l.length+h.length);p.set(l),p.set(h,l.length),l=p;let m;for(;(m=Xg(l))!==-1;)yield yield D(l.slice(0,m)),l=l.slice(m)}}catch(f){i={error:f}}finally{try{!u&&!n&&(o=c.return)&&(yield D(o.call(c)))}finally{if(i)throw i.error}}l.length>0&&(yield yield D(l))})}class ey{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,o]=ty(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function ty(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ny(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:s}=e,l=await(async()=>{var u;if(e.options.stream)return z(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ae.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),d=(u=c==null?void 0:c.split(";")[0])===null||u===void 0?void 0:u.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?await n.json():await n.text()})();return z(t).debug(`[${i}] response parsed`,he({retryOfRequestLogID:o,url:n.url,status:n.status,body:l,durationMs:Date.now()-s})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gn extends Promise{constructor(e,n,i=ny){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Gn(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wr=Symbol("brand.privateNullableHeaders");function*iy(t){if(!t)return;if(Wr in t){const{values:i,nulls:o}=t;yield*i.entries();for(const s of o)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():jo(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const s=jo(i[1])?i[1]:[i[1]];let l=!1;for(const u of s)u!==void 0&&(e&&!l&&(l=!0,yield[o,null]),yield[o,u])}}const qt=t=>{const e=new Headers,n=new Set;for(const i of t){const o=new Set;for(const[s,l]of iy(i)){const u=s.toLowerCase();o.has(u)||(e.delete(s),o.add(u)),l===null?(e.delete(s),n.add(u)):(e.append(s,l),n.delete(u))}}return{[Wr]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ht=t=>{var e,n,i,o,s,l;if(typeof globalThis.process<"u")return(i=(n=(e=Mc)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(l=(s=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||s===void 0?void 0:s.call(o,t))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zr;class Rt{constructor(e){var n,i,o,s,l,u,c,d=e===void 0?{}:e,{baseURL:f=Ht("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(n=Ht("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=d,m=gt(d,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:h,apiVersion:p},m),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(i=g.timeout)!==null&&i!==void 0?i:Rt.DEFAULT_TIMEOUT,this.logger=(o=g.logger)!==null&&o!==void 0?o:console;const v="warn";this.logLevel=v,this.logLevel=(l=(s=os(g.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:os(Ht("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:v,this.fetchOptions=g.fetchOptions,this.maxRetries=(u=g.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(c=g.fetch)!==null&&c!==void 0?c:bg(),this.encoder=qg,this._options=g,this.apiKey=h,this.apiVersion=p}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return qt([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Q(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ee}`}defaultIdempotencyKey(){return`stainless-node-retry-${Sg()}`}makeStatusError(e,n,i,o){return Y.generate(e,n,i,o)}buildURL(e,n,i){const o=!this.baseURLOverridden()&&i||this.baseURL,s=Ig(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return Mg(l)||(n=Object.assign(Object.assign({},l),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:n},o)))}request(e,n=null){return new Gn(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var o,s,l;const u=await e,c=(o=u.maxRetries)!==null&&o!==void 0?o:this.maxRetries;n==null&&(n=c),await this.prepareOptions(u);const{req:d,url:f,timeout:h}=await this.buildRequest(u,{retryCount:c-n});await this.prepareRequest(d,{url:f,options:u});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=i===void 0?"":`, retryOf: ${i}`,g=Date.now();if(z(this).debug(`[${p}] sending request`,he({retryOfRequestLogID:i,method:u.method,url:f,options:u,headers:d.headers})),!((s=u.signal)===null||s===void 0)&&s.aborted)throw new fn;const v=new AbortController,y=await this.fetchWithTimeout(f,d,h,v).catch(dn),T=Date.now();if(y instanceof globalThis.Error){const E=`retrying, ${n} attempts remaining`;if(!((l=u.signal)===null||l===void 0)&&l.aborted)throw new fn;const _=cn(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(n)return z(this).info(`[${p}] connection ${_?"timed out":"failed"} - ${E}`),z(this).debug(`[${p}] connection ${_?"timed out":"failed"} (${E})`,he({retryOfRequestLogID:i,url:f,durationMs:T-g,message:y.message})),this.retryRequest(u,n,i??p);throw z(this).info(`[${p}] connection ${_?"timed out":"failed"} - error; no more retries left`),z(this).debug(`[${p}] connection ${_?"timed out":"failed"} (error; no more retries left)`,he({retryOfRequestLogID:i,url:f,durationMs:T-g,message:y.message})),_?new Pr:new At({cause:y})}const A=`[${p}${m}] ${d.method} ${f} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${T-g}ms`;if(!y.ok){const E=await this.shouldRetry(y);if(n&&E){const R=`retrying, ${n} attempts remaining`;return await Gg(y.body),z(this).info(`${A} - ${R}`),z(this).debug(`[${p}] response error (${R})`,he({retryOfRequestLogID:i,url:y.url,status:y.status,headers:y.headers,durationMs:T-g})),this.retryRequest(u,n,i??p,y.headers)}const _=E?"error; no more retries left":"error; not retryable";z(this).info(`${A} - ${_}`);const C=await y.text().catch(R=>dn(R).message),S=Ng(C),I=S?void 0:C;throw z(this).debug(`[${p}] response error (${_})`,he({retryOfRequestLogID:i,url:y.url,status:y.status,headers:y.headers,message:I,durationMs:Date.now()-g})),this.makeStatusError(y.status,S,I,y.headers)}return z(this).info(A),z(this).debug(`[${p}] response start`,he({retryOfRequestLogID:i,url:y.url,status:y.status,headers:y.headers,durationMs:T-g})),{response:y,options:u,controller:v,requestLogID:p,retryOfRequestLogID:i,startTime:g}}async fetchWithTimeout(e,n,i,o){const s=n||{},{signal:l,method:u}=s,c=gt(s,["signal","method"]);l&&l.addEventListener("abort",()=>o.abort());const d=setTimeout(()=>o.abort(),i),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,h=Object.assign(Object.assign(Object.assign({signal:o.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);u&&(h.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(d)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,o){var s;let l;const u=o==null?void 0:o.get("retry-after-ms");if(u){const d=parseFloat(u);Number.isNaN(d)||(l=d)}const c=o==null?void 0:o.get("retry-after");if(c&&!l){const d=parseFloat(c);Number.isNaN(d)?l=Date.parse(c)-Date.now():l=d*1e3}if(!(l&&0<=l&&l<60*1e3)){const d=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,d)}return await Dg(l),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,l=Math.min(.5*Math.pow(2,s),8),u=1-Math.random()*.25;return l*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,o,s;const l=Object.assign({},e),{method:u,path:c,query:d,defaultBaseURL:f}=l,h=this.buildURL(c,d,f);"timeout"in l&&xg("timeout",l.timeout),l.timeout=(i=l.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:p,body:m}=this.buildBody({options:l}),g=await this.buildHeaders({options:e,method:u,bodyHeaders:p,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:g},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(s=l.fetchOptions)!==null&&s!==void 0?s:{}),url:h,timeout:l.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:o}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const l=qt([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Lg()),await this.authHeaders(e),this._options.defaultHeaders,i,e.headers]);return this.validateHeaders(l),l.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=qt([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Vg(e)}:this.encoder({body:e,headers:i})}}Rt.DEFAULT_TIMEOUT=6e4;class O extends Rt{constructor(){super(...arguments),this.interactions=new Or(this)}}zr=O;O.GeminiNextGenAPIClient=zr;O.GeminiNextGenAPIClientError=Q;O.APIError=Y;O.APIConnectionError=At;O.APIConnectionTimeoutError=Pr;O.APIUserAbortError=fn;O.NotFoundError=Fr;O.ConflictError=Ur;O.RateLimitError=Lr;O.BadRequestError=xr;O.AuthenticationError=Nr;O.InternalServerError=br;O.PermissionDeniedError=Dr;O.UnprocessableEntityError=kr;O.toFile=Og;O.Interactions=Or;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oy(t,e){const n={},i=r(t,["name"]);return i!=null&&a(n,["_url","name"],i),n}function sy(t,e){const n={},i=r(t,["name"]);return i!=null&&a(n,["_url","name"],i),n}function ry(t,e){const n={},i=r(t,["sdkHttpResponse"]);return i!=null&&a(n,["sdkHttpResponse"],i),n}function ly(t,e){const n={},i=r(t,["sdkHttpResponse"]);return i!=null&&a(n,["sdkHttpResponse"],i),n}function ay(t,e,n){const i={};if(r(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=r(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&a(e,["displayName"],o),r(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=r(t,["epochCount"]);e!==void 0&&s!=null&&a(e,["tuningTask","hyperparameters","epochCount"],s);const l=r(t,["learningRateMultiplier"]);if(l!=null&&a(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),r(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(r(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(r(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=r(t,["batchSize"]);e!==void 0&&u!=null&&a(e,["tuningTask","hyperparameters","batchSize"],u);const c=r(t,["learningRate"]);if(e!==void 0&&c!=null&&a(e,["tuningTask","hyperparameters","learningRate"],c),r(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(r(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function uy(t,e,n){const i={};let o=r(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const m=r(t,["validationDataset"]);e!==void 0&&m!=null&&a(e,["supervisedTuningSpec"],rs(m))}else if(o==="PREFERENCE_TUNING"){const m=r(t,["validationDataset"]);e!==void 0&&m!=null&&a(e,["preferenceOptimizationSpec"],rs(m))}const s=r(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&a(e,["tunedModelDisplayName"],s);const l=r(t,["description"]);e!==void 0&&l!=null&&a(e,["description"],l);let u=r(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const m=r(t,["epochCount"]);e!==void 0&&m!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],m)}else if(u==="PREFERENCE_TUNING"){const m=r(t,["epochCount"]);e!==void 0&&m!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],m)}let c=r(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const m=r(t,["learningRateMultiplier"]);e!==void 0&&m!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m)}else if(c==="PREFERENCE_TUNING"){const m=r(t,["learningRateMultiplier"]);e!==void 0&&m!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],m)}let d=r(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const m=r(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],m)}else if(d==="PREFERENCE_TUNING"){const m=r(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&a(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],m)}let f=r(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const m=r(t,["adapterSize"]);e!==void 0&&m!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m)}else if(f==="PREFERENCE_TUNING"){const m=r(t,["adapterSize"]);e!==void 0&&m!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],m)}if(r(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(r(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=r(t,["labels"]);e!==void 0&&h!=null&&a(e,["labels"],h);const p=r(t,["beta"]);return e!==void 0&&p!=null&&a(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),i}function cy(t,e){const n={},i=r(t,["baseModel"]);i!=null&&a(n,["baseModel"],i);const o=r(t,["preTunedModel"]);o!=null&&a(n,["preTunedModel"],o);const s=r(t,["trainingDataset"]);s!=null&&_y(s);const l=r(t,["config"]);return l!=null&&ay(l,n),n}function dy(t,e){const n={},i=r(t,["baseModel"]);i!=null&&a(n,["baseModel"],i);const o=r(t,["preTunedModel"]);o!=null&&a(n,["preTunedModel"],o);const s=r(t,["trainingDataset"]);s!=null&&Cy(s,n,e);const l=r(t,["config"]);return l!=null&&uy(l,n,e),n}function fy(t,e){const n={},i=r(t,["name"]);return i!=null&&a(n,["_url","name"],i),n}function hy(t,e){const n={},i=r(t,["name"]);return i!=null&&a(n,["_url","name"],i),n}function py(t,e,n){const i={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);e!==void 0&&s!=null&&a(e,["_query","pageToken"],s);const l=r(t,["filter"]);return e!==void 0&&l!=null&&a(e,["_query","filter"],l),i}function my(t,e,n){const i={},o=r(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const s=r(t,["pageToken"]);e!==void 0&&s!=null&&a(e,["_query","pageToken"],s);const l=r(t,["filter"]);return e!==void 0&&l!=null&&a(e,["_query","filter"],l),i}function gy(t,e){const n={},i=r(t,["config"]);return i!=null&&py(i,n),n}function yy(t,e){const n={},i=r(t,["config"]);return i!=null&&my(i,n),n}function vy(t,e){const n={},i=r(t,["sdkHttpResponse"]);i!=null&&a(n,["sdkHttpResponse"],i);const o=r(t,["nextPageToken"]);o!=null&&a(n,["nextPageToken"],o);const s=r(t,["tunedModels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Yr(u))),a(n,["tuningJobs"],l)}return n}function Ty(t,e){const n={},i=r(t,["sdkHttpResponse"]);i!=null&&a(n,["sdkHttpResponse"],i);const o=r(t,["nextPageToken"]);o!=null&&a(n,["nextPageToken"],o);const s=r(t,["tuningJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>mn(u))),a(n,["tuningJobs"],l)}return n}function Ey(t,e){const n={},i=r(t,["name"]);i!=null&&a(n,["model"],i);const o=r(t,["name"]);return o!=null&&a(n,["endpoint"],o),n}function _y(t,e){const n={};if(r(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(r(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=r(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),a(n,["examples","examples"],o)}return n}function Cy(t,e,n){const i={};let o=r(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const l=r(t,["gcsUri"]);e!==void 0&&l!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(o==="PREFERENCE_TUNING"){const l=r(t,["gcsUri"]);e!==void 0&&l!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let s=r(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=r(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=r(t,["vertexDatasetResource"]);e!==void 0&&l!=null&&a(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(r(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Yr(t,e){const n={},i=r(t,["sdkHttpResponse"]);i!=null&&a(n,["sdkHttpResponse"],i);const o=r(t,["name"]);o!=null&&a(n,["name"],o);const s=r(t,["state"]);s!=null&&a(n,["state"],ar(s));const l=r(t,["createTime"]);l!=null&&a(n,["createTime"],l);const u=r(t,["tuningTask","startTime"]);u!=null&&a(n,["startTime"],u);const c=r(t,["tuningTask","completeTime"]);c!=null&&a(n,["endTime"],c);const d=r(t,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=r(t,["description"]);f!=null&&a(n,["description"],f);const h=r(t,["baseModel"]);h!=null&&a(n,["baseModel"],h);const p=r(t,["_self"]);return p!=null&&a(n,["tunedModel"],Ey(p)),n}function mn(t,e){const n={},i=r(t,["sdkHttpResponse"]);i!=null&&a(n,["sdkHttpResponse"],i);const o=r(t,["name"]);o!=null&&a(n,["name"],o);const s=r(t,["state"]);s!=null&&a(n,["state"],ar(s));const l=r(t,["createTime"]);l!=null&&a(n,["createTime"],l);const u=r(t,["startTime"]);u!=null&&a(n,["startTime"],u);const c=r(t,["endTime"]);c!=null&&a(n,["endTime"],c);const d=r(t,["updateTime"]);d!=null&&a(n,["updateTime"],d);const f=r(t,["error"]);f!=null&&a(n,["error"],f);const h=r(t,["description"]);h!=null&&a(n,["description"],h);const p=r(t,["baseModel"]);p!=null&&a(n,["baseModel"],p);const m=r(t,["tunedModel"]);m!=null&&a(n,["tunedModel"],m);const g=r(t,["preTunedModel"]);g!=null&&a(n,["preTunedModel"],g);const v=r(t,["supervisedTuningSpec"]);v!=null&&a(n,["supervisedTuningSpec"],v);const y=r(t,["preferenceOptimizationSpec"]);y!=null&&a(n,["preferenceOptimizationSpec"],y);const T=r(t,["tuningDataStats"]);T!=null&&a(n,["tuningDataStats"],T);const A=r(t,["encryptionSpec"]);A!=null&&a(n,["encryptionSpec"],A);const E=r(t,["partnerModelTuningSpec"]);E!=null&&a(n,["partnerModelTuningSpec"],E);const _=r(t,["customBaseModel"]);_!=null&&a(n,["customBaseModel"],_);const C=r(t,["experiment"]);C!=null&&a(n,["experiment"],C);const S=r(t,["labels"]);S!=null&&a(n,["labels"],S);const I=r(t,["outputUri"]);I!=null&&a(n,["outputUri"],I);const w=r(t,["pipelineJob"]);w!=null&&a(n,["pipelineJob"],w);const R=r(t,["serviceAccount"]);R!=null&&a(n,["serviceAccount"],R);const x=r(t,["tunedModelDisplayName"]);x!=null&&a(n,["tunedModelDisplayName"],x);const F=r(t,["veoTuningSpec"]);return F!=null&&a(n,["veoTuningSpec"],F),n}function Sy(t,e){const n={},i=r(t,["sdkHttpResponse"]);i!=null&&a(n,["sdkHttpResponse"],i);const o=r(t,["name"]);o!=null&&a(n,["name"],o);const s=r(t,["metadata"]);s!=null&&a(n,["metadata"],s);const l=r(t,["done"]);l!=null&&a(n,["done"],l);const u=r(t,["error"]);return u!=null&&a(n,["error"],u),n}function rs(t,e){const n={},i=r(t,["gcsUri"]);i!=null&&a(n,["validationDatasetUri"],i);const o=r(t,["vertexDatasetResource"]);return o!=null&&a(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ay extends se{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Te(oe.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let l="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?l=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(l=s.name.split("/operations/")[0]),{name:l,state:nn.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=hy(e);return u=P("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>mn(f))}else{const d=fy(e);return u=P("{name}",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>Yr(f))}}async listInternal(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=yy(e);return u=P("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=Ty(f),p=new Do;return Object.assign(p,h),p})}else{const d=gy(e);return u=P("tunedModels",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=vy(f),p=new Do;return Object.assign(p,h),p})}}async cancel(e){var n,i,o,s;let l,u="",c={};if(this.apiClient.isVertexAI()){const d=sy(e);return u=P("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=ly(f),p=new Fo;return Object.assign(p,h),p})}else{const d=oy(e);return u=P("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,l=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),l.then(f=>{const h=ry(f),p=new Fo;return Object.assign(p,h),p})}}async tuneInternal(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI()){const u=dy(e,e);return s=P("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>mn(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=cy(e);return s=P("tunedModels",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>Sy(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iy{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Ry=1024*1024*8,wy=3,My=1e3,Py=2,vt="x-goog-upload-status";async function xy(t,e,n){var i;const o=await Kr(t,e,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[vt])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function Ny(t,e,n){var i;const o=await Kr(t,e,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[vt])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=nr(s),u=new Dn;return Object.assign(u,l),u}async function Kr(t,e,n){var i,o;let s=0,l=0,u=new on(new Response),c="upload";for(s=t.size;l<s;){const d=Math.min(Ry,s-l),f=t.slice(l,l+d);l+d>=s&&(c+=", finalize");let h=0,p=My;for(;h<wy&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(l),"Content-Length":String(d)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[vt]));)h++,await Fy(p),p=p*Py;if(l+=d,((o=u==null?void 0:u.headers)===null||o===void 0?void 0:o[vt])!=="active")break;if(s<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function Dy(t){return{size:t.size,type:t.type}}function Fy(t){return new Promise(e=>setTimeout(e,t))}class Uy{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xy(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ny(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Dy(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ky{create(e,n,i){return new Ly(e,n,i)}}class Ly{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ls="x-goog-api-key";class by{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(ls)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ls,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vy="gl-node/";class d0{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new O({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=Dc(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new by(this.apiKey);this.apiClient=new Dm({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Vy+"web",uploader:new Uy,downloader:new Iy}),this.models=new Qm(this.apiClient),this.live=new Om(this.apiClient,o,new ky),this.batches=new af(this.apiClient),this.chats=new Jf(this.models,this.apiClient),this.caches=new qf(this.apiClient),this.files=new jf(this.apiClient),this.operations=new Zm(this.apiClient),this.authTokens=new pg(this.apiClient),this.tunings=new Ay(this.apiClient),this.fileSearchStores=new Cg(this.apiClient)}}export{da as $,Oy as A,Oa as B,ut as C,zy as D,vn as E,j as F,us as G,ve as H,Qy as I,Mn as J,Ls as K,Ie as L,He as M,Pe as N,Qr as O,Zr as P,rl as Q,Ys as R,nl as S,n0 as T,Hy as U,Zy as V,jy as W,cs as X,Ds as Y,Kl as Z,e0 as _,Pn as a,t0 as a0,gn as a1,si as a2,i0 as a3,o0 as a4,Gy as a5,qy as a6,l0 as a7,a0 as a8,er as a9,tr as aa,c0 as ab,r0 as ac,u0 as ad,d0 as ae,By as b,We as c,iu as d,Ky as e,ee as f,Yy as g,Me as h,Ba as i,_s as j,jr as k,el as l,Tt as m,La as n,s0 as o,k as p,Ga as q,Xy as r,Qn as s,$y as t,Jy as u,Va as v,Wy as w,xe as x,Ca as y,Pa as z};
